<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="32x32" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="16x16" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="mask-icon" href="//img.lujinkai.cn/blog/ljk/1607154764582.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//s1.lujinkai.cn/libs/fontawesome-free/5.15.4/css/all.min.css">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.lujinkai.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":10},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"KN3H1V8A6V","apiKey":"c5d73d0dde2dd770ce49b505f938553d","indexName":"hexo","hits":{"per_page":20,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We did not find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}}}}</script><script src="/js/config.js"></script>

    <meta name="description" content="1234567891011go help									# &#96;go&#96; 命令帮助go help build							# &#96;go build&#96; 命令帮助go build hello.go						# 打包 hello.gogo build -o test hello.go				# 打包 hello.go，并命令编译后的可执行文件为 testgo build -work -x -o test">
<meta property="og:type" content="article">
<meta property="og:title" content="基础">
<meta property="og:url" content="http://blog.lujinkai.cn/Golang/%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="LJKのBlog">
<meta property="og:description" content="1234567891011go help									# &#96;go&#96; 命令帮助go help build							# &#96;go build&#96; 命令帮助go build hello.go						# 打包 hello.gogo build -o test hello.go				# 打包 hello.go，并命令编译后的可执行文件为 testgo build -work -x -o test">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-01-25T15:12:15.000Z">
<meta property="article:modified_time" content="2023-05-29T08:58:05.474Z">
<meta property="article:author" content="像方便面一样的男子">
<meta property="article:tag" content="golang">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://blog.lujinkai.cn/Golang/%E5%9F%BA%E7%A1%80/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://blog.lujinkai.cn/Golang/%E5%9F%BA%E7%A1%80/","path":"Golang/基础/","title":"基础"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>基础 | LJKのBlog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LJKのBlog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学无止境</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%83%E5%B0%94"><span class="nav-number">1.1.</span> <span class="nav-text">布尔</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E5%9E%8B"><span class="nav-number">1.2.</span> <span class="nav-text">整型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8B"><span class="nav-number">1.3.</span> <span class="nav-text">浮点型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">1.4.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iota"><span class="nav-number">1.5.</span> <span class="nav-text">iota</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84-%E5%92%8C-%E5%88%87%E7%89%87"><span class="nav-number">1.6.</span> <span class="nav-text">数组 和 切片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E9%92%88"><span class="nav-number">1.7.</span> <span class="nav-text">指针</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88"><span class="nav-number">1.7.1.</span> <span class="nav-text">数组指针</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%87%E7%89%87%E6%8C%87%E9%92%88"><span class="nav-number">1.7.2.</span> <span class="nav-text">切片指针</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-number">1.7.3.</span> <span class="nav-text">指针变量作为函数参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map"><span class="nav-number">1.8.</span> <span class="nav-text">map</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0%E7%9A%84%E6%95%B0%E9%87%8F"><span class="nav-number">1.8.1.</span> <span class="nav-text">获取元素的数量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A4%E6%96%AD-key-%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="nav-number">1.8.2.</span> <span class="nav-text">判断 key 是否存在</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4"><span class="nav-number">1.8.3.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%8D%E5%8E%86"><span class="nav-number">1.8.4.</span> <span class="nav-text">遍历</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.9.</span> <span class="nav-text">自定义类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">1.10.</span> <span class="nav-text">结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">1.10.1.</span> <span class="nav-text">匿名结构体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E5%B5%8C%E5%85%A5-amp-%E5%8C%BF%E5%90%8D%E5%B5%8C%E5%85%A5"><span class="nav-number">1.10.2.</span> <span class="nav-text">命名嵌入 &amp; 匿名嵌入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B%E5%B5%8C%E5%85%A5"><span class="nav-number">1.10.3.</span> <span class="nav-text">指针类型嵌入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E8%A7%81%E6%80%A7"><span class="nav-number">1.10.4.</span> <span class="nav-text">可见性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E6%8C%87%E9%92%88"><span class="nav-number">1.10.5.</span> <span class="nav-text">结构体和指针</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#channel"><span class="nav-number">1.11.</span> <span class="nav-text">channel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="nav-number">1.11.1.</span> <span class="nav-text">基本定义与使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E5%92%8C%E5%86%99%E5%85%A5"><span class="nav-number">1.11.1.1.</span> <span class="nav-text">读取和写入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B3%E9%97%AD"><span class="nav-number">1.11.1.2.</span> <span class="nav-text">关闭</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%89%E7%BC%93%E5%AD%98%E5%92%8C%E6%9C%89%E7%BC%93%E5%AD%98%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.11.2.</span> <span class="nav-text">有缓存和有缓存的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#range-%E9%81%8D%E5%8E%86"><span class="nav-number">1.11.3.</span> <span class="nav-text">range 遍历</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#select-case-%E7%9B%91%E5%90%AC%E5%A4%9A%E4%B8%AA-channel"><span class="nav-number">1.11.4.</span> <span class="nav-text">select-case 监听多个 channel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AA%E8%AF%BB%E5%92%8C%E5%8F%AA%E5%86%99%E7%AE%A1%E9%81%93"><span class="nav-number">1.11.5.</span> <span class="nav-text">只读和只写管道</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">1.12.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0"><span class="nav-number">1.12.1.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.12.2.</span> <span class="nav-text">返回值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.12.2.1.</span> <span class="nav-text">多返回值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.12.2.2.</span> <span class="nav-text">命名返回值</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="nav-number">1.12.3.</span> <span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AD%E5%8C%85"><span class="nav-number">1.12.4.</span> <span class="nav-text">闭包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%80%BC%E7%B1%BB%E5%9E%8B-amp-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.12.5.</span> <span class="nav-text">值类型 &amp; 引用类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%80%BC%E4%BC%A0%E9%80%92-amp-%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92"><span class="nav-number">1.12.6.</span> <span class="nav-text">值传递 &amp; 引用传递</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="nav-number">1.12.7.</span> <span class="nav-text">错误处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#error-%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.12.7.1.</span> <span class="nav-text">error 接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#defer"><span class="nav-number">1.12.7.2.</span> <span class="nav-text">defer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#panic-%E5%92%8C-recover-%E5%87%BD%E6%95%B0"><span class="nav-number">1.12.7.3.</span> <span class="nav-text">panic 和 recover 函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.13.</span> <span class="nav-text">接口</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.13.1.</span> <span class="nav-text">匿名接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E5%8C%BF%E5%90%8D%E5%B5%8C%E5%85%A5"><span class="nav-number">1.13.2.</span> <span class="nav-text">接口匿名嵌入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80-amp-%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.13.3.</span> <span class="nav-text">类型断言 &amp; 查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%AD%E8%A8%80"><span class="nav-number">1.13.3.1.</span> <span class="nav-text">断言</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.13.3.2.</span> <span class="nav-text">查询</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A9%BA%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.13.4.</span> <span class="nav-text">空接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">1.13.5.</span> <span class="nav-text">使用场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="nav-number">1.14.</span> <span class="nav-text">类型转换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fmt-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="nav-number">2.</span> <span class="nav-text">fmt 格式化输入输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="nav-number">2.1.</span> <span class="nav-text">占位符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">3.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6"><span class="nav-number">3.1.</span> <span class="nav-text">条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E6%8B%A9"><span class="nav-number">3.2.</span> <span class="nav-text">选择</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF"><span class="nav-number">3.3.</span> <span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#for"><span class="nav-number">3.3.1.</span> <span class="nav-text">for</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for-range"><span class="nav-number">3.3.2.</span> <span class="nav-text">for range</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#break-%E5%92%8C-continue"><span class="nav-number">3.3.3.</span> <span class="nav-text">break 和 continue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB-while"><span class="nav-number">3.3.4.</span> <span class="nav-text">类 while</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%BB%E5%BE%AA%E7%8E%AF"><span class="nav-number">3.3.5.</span> <span class="nav-text">死循环</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#label-%E5%92%8C-goto"><span class="nav-number">3.4.</span> <span class="nav-text">label 和 goto</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%85"><span class="nav-number">4.</span> <span class="nav-text">包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%90%E5%91%98%E5%8F%AF%E8%A7%81%E6%80%A7"><span class="nav-number">4.1.</span> <span class="nav-text">成员可见性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#init-%E5%87%BD%E6%95%B0"><span class="nav-number">4.2.</span> <span class="nav-text">init 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Go-%E5%8C%85%E7%AE%A1%E7%90%86"><span class="nav-number">4.3.</span> <span class="nav-text">Go 包管理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95"><span class="nav-number">5.</span> <span class="nav-text">方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%97%E8%80%85%E4%B8%BA%E6%8C%87%E9%92%88"><span class="nav-number">5.1.</span> <span class="nav-text">接受者为指针</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%B5%8C%E5%85%A5"><span class="nav-number">5.2.</span> <span class="nav-text">匿名嵌入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84"><span class="nav-number">6.</span> <span class="nav-text">反射</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E3%80%81interface-%E3%80%81reflect-Value-%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="nav-number">6.1.</span> <span class="nav-text">变量、interface{}、reflect.Value 相互转换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go-Modules"><span class="nav-number">7.</span> <span class="nav-text">Go Modules</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95-amp-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="nav-number">8.</span> <span class="nav-text">单元测试 &amp; 性能测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">8.1.</span> <span class="nav-text">单元测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="nav-number">8.2.</span> <span class="nav-text">性能测试</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="像方便面一样的男子"
      src="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <p class="site-author-name" itemprop="name">像方便面一样的男子</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">340</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">73</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ljkk" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ljkk" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.lujinkai.cn/Golang/%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="//img.lujinkai.cn/blog/ljk/1607154764582.png">
      <meta itemprop="name" content="像方便面一样的男子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LJKのBlog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="基础 | LJKのBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          基础
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-25 23:12:15" itemprop="dateCreated datePublished" datetime="2022-01-25T23:12:15+08:00">2022-01-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-29 16:58:05" itemprop="dateModified" datetime="2023-05-29T16:58:05+08:00">2023-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Golang/" itemprop="url" rel="index"><span itemprop="name">Golang</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">go <span class="built_in">help</span>									<span class="comment"># `go` 命令帮助</span></span><br><span class="line">go <span class="built_in">help</span> build							<span class="comment"># `go build` 命令帮助</span></span><br><span class="line"></span><br><span class="line">go build hello.go						<span class="comment"># 打包 hello.go</span></span><br><span class="line">go build -o <span class="built_in">test</span> hello.go				<span class="comment"># 打包 hello.go，并命令编译后的可执行文件为 test</span></span><br><span class="line">go build -work -x -o <span class="built_in">test</span> hello.go		<span class="comment"># -x		打印编译过程中使用的命令</span></span><br><span class="line">										<span class="comment"># -work		打印编译过程中创建的临时目录，并且在编译结束后不删除（默认删除）</span></span><br><span class="line">go build -x -o <span class="built_in">test</span> hello.go</span><br><span class="line"></span><br><span class="line">go run hello.go							<span class="comment"># 执行hello.go，不生成编译后的二进制文件</span></span><br><span class="line">go install hello.go						<span class="comment"># 打包helllo.go，并将生成的可执行二进制文件移动到GOPATH/bin</span></span><br></pre></td></tr></table></figure>

<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="布尔"><a href="#布尔" class="headerlink" title="布尔"></a>布尔</h3><p>bool</p>
<p>常用操作：&amp;&amp;	||	!	&#x3D;&#x3D;	!&#x3D;</p>
<h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><p>Go 语言提供了 5 种有符号、5 种无符号、1 种指针、1 种单字节、1 种单个 unicode 字符（unicode 码点），共 13 种整数类型，零值均为 0</p>
<p>变量的声明：如果没有赋值 默认值为 0</p>
<p>int, uint, rune, int8, int16, int32, int64, uint8, uint16, uint32, uint64, byte, uintptr</p>
<ul>
<li><p>无符号</p>
<ul>
<li>uint：根据操作系统位数不同在内存中占的字节也不同 uint64 或 uint32，如果出现了负数 会溢出从最小值变成最大值</li>
<li>uint8： 无符号 8 位整型 (0 到 255)</li>
<li>uint16： 无符号 16 位整型 (0 到 65535)</li>
<li>uint32：无符号 32 位整型 (0 到 4294967295)</li>
<li>uint64：无符号 64 位整型 (0 到 18446744073709551615)</li>
</ul>
</li>
<li><p>有符号</p>
<ul>
<li>int：根据操作系统位数不同在内存中占的字节也不同 int64 或 int32</li>
<li>int8： 有符号 8 位整型 (-128 到 127)</li>
<li>int16： 有符号 16 位整型 (-32768 到 32767)</li>
<li>int32： 有符号 32 位整型 (-2147483648 到 2147483647)</li>
<li>int64： 有符号 64 位整型 (-9223372036854775808 到 9223372036854775807)</li>
</ul>
</li>
<li><p>其他</p>
<ul>
<li><p>byte： 类似 uint8，1 字节</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main0201</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//byte字符类型 同时也是uint8的别名</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">byte</span> = <span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//所有的字符都对应ASCII中的整型数据</span></span><br><span class="line">	<span class="comment">//&#x27;0&#x27;对应的48  &#x27;A&#x27;对应的65 &#x27;a&#x27; 对应的97</span></span><br><span class="line">	<span class="comment">//fmt.Println(a)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//%c是一个占位符 表示打印输出一个字符</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, a)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, <span class="number">97</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, a)</span><br><span class="line">	<span class="keyword">var</span> b <span class="type">byte</span> = <span class="string">&#x27;0&#x27;</span> <span class="comment">//字符0  对应的ASCII值为为48</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, <span class="number">48</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main0202</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">byte</span> = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">	<span class="comment">//将小写字母转成大写字母输出</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%c&quot;</span>, a<span class="number">-32</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//转义字符 \n 换行</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//var a byte = &#x27;\n&#x27;</span></span><br><span class="line">	<span class="comment">//\0  对应的ASCII 值为0 用于字符串的结束标志</span></span><br><span class="line">	<span class="comment">//\t 对应的ASCII 值为9 水平制表符 一次跳八个空格</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">byte</span> =<span class="string">&#x27;\t&#x27;</span></span><br><span class="line">	<span class="comment">//fmt.Println(a)</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%c&quot;</span>,a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>rune： 类似 int32</p>
</li>
<li><p>uintptr：无符号整型，用于存放一个指针，32 位或 64 位</p>
</li>
</ul>
</li>
</ul>
<p>定义 int 和 int64 需要使用类型转换才可以计算</p>
<h3 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h3><p>通过自动推到类型创建的浮点型变量 默认类型为 float64</p>
<ul>
<li>float32： 有效位数 6 或 7，第 7 位不一定有效，前 6 位一定有效，示例：π 有效 3.14159</li>
<li>float64：有效位数 15</li>
</ul>
<p>注意：浮点型不能进行&#x3D;&#x3D;或!&#x3D;比较，可选择使用两个浮点数的差在一定区间内则认为相等</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>string</p>
<ul>
<li>可解析字符串：通过双引号(“)来创建，不能包含多行，支持特殊字符转义序列</li>
<li>原生字符串：通过反引号(&#96;)来创建，可包含多行，不支持特殊字符转义序列</li>
</ul>
<p>特殊字符：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">\a：响铃</span><br><span class="line">\b：退格</span><br><span class="line">\f：换页</span><br><span class="line">\n：换行</span><br><span class="line">\r：回车</span><br><span class="line">\t：制表符</span><br><span class="line">\v：垂直制表符</span><br></pre></td></tr></table></figure>

<h3 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h3><p><strong>特殊</strong>常量，可以认为是一个可以被编译器修改的常量。在每一个 const 关键字出现时，被重置为 0，然后在下一个 const 出现之前，每出现一次 iota，值自动加 1。</p>
<p>iota 生成器用于初始化一系列相同规则的常量。</p>
<p>实力：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 枚举值</span></span><br><span class="line">	<span class="comment">// iota 在一个小括号内, 初始化为0, 每调用一次+1</span></span><br><span class="line">	<span class="comment">// const (</span></span><br><span class="line">	<span class="comment">// 	statusNew      = iota // 0</span></span><br><span class="line">	<span class="comment">// 	statusComplete = iota // 1</span></span><br><span class="line">	<span class="comment">// 	statusDeleted  = iota // 2</span></span><br><span class="line">	<span class="comment">// )</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		statusNew      = <span class="literal">iota</span> <span class="comment">// 0</span></span><br><span class="line">		statusComplete        <span class="comment">// 1</span></span><br><span class="line">		statusDeleted         <span class="comment">// 2</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> (</span><br><span class="line">		Monday = <span class="literal">iota</span> * <span class="number">10</span></span><br><span class="line">		Tuesday</span><br><span class="line">		Wednesday</span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line">	fmt.Println(statusNew, statusComplete, statusDeleted)</span><br><span class="line"></span><br><span class="line">	fmt.Println(Monday, Tuesday, Wednesday)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="数组-和-切片"><a href="#数组-和-切片" class="headerlink" title="数组 和 切片"></a>数组 和 切片</h3><p>数组在定义时即固定<strong>长度</strong>，切片在定义时可以指定<strong>长度</strong>和<strong>容量</strong>，也可以不指定。</p>
<p>切片是长度可变的数组（具有相同数据类型的数据项组成的一组长度可变的序列），切片由三部分组成：</p>
<ul>
<li>指针：指向切片第一个元素指向的数组元素的地址</li>
<li>长度：切片元素的数量</li>
<li>容量：切片开始到结束位置元素的数量</li>
</ul>
<p>注意：<font color=red><strong>数组是 值类型，切片是 引用类型</strong></font></p>
<p>注意：切片长度不能超过容量。</p>
<p>关于…</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]<span class="type">int</span> &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;</span><br></pre></td></tr></table></figure>

<p>如果没有三个点，右边类型推导赋值是切片，有三个点推导的类型是数组，数组个数由后面实际初始化个数确定，数组是长度不能改变的</p>
<h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><p>pointer</p>
<p>指针是用来存储变量地址的变量。</p>
<p>该使用值还是指针，取决于是否现需要修改原始数据。</p>
<ul>
<li><p>声明：*type</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p *<span class="type">int</span>			<span class="comment">// 声明指针变量 默认值为0x0 (nil) 空指针</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化：&amp;variable &#x2F; new()</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span></span><br><span class="line"><span class="keyword">var</span> p := &amp;a				<span class="comment">// 初始化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">new</span>(<span class="type">int</span>)		<span class="comment">// 初始化，默认为0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>操作：*pointerVariable</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span></span><br><span class="line"><span class="keyword">var</span> p := &amp;a</span><br><span class="line">*p = <span class="number">456</span>				<span class="comment">// 赋值</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="数组指针"><a href="#数组指针" class="headerlink" title="数组指针"></a>数组指针</h4><p>数组指针操作数组，可以省略*</p>
<p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">p := &amp;arr</span><br><span class="line">fmt.Println(p, *p, (*p)[<span class="number">0</span>], p[<span class="number">0</span>])	<span class="comment">// &amp;[1 2 3] [1 2 3] 1 1</span></span><br></pre></td></tr></table></figure>

<p>上例中，(*p)[0] 可以简化为 p[0]</p>
<h4 id="切片指针"><a href="#切片指针" class="headerlink" title="切片指针"></a>切片指针</h4><p>因为切片是引用类型，所以*不能省略</p>
<p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">slice := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">p := &amp;slice</span><br><span class="line">fmt.Println(p, *p, (*p)[<span class="number">0</span>])			<span class="comment">// &amp;[1 2 3] [1 2 3] 1</span></span><br></pre></td></tr></table></figure>

<h4 id="指针变量作为函数参数"><a href="#指针变量作为函数参数" class="headerlink" title="指针变量作为函数参数"></a>指针变量作为函数参数</h4><p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a *<span class="type">int</span>, b *<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	*a, *b = *b, *a</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	swap(&amp;a, &amp;b)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>映射是存储一系列无序的 key&#x2F;value 对，通过 key 来对 value 进行操作（增、删、改、查）。<br>映射的 key 只能为可使用 &#x3D;&#x3D; 运算符的 <strong>值类型</strong>（字符串、数字、布尔、数组），value 可以为任意类型</p>
<p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">names := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;Go001&quot;</span>: <span class="string">&quot;小明&quot;</span>&#125;	<span class="comment">// 一定要进行初始化，不能只声明类型</span></span><br><span class="line">names[<span class="string">&quot;Go002&quot;</span>] = <span class="string">&quot;小刚&quot;</span></span><br><span class="line">names[<span class="string">&quot;Go003&quot;</span>] = <span class="string">&quot;小红&quot;</span></span><br><span class="line">fmt.Println(names)		<span class="comment">// map[Go001:小明 Go002:小刚 Go003:小红]</span></span><br></pre></td></tr></table></figure>

<h4 id="获取元素的数量"><a href="#获取元素的数量" class="headerlink" title="获取元素的数量"></a>获取元素的数量</h4><p>len()</p>
<h4 id="判断-key-是否存在"><a href="#判断-key-是否存在" class="headerlink" title="判断 key 是否存在"></a>判断 key 是否存在</h4><p>通过 key 访问元素时可接收两个值，第一个值为 value，第二个值为 bool 类型表示元素是否存在，若存在为 true，否则为 false</p>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>delete(map, key)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">delete</span>(names, <span class="string">&quot;Go001&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h4><p>for range</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;lujinkai&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="string">&quot;18&quot;</span>, <span class="string">&quot;gender&quot;</span>: <span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">		fmt.Println(k, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义类型"><a href="#自定义类型" class="headerlink" title="自定义类型"></a>自定义类型</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TypeName Format</span><br></pre></td></tr></table></figure>

<p>Format 可以是任意内置类型、函数签名、结构体、接口。</p>
<h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><p>struct</p>
<p>结构体是 <strong>值类型</strong>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">type</span> Author <span class="keyword">struct</span> &#123;</span><br><span class="line">		id   <span class="type">int</span></span><br><span class="line">		name <span class="type">string</span></span><br><span class="line">		addr <span class="type">string</span></span><br><span class="line">		tel  <span class="type">string</span></span><br><span class="line">		desc <span class="type">string</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	lujinkai := Author&#123;</span><br><span class="line">		id:   <span class="number">1</span>,</span><br><span class="line">		name: <span class="string">&quot;lujinkai&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, lujinkai)		<span class="comment">// main.Author&#123;id:1, name:&quot;lujinkai&quot;, addr:&quot;&quot;, tel:&quot;&quot;, desc:&quot;&quot;&#125;</span></span><br><span class="line">	fmt.Println(lujinkai.name)			<span class="comment">// lujinkai</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="匿名结构体"><a href="#匿名结构体" class="headerlink" title="匿名结构体"></a>匿名结构体</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">me := <span class="keyword">struct</span> &#123;</span><br><span class="line">    id   <span class="type">int</span></span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;&#123;<span class="number">1</span>, <span class="string">&quot;lujiknai&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(me)		<span class="comment">// &#123;1 lujiknai&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="命名嵌入-amp-匿名嵌入"><a href="#命名嵌入-amp-匿名嵌入" class="headerlink" title="命名嵌入 &amp; 匿名嵌入"></a>命名嵌入 &amp; 匿名嵌入</h4><p><strong>命名嵌入：</strong></p>
<p>调用的时候属性名不能省略。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">    id   <span class="type">int</span></span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span> &#123;</span><br><span class="line">    a    A</span><br><span class="line">    tel  <span class="type">string</span></span><br><span class="line">    addr <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">b := B&#123;</span><br><span class="line">    a: A&#123;</span><br><span class="line">        id:   <span class="number">1</span>,</span><br><span class="line">        name: <span class="string">&quot;ljk&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    tel:  <span class="string">&quot;1767427610&quot;</span>,</span><br><span class="line">    addr: <span class="string">&quot;北京海淀&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(b.a.id)		<span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p><strong>匿名嵌入：</strong></p>
<p>结构体类型和属性名必须一致，调用的时候可以省略属性名。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">    id   <span class="type">int</span></span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span> &#123;</span><br><span class="line">    A</span><br><span class="line">    tel  <span class="type">string</span></span><br><span class="line">    addr <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">b := B&#123;</span><br><span class="line">    A: A&#123;</span><br><span class="line">        id:   <span class="number">1</span>,</span><br><span class="line">        name: <span class="string">&quot;ljk&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    tel:  <span class="string">&quot;1767427610&quot;</span>,</span><br><span class="line">    addr: <span class="string">&quot;北京海淀&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(b.id)		<span class="comment">// 1</span></span><br><span class="line">fmt.Println(b.A.id)		<span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h4 id="指针类型嵌入"><a href="#指针类型嵌入" class="headerlink" title="指针类型嵌入"></a>指针类型嵌入</h4><p>结构体嵌入（命名&amp;匿名）类型也可以为结构体指针。</p>
<ul>
<li><p>使用属性为指针类型，底层共享数据结构，当底层数据发生变化，所有引用都会发生影响。</p>
</li>
<li><p>使用属性为值类型，则在复制时发生拷贝，两者不相互影响</p>
</li>
</ul>
<p><strong>命名嵌入指针结构体：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">    id   <span class="type">int</span></span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span> &#123;</span><br><span class="line">    a    *A</span><br><span class="line">    tel  <span class="type">string</span></span><br><span class="line">    addr <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">b := B&#123;</span><br><span class="line">    a: &amp;A&#123;</span><br><span class="line">        id:   <span class="number">1</span>,</span><br><span class="line">        name: <span class="string">&quot;ljk&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    tel:  <span class="string">&quot;1767427610&quot;</span>,</span><br><span class="line">    addr: <span class="string">&quot;北京海淀&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(b.a.id)</span><br></pre></td></tr></table></figure>

<p><strong>匿名嵌入指针结构体：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">    id   <span class="type">int</span></span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span> &#123;</span><br><span class="line">    *A</span><br><span class="line">    tel  <span class="type">string</span></span><br><span class="line">    addr <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">b := B&#123;</span><br><span class="line">    A: &amp;A&#123;</span><br><span class="line">        id:   <span class="number">1</span>,</span><br><span class="line">        name: <span class="string">&quot;ljk&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    tel:  <span class="string">&quot;1767427610&quot;</span>,</span><br><span class="line">    addr: <span class="string">&quot;北京海淀&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(b.id)		<span class="comment">// 1</span></span><br><span class="line">fmt.Println(b.A.id)		<span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h4 id="可见性"><a href="#可见性" class="headerlink" title="可见性"></a>可见性</h4><p>结构体首字母大写则包外可见（公开），否者仅包内可访问（内部）</p>
<p>结构体属性名首字母大写包外可见（公开），否者仅包内可访问（内部）<br>组合：</p>
<ul>
<li>结构体名首字母大写，属性名大写：结构体可在包外使用，且访问其大写的属性名</li>
<li>结构体名首字母大写，属性名小写：结构体可在包外使用，且不能访问其小写的属性名</li>
<li>结构体名首字母小写，属性名大写：结构体只能在包内使用，属性访问在结构体嵌入时由被嵌入结构体（外层）决定，被嵌入结构体名首字母大写时属性名包外可见，否者只能在包内使用</li>
<li>结构体名首字母小写，属性名小写：结构体只能在包内使用</li>
</ul>
<h4 id="结构体和指针"><a href="#结构体和指针" class="headerlink" title="结构体和指针"></a>结构体和指针</h4><p>结构体是值类型，指针是引用类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> File <span class="keyword">struct</span> &#123;</span><br><span class="line">    Context <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//扩展理解部分, 这部分可以先略过,下面会单独讲解</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *File)</span></span> Clone1() *File &#123; <span class="comment">// 返回新File 不同步</span></span><br><span class="line">    <span class="keyword">return</span> &amp;File&#123;Context: t.Context &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *File)</span></span> Clone2() *File &#123; <span class="comment">//返回 t 同步改</span></span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *File)</span></span> Clone3() File &#123; <span class="comment">// 返回 *t 不同步</span></span><br><span class="line">    <span class="keyword">return</span> *t</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t File)</span></span> Clone4() *File &#123; <span class="comment">// 返回 &amp;t 不同步</span></span><br><span class="line">    <span class="keyword">return</span> &amp;t</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t File)</span></span> Clone5() File &#123; <span class="comment">// 返回 t 不同步</span></span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h3><p>不要通过共享内存来通信，而通过通信来共享内存。</p>
<h4 id="基本定义与使用"><a href="#基本定义与使用" class="headerlink" title="基本定义与使用"></a>基本定义与使用</h4><p>channel 必须通过 make 创建，<code>var c chan int</code> 这种形式创建的是 nil channel，是不能用的，无论收发都会被堵塞。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无缓存channel</span></span><br><span class="line">c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"><span class="comment">// 有缓存channel</span></span><br><span class="line">c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h5 id="读取和写入"><a href="#读取和写入" class="headerlink" title="读取和写入"></a>读取和写入</h5><p>可通过操作符 <code>&lt;- </code> 和 <code>-&gt;</code> 对管道进行读取和写入操作，当写入无缓冲区管道或由缓冲区管道已满时写入则会阻塞直到管道中元素被其他例程读取。同理，当管道中无元素时读取时也会<strong>阻塞</strong>到管道被其他例程写入元素。</p>
<h5 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// func close(c chan&lt;- Type)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">close</span>(c)		<span class="comment">// 关闭channel c</span></span><br></pre></td></tr></table></figure>

<h4 id="有缓存和有缓存的区别"><a href="#有缓存和有缓存的区别" class="headerlink" title="有缓存和有缓存的区别"></a>有缓存和有缓存的区别</h4><p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发送者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">    </span><br><span class="line">	ch &lt;- <span class="number">1</span> <span class="comment">// 发送</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;发送&quot;</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接收者</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		v := &lt;-ch <span class="comment">// 接收</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;接收&quot;</span>, v)</span><br><span class="line">	&#125;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deadlock</span><br></pre></td></tr></table></figure>

<p>使用无缓存通道，稍不留神就会死锁。</p>
<p>有缓存和无缓存channel，除了有无缓存空间外，其阻塞策略也不同。</p>
<p>在无缓存通道下，发送者的发送操作将阻塞，直到接收者执行接受操作。同样接受者的接受操作将阻塞，直到发送者执行发送操作。发送者的发送操作和接受者的接受操作是<strong>同步</strong>的。</p>
<p>在有缓存通道下，如果缓存空间满了，那么发送者的发送操作将阻塞。直到接受者取走数据，有了缓存空间，发送者的发送操作才会继续执行。如果缓存是空的，那么接受者的接受操作将阻塞。</p>
<p>上面的示例中，有两种解决方法：</p>
<ol>
<li><p>使用有缓存通道。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>还是使用无缓存通道，但要先创建接受者，再发送数据。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接收者</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		v := &lt;-ch <span class="comment">// 这里阻塞</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;收到：&quot;</span>, v)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 发送者</span></span><br><span class="line">	ch &lt;- <span class="number">1</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;发送：&quot;</span>, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="range-遍历"><a href="#range-遍历" class="headerlink" title="range 遍历"></a>range 遍历</h4><h4 id="select-case-监听多个-channel"><a href="#select-case-监听多个-channel" class="headerlink" title="select-case 监听多个 channel"></a>select-case 监听多个 channel</h4><p>使用select-case对多个channel进行监听（写入或者读取），则可以使用 select-case</p>
<p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">done</span><span class="params">()</span></span> &lt;-<span class="keyword">chan</span> <span class="type">int</span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	c &lt;- <span class="number">999</span></span><br><span class="line">	time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">	<span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch01 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	ch02 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	ch01 &lt;- <span class="number">0</span></span><br><span class="line">	ch02 &lt;- <span class="number">0</span></span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> &lt;-ch01:</span><br><span class="line">		fmt.Println(<span class="string">&quot;ch01&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> &lt;-ch02:</span><br><span class="line">		fmt.Println(<span class="string">&quot;ch02&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> &lt;-done():</span><br><span class="line">		fmt.Println(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>每个case语句都必须是管道操作，即channel的读或者写;</p>
</li>
<li><p>在一个select-case操作中，select检查所有的case语句，只要是合法的管道操作，这个case就可以执行，select会随机执行一个可以执行的case，其他的忽略;</p>
</li>
<li><p>case语句中如果有函数，则会执行一遍这个函数（函数中对管道的操作不会真的执行），上例中，done() 2秒后返回管道，所以select-case需要等2秒后才会随机选择一个case进行执行;</p>
<p>如果使用time.After，则无需等待，因为time.Sleep是同步，而time.After是异步：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch01 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	ch02 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	ch01 &lt;- <span class="number">0</span></span><br><span class="line">	ch02 &lt;- <span class="number">0</span></span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> c := &lt;-ch01:</span><br><span class="line">		fmt.Println(<span class="string">&quot;ch01: &quot;</span>, c)</span><br><span class="line">	<span class="keyword">case</span> c := &lt;-ch02:</span><br><span class="line">		fmt.Println(<span class="string">&quot;ch02: &quot;</span>, c)</span><br><span class="line">	<span class="keyword">case</span> &lt;-time.After(<span class="number">2</span> * time.Second):</span><br><span class="line">		fmt.Println(<span class="string">&quot;2 time.Second&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果所有的case都不可执行，就走default，如果没有default，则整个select-case就会一直堵塞</p>
</li>
</ul>
<p>select-case 通常搭配 for 使用，在某种情况下，通过break退出for循环（或return退出函数）</p>
<h4 id="只读和只写管道"><a href="#只读和只写管道" class="headerlink" title="只读和只写管道"></a>只读和只写管道</h4><p><code>chan&lt;- type</code>  单向只写管道，只能写数据到管道里面</p>
<p><code> &lt;-chan type</code> 单向只读管道，只能从管道里面读出数据</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><ul>
<li><p>在声明函数中若存在多个连续形参类型相同可只保留最后一个参数类型名。</p>
</li>
<li><p>运算符…声明可变参数函数或在调用时传递可变参数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(a, b <span class="type">int</span>, args ...<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">fmt.Println(a, b, args)  <span class="comment">//	1 2 [3 4 5]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, args) <span class="comment">// []int 切片类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 两种调用方式</span></span><br><span class="line">	test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">	test(<span class="number">1</span>, <span class="number">2</span>, []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;...)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h4><h5 id="多返回值"><a href="#多返回值" class="headerlink" title="多返回值"></a>多返回值</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(n1, n2 <span class="type">int</span>)</span></span> (<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> n1 + n2, n1 * n2, n1 - n2, n1 / n2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(test(<span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// 5 6 -1 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="命名返回值"><a href="#命名返回值" class="headerlink" title="命名返回值"></a>命名返回值</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(n1, n2 <span class="type">int</span>)</span></span> (sum, difference, product, quotient <span class="type">int</span>) &#123;</span><br><span class="line">	sum, difference, product, quotient = n1+n2, n1*n2, n1-n2, n1/n2</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(test(<span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// 5 6 -1 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><h4 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h4><h4 id="值类型-amp-引用类型"><a href="#值类型-amp-引用类型" class="headerlink" title="值类型 &amp; 引用类型"></a>值类型 &amp; 引用类型</h4><p>值类型和引用类型的差异在于赋值同类型新变量后，对新变量进行修改是否能够影响原来的变量，若不能影响则为值类型，若能影响则为引用类型</p>
<ul>
<li>值类型：数值、布尔、字符串、指针、数组、结构体</li>
<li>引用类型：切片、映射、接口等</li>
</ul>
<blockquote>
<ul>
<li>值类型：基本数据类型 int 系列, float 系列, bool, string 、数组和结构体 struct</li>
<li>引用类型：指针、slice 切片、map、管道 chan、interface 、函数都是引用类型</li>
</ul>
</blockquote>
<h4 id="值传递-amp-引用传递"><a href="#值传递-amp-引用传递" class="headerlink" title="值传递 &amp; 引用传递"></a>值传递 &amp; 引用传递</h4><ul>
<li>默认就是值值传递</li>
<li>传引用类型（最常用的是切片[]byte 和指针）作为参数，就是引用传递，可以在函数内修改函数外的变量</li>
</ul>
<p>如果要直接修改传入的参数，一定要引用传递</p>
<h4 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h4><h5 id="error-接口"><a href="#error-接口" class="headerlink" title="error 接口"></a>error 接口</h5><p>go 语言通过 error 接口实现错误处理的标准模式，通过使用函数返回值列表中的最后一个值返回错误信息，将错误的处理交由程序员主动进行处理。</p>
<p>error 接口的初始化方法：</p>
<ul>
<li>errors.New</li>
<li>fmt.Errorf</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">division</span><span class="params">(n1, n2 <span class="type">int</span>)</span></span> (<span class="type">float64</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> n2 == <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, errors.New(<span class="string">&quot;除数为0&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="type">float64</span>(n1) / <span class="type">float64</span>(n2), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r, err := division(<span class="number">1</span>, <span class="number">6</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%0.2f %v\n&quot;</span>, r, err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h5><p>defer 关键字用户声明函数，不论函数是否发生错误都在函数执行最后执行（return 之前），类似 php 中的析构函数。</p>
<p>若使用 defer 声明多个函数，则按照声明的顺序，先声明后执行（堆）。</p>
<p>常用来做资源释放，记录日志等工作。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;defer 01&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;defer 02&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> f1()</span><br><span class="line">	<span class="keyword">defer</span> f2()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defer 02</span><br><span class="line">defer 01</span><br></pre></td></tr></table></figure>

<h5 id="panic-和-recover-函数"><a href="#panic-和-recover-函数" class="headerlink" title="panic 和 recover 函数"></a>panic 和 recover 函数</h5><p>go 语言提供 panic 和 recover 函数用于处理运行时错误：</p>
<p>panic 抛出异常，中断代码继续往下执行，异常在 defer 中“冒泡”，recover 只能用于 defer 语句声明的函数，用于捕获“冒泡”的异常，被 recover 捕获的异常就不继续往上“冒泡”了，但是不会阻止 defer 的继续执行。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;err: &quot;</span>, err)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;未捕获到error&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;defer 01&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;err: &quot;</span>, err)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;未捕获到error&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;defer 02&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> f1()</span><br><span class="line">	<span class="keyword">defer</span> f2()</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">&quot;this is panic&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">err:  this is panic</span><br><span class="line">defer 02</span><br><span class="line">未捕获到error</span><br><span class="line">defer 01</span><br></pre></td></tr></table></figure>

<p>panic 抛出异常，在 defer 中向上冒泡，要注意以下几点：</p>
<ul>
<li>panic 后面的代码就不执行了，包括 defer，异常只在 panic 之前的 defer 中冒泡</li>
<li>只有 panic 抛出的异常，才会在 defer 中冒泡，return、log.Fatal 等中止程序运行的语句，会直接中止，并不会执行 defer</li>
</ul>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>interface</p>
<p><strong>接口是引用类型。</strong></p>
<p>接口是自定义类型，是对是其他类型行为的抽象。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Sender <span class="keyword">interface</span> &#123;</span><br><span class="line">    Send(to, msg <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">    SendAll(tos []<span class="type">string</span>, msg <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>若两个接口声明同样的函数签名，则两个接口完全等价。</p>
<p>当接口 A 包含接口 B 中声明的所有函数时（接口 A 函数是接口 B 函数的父集），则接口 A 的对象赋值给接口 B 的对象，只不过接口 B 对象只能调用接口 B 中定义的函数（方法）。</p>
<p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义Sender接口，声明Send和SendAll两个方法</span></span><br><span class="line"><span class="keyword">type</span> Sender <span class="keyword">interface</span> &#123;</span><br><span class="line">	Send(to, msg <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">	SendAll(tos []<span class="type">string</span>, msg <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义EmailSender结构体</span></span><br><span class="line"><span class="keyword">type</span> EmailSender <span class="keyword">struct</span> &#123;</span><br><span class="line">	addr           <span class="type">string</span></span><br><span class="line">	port           <span class="type">int</span></span><br><span class="line">	user, password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// EmailSender结构体添加Send和SendAll两个方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(sender *EmailSender)</span></span> Send(to, msg <span class="type">string</span>) <span class="type">error</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;发送邮件给:  %s, 内容：%s\n&quot;</span>, to, msg)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(sender *EmailSender)</span></span> SendAll(tos []<span class="type">string</span>, msg <span class="type">string</span>) <span class="type">error</span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, to := <span class="keyword">range</span> tos &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;发送邮件给:  %s, 内容：%s\n&quot;</span>, to, msg)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为EmailSender结构体实现了Sender接口中声明的两个方法，所以这里可以指定变量sender的类型为Sender接口</span></span><br><span class="line"><span class="keyword">var</span> sender Sender = &amp;EmailSender&#123;<span class="string">&quot;smtp.qq.com&quot;</span>, <span class="number">123</span>, <span class="string">&quot;lujinkai&quot;</span>, <span class="string">&quot;123456&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">sender.Send(<span class="string">&quot;441757636@qq.com&quot;</span>, <span class="string">&quot;hi lujinkai&quot;</span>)											<span class="comment">// 调用Send方法</span></span><br><span class="line">sender.SendAll([]<span class="type">string</span>&#123;<span class="string">&quot;441757636@qq.com&quot;</span>, <span class="string">&quot;1076956365@qq.com&quot;</span>&#125;, <span class="string">&quot;good morning&quot;</span>)		<span class="comment">// 调用SendAll方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义SingleSender接口，只声明Send方法</span></span><br><span class="line"><span class="keyword">type</span> SingleSender <span class="keyword">interface</span> &#123;</span><br><span class="line">	Send(to, msg <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义SingleSender类型的变量singleSender，赋值sender</span></span><br><span class="line"><span class="keyword">var</span> singleSender SingleSender = sender</span><br><span class="line"></span><br><span class="line">singleSender.Send(<span class="string">&quot;441757636@qq.com&quot;</span>, <span class="string">&quot;hi ljk&quot;</span>)											<span class="comment">// 调用Send方法</span></span><br><span class="line">singleSender.SendAll([]<span class="type">string</span>&#123;<span class="string">&quot;441757636@qq.com&quot;</span>, <span class="string">&quot;1076956365@qq.com&quot;</span>&#125;, <span class="string">&quot;hi error&quot;</span>)		<span class="comment">// 报错，无法调用SendAll方法</span></span><br></pre></td></tr></table></figure>

<h4 id="匿名接口"><a href="#匿名接口" class="headerlink" title="匿名接口"></a>匿名接口</h4><p>在定义变量时将类型指定为接口的函数签名的接口，此时叫匿名接口。匿名接口常用于初始化一次接口变量的场景。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleSender <span class="keyword">interface</span> &#123;</span><br><span class="line">    Send(to, msg <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125; = sender</span><br><span class="line"></span><br><span class="line">singleSender.Send(<span class="string">&quot;441757636@qq.com&quot;</span>, <span class="string">&quot;hi ljk&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="接口匿名嵌入"><a href="#接口匿名嵌入" class="headerlink" title="接口匿名嵌入"></a>接口匿名嵌入</h4><p>接口之中也可以嵌入已存在的接口，从而实现接口的扩展。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">interface</span> &#123;</span><br><span class="line">    A(s <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">interface</span> &#123;</span><br><span class="line">    B(s <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> C <span class="keyword">interface</span> &#123;</span><br><span class="line">    A</span><br><span class="line">    B</span><br><span class="line">    C(s <span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</span><br><span class="line">    id   <span class="type">int</span></span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给T添加方法 A()、B()、C()</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">var</span> t C = T&#123;<span class="number">1</span>, <span class="string">&quot;lujinkai&quot;</span>&#125;</span><br><span class="line">t.A(<span class="string">&quot;test 1&quot;</span>)</span><br><span class="line">t.B(<span class="string">&quot;test 2&quot;</span>)</span><br><span class="line">t.C(<span class="string">&quot;test 3&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="类型断言-amp-查询"><a href="#类型断言-amp-查询" class="headerlink" title="类型断言 &amp; 查询"></a>类型断言 &amp; 查询</h4><h5 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h5><p>格式：<code>v,ok := x.(类型)</code>，x 必须为接口类型，x 转换类型得到 v，ok 表示转换类型是否成功，如果不设置第二个参数，也就是 ok，断言失败时会直接造成一个 panic，如果 x 为 nil 同样也会 panic</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">interface</span> &#123;</span><br><span class="line">	A()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AB <span class="keyword">interface</span> &#123;</span><br><span class="line">	A()</span><br><span class="line">	B()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</span><br><span class="line">	id   <span class="type">int</span></span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i T)</span></span> A() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;A&quot;</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i T)</span></span> B() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;B&quot;</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a A = T&#123;<span class="number">1</span>, <span class="string">&quot;test&quot;</span>&#125;		<span class="comment">// 只能用var，写法 a := T&#123;1, &quot;test&quot;&#125; 是不对的</span></span><br><span class="line">	a.A()</span><br><span class="line">    a.B()						<span class="comment">// 会报错</span></span><br><span class="line">	v, ok := a.(AB)</span><br><span class="line">	fmt.Println(v, ok)			<span class="comment">// &lt;nil&gt; false</span></span><br><span class="line">	v.B()						<span class="comment">// 不会报错</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h5><p>格式：<code>x.(type)</code>，x 必须为接口类型</p>
<p>只能用于 switch 的判断</p>
<p>示例：参考下面的空接口示例</p>
<h4 id="空接口"><a href="#空接口" class="headerlink" title="空接口"></a>空接口</h4><p>不包含任何函数签名的接口叫空接口，空接口声明的变量可以赋值为任何类型的变量（任意接口）</p>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>常声明函数参数类型为 <code>interface&#123;&#125;</code>，用于接收任意类型的变量</p>
<p>go 中没有泛型，空接口搭配 switch 可以部分实现泛型的功能</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printTypes</span><span class="params">(vs ...<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> vs &#123;</span><br><span class="line">		<span class="keyword">switch</span> v.(<span class="keyword">type</span>) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;nil&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="type">int</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;int&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="type">bool</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;bool&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="type">string</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;string&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> [<span class="number">5</span>]<span class="type">int</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;[5]int&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> []<span class="type">int</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;[]int&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;map[string]string&quot;</span>)</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;unknow&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>golang 中的类型转换分为强制类型转换、类型断言、以及“向上造型”</p>
<p>这里先只介绍 强制类型转换：</p>
<ul>
<li><p>等价类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type_name(expression)</span><br></pre></td></tr></table></figure>

<p>type_name 为类型，expression 为表达式。</p>
<p>什么是等价类型？即实现了相同的方法，[]byte 和 string 是等价类型，int32 和 int64 也是等价类型，但是 int 和 string 不是等价类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>不等价类型</p>
<p>使用 strconv 包</p>
</li>
</ul>
<h2 id="fmt-格式化输入输出"><a href="#fmt-格式化输入输出" class="headerlink" title="fmt 格式化输入输出"></a>fmt 格式化输入输出</h2><p><a target="_blank" rel="noopener" href="https://studygolang.com/static/pkgdoc/pkg/fmt.htm">https://studygolang.com/static/pkgdoc/pkg/fmt.htm</a></p>
<h3 id="占位符"><a href="#占位符" class="headerlink" title="占位符"></a>占位符</h3><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><p>go 中的循环只有 for 和 for range</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="for-range"><a href="#for-range" class="headerlink" title="for range"></a>for range</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	arr := [...]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> arr &#123;</span><br><span class="line">		fmt.Println(k,v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="break-和-continue"><a href="#break-和-continue" class="headerlink" title="break 和 continue"></a>break 和 continue</h4><p>break 和 continue 语句和其他语言中的 break 和 continue 无异</p>
<h4 id="类-while"><a href="#类-while" class="headerlink" title="类 while"></a>类 while</h4><p>for 子语句只保留条件子语句，此时类似于其他语言中的 while 循环</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="number">100</span> &#123;</span><br><span class="line">		i ++</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="死循环"><a href="#死循环" class="headerlink" title="死循环"></a>死循环</h4><p>for 子语句全部省略，则为无限循环（死循环），常与 break 与 continue 结合使用，类似其他语言中的 <code>while(true) &#123;&#125;</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="label-和-goto"><a href="#label-和-goto" class="headerlink" title="label 和 goto"></a>label 和 goto</h3><p>可以通过 goto 语句任意跳转到当前函数指定的 label 位置。</p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p>Go 源文件都需要在开头使用 package 声明所在包。</p>
<p>包名使用简短的小写字母，常与所在目录名保持一致，一个包中可以由多个 Go 源文件，但必须使用相同包名。</p>
<p>main 包用于声明告知编译器将包编译为二进制可执行文件，在 main 包中的 main 函数是程序的入口，无返回值，无参数。</p>
<h3 id="成员可见性"><a href="#成员可见性" class="headerlink" title="成员可见性"></a>成员可见性</h3><p>Go 使用名称首字母大小写来判断对象（<strong>常量、变量、函数、类型、结构体、方法等</strong>）的访问权限，首字母大写标识包外可见(公开的)，否者仅包内可访（内部的）。</p>
<h3 id="init-函数"><a href="#init-函数" class="headerlink" title="init 函数"></a>init 函数</h3><p>init 函数用于初始化包，无返回值，无参数。建议每个包只定义一个，相当于 php 中的构造函数__construct()。</p>
<p>Go 不允许包导入但未使用，在某些情况下需要初始化包，使用空白符作为别名进行导入，从而使得包中的 init 函数可以执行。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="string">&quot;fmt&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Go-包管理"><a href="#Go-包管理" class="headerlink" title="Go 包管理"></a>Go 包管理</h3><p>标准包：</p>
<p><a target="_blank" rel="noopener" href="https://studygolang.com/pkgdoc">Go 语言标准库文档中文版 | Go 语言中文网 | Golang 中文社区 | Golang 中国 (studygolang.com)</a></p>
<p>第三方包查找地址：<br><a target="_blank" rel="noopener" href="https://godoc.org/">https://godoc.org</a><br><a target="_blank" rel="noopener" href="https://gowalker.org/">https://gowalker.org/</a></p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>方法是为特定类型定义的，只能由该类型调用的函数。</p>
<p>方法是添加了接受者的函数，接受者必须是自定义的类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t <span class="keyword">type</span>)</span></span> method(params) returns &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>调用</strong>：通过点 . 调用。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dog Dog)</span></span> Call() &#123;</span><br><span class="line">    fmt.Println(dog.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dog := Dog&#123;<span class="string">&quot;豆豆&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">dog.Call()		<span class="comment">// 豆豆 调用</span></span><br></pre></td></tr></table></figure>

<h3 id="接受者为指针"><a href="#接受者为指针" class="headerlink" title="接受者为指针"></a>接受者为指针</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dog *Dog)</span></span> SetName(name <span class="type">string</span>) &#123;</span><br><span class="line">    dog.name = name</span><br><span class="line">&#125;</span><br><span class="line">(&amp;dog).SetName(<span class="string">&quot;大黄&quot;</span>)	<span class="comment">// 调用</span></span><br><span class="line">dog.Call()				<span class="comment">// 大黄</span></span><br></pre></td></tr></table></figure>

<p><strong>该使用值接收者还是指针接收者，取决于是否现需要修改原始结构体：</strong></p>
<ul>
<li>若不需要修改则使用值，若需要修改则使用指针</li>
<li>若存在指针接收者，则所有方法使用指针接收者</li>
</ul>
<p>对于接收者为指针类型的方法，需要注意在运行时若接收者为 nil 会发生错误。</p>
<h3 id="匿名嵌入"><a href="#匿名嵌入" class="headerlink" title="匿名嵌入"></a>匿名嵌入</h3><p>若结构体匿名嵌入带有方法的结构体时，则在外部结构体可以调用嵌入结构体的方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	addr <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> GetName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> user.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">		*User</span><br><span class="line">		name  <span class="type">string</span></span><br><span class="line">		title <span class="type">string</span></span><br><span class="line">	&#125;</span><br><span class="line">	a := Employee&#123;</span><br><span class="line">		User:  &amp;User&#123;<span class="string">&quot;aaaaa&quot;</span>, <span class="string">&quot;海淀&quot;</span>&#125;,</span><br><span class="line">		name:  <span class="string">&quot;bbbbbbb&quot;</span>,</span><br><span class="line">		title: <span class="string">&quot;运维工程师&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(a.GetName())		<span class="comment">// aaaaa  调用User.GetName</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><p>反射是指在运行时动态的访问和修改任意类型对象的结构和成员，在 go 语言中提供 reflect 包提供反射的功能，</p>
<p>每一个变量都有两个属性：类型（Type）和 值（Value）</p>
<h3 id="变量、interface-、reflect-Value-相互转换"><a href="#变量、interface-、reflect-Value-相互转换" class="headerlink" title="变量、interface{}、reflect.Value 相互转换"></a>变量、interface{}、reflect.Value 相互转换</h3><ul>
<li>interface{} -&gt; reflect.Value</li>
<li>reflect.Value -&gt; interface{}</li>
<li>interface{} -&gt; 原来的变量类型</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(b <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    <span class="comment">// interface&#123;&#125; -&gt; reflect.Value</span></span><br><span class="line">	rVal := reflect.ValueOf(b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T: %#v\n&quot;</span>, rVal, rVal)</span><br><span class="line">	<span class="comment">// reflect.Value -&gt; interface&#123;&#125;</span></span><br><span class="line">	iVal := rVal.Interface()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T: %#v\n&quot;</span>, iVal, iVal)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// interface&#123;&#125; -&gt; 原来的变量类型</span></span><br><span class="line">	v := iVal.(T)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T: %#v\n&quot;</span>, v, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Go-Modules"><a href="#Go-Modules" class="headerlink" title="Go Modules"></a>Go Modules</h2><p>Go Modules 的出现就是为了淘汰 GOPATH</p>
<p>设置如下环境变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOPATH=/data/go</span><br><span class="line"><span class="built_in">export</span> GO111MODULE=on</span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.cn,direct</span><br><span class="line"><span class="built_in">export</span> GOPRIVATE=cctv.local</span><br></pre></td></tr></table></figure>

<p>最常用：<code>go mod tidy</code> 查缺补漏</p>
<h2 id="单元测试-amp-性能测试"><a href="#单元测试-amp-性能测试" class="headerlink" title="单元测试 &amp; 性能测试"></a>单元测试 &amp; 性能测试</h2><p>标准库 testing 可以单元测试和性能测试</p>
<h3 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h3><h3 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h3>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160536339.png" alt="像方便面一样的男子 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160019009.png" alt="像方便面一样的男子 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/golang/" rel="tag"><i class="fa fa-tag"></i> golang</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E5%89%8D%E7%AB%AF/React/redux/1.%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="prev" title="Redux">
                  <i class="fa fa-chevron-left"></i> Redux
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Golang/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%85%B3%E9%97%ADchannel/" rel="next" title="如何优雅的关闭channel">
                  如何优雅的关闭channel <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18016600号-3 </a>
  </div>

<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">像方便面一样的男子</span>
</div>

    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="//s1.lujinkai.cn/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="//s1.lujinkai.cn/libs/lozad.js/1.16.0/lozad.min.js"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="//s1.lujinkai.cn/libs/algoliasearch/4.11.0/algoliasearch-lite.umd.min.js"></script>
<script src="//s1.lujinkai.cn/libs/instantsearch.js/4.36.0/instantsearch.production.min.js"></script><script src="/js/third-party/search/algolia-search.js"></script>






  





</body>
</html>
