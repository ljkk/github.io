<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="32x32" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="16x16" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="mask-icon" href="//img.lujinkai.cn/blog/ljk/1607154764582.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//s1.lujinkai.cn/libs/fontawesome-free/5.15.4/css/all.min.css">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.lujinkai.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":10},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"KN3H1V8A6V","apiKey":"c5d73d0dde2dd770ce49b505f938553d","indexName":"hexo","hits":{"per_page":20,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We did not find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}}}}</script><script src="/js/config.js"></script>

    <meta name="description" content="tomcat 日志tomcat 默认的格式比较简单，包含 ip、date、method、url、status code 等信息，例如： 1234567891011121310.0.0.1 - - [06&#x2F;Mar&#x2F;2021:09:26:09 +0800] &quot;GET &#x2F; HTTP&#x2F;1.1&quot; 200 1115610.0.0.1 - - [06&#x2F;Mar&#x2F;2021:09:26:10 +0">
<meta property="og:type" content="article">
<meta property="og:title" content="logstash收集日志案例">
<meta property="og:url" content="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/ELK/logstash%E6%94%B6%E9%9B%86%E6%97%A5%E5%BF%97%E6%A1%88%E4%BE%8B/index.html">
<meta property="og:site_name" content="LJKのBlog">
<meta property="og:description" content="tomcat 日志tomcat 默认的格式比较简单，包含 ip、date、method、url、status code 等信息，例如： 1234567891011121310.0.0.1 - - [06&#x2F;Mar&#x2F;2021:09:26:09 +0800] &quot;GET &#x2F; HTTP&#x2F;1.1&quot; 200 1115610.0.0.1 - - [06&#x2F;Mar&#x2F;2021:09:26:10 +0">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1615022486227.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1615023193996.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1615130970319.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1615135063740.png">
<meta property="article:published_time" content="2021-03-05T02:24:34.000Z">
<meta property="article:modified_time" content="2023-05-29T08:58:05.494Z">
<meta property="article:author" content="像方便面一样的男子">
<meta property="article:tag" content="logstash">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.to2b.cn/blog/ljk/1615022486227.png">


<link rel="canonical" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/ELK/logstash%E6%94%B6%E9%9B%86%E6%97%A5%E5%BF%97%E6%A1%88%E4%BE%8B/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/ELK/logstash%E6%94%B6%E9%9B%86%E6%97%A5%E5%BF%97%E6%A1%88%E4%BE%8B/","path":"运维/ELK/logstash收集日志案例/","title":"logstash收集日志案例"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>logstash收集日志案例 | LJKのBlog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LJKのBlog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学无止境</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#tomcat-%E6%97%A5%E5%BF%97"><span class="nav-number">1.</span> <span class="nav-text">tomcat 日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#java-%E6%97%A5%E5%BF%97"><span class="nav-number">2.</span> <span class="nav-text">java 日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx-%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97"><span class="nav-number">3.</span> <span class="nav-text">nginx 访问日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP-x2F-UDP-%E6%97%A5%E5%BF%97"><span class="nav-number">4.</span> <span class="nav-text">TCP&#x2F;UDP 日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-rsyslog-%E6%94%B6%E9%9B%86-haproxy-%E6%97%A5%E5%BF%97"><span class="nav-number">5.</span> <span class="nav-text">通过 rsyslog 收集 haproxy 日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#filebeat-%E6%94%B6%E9%9B%86%E6%97%A5%E5%BF%97%E5%B9%B6%E5%86%99%E5%85%A5-redis-x2F-kafka"><span class="nav-number">6.</span> <span class="nav-text">filebeat 收集日志并写入 redis&#x2F;kafka</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%E5%AE%9E%E6%88%98"><span class="nav-number">7.</span> <span class="nav-text">日志收集实战</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%9D%90%E6%A0%87%E5%9C%B0%E5%9B%BE%E7%BB%9F%E8%AE%A1%E5%AE%A2%E6%88%B7-IP-%E6%89%80%E5%9C%A8%E5%9F%8E%E5%B8%82"><span class="nav-number">8.</span> <span class="nav-text">通过坐标地图统计客户 IP 所在城市</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">9.</span> <span class="nav-text">日志写入数据库</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="像方便面一样的男子"
      src="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <p class="site-author-name" itemprop="name">像方便面一样的男子</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">340</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">73</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ljkk" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ljkk" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/ELK/logstash%E6%94%B6%E9%9B%86%E6%97%A5%E5%BF%97%E6%A1%88%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="//img.lujinkai.cn/blog/ljk/1607154764582.png">
      <meta itemprop="name" content="像方便面一样的男子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LJKのBlog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="logstash收集日志案例 | LJKのBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          logstash收集日志案例
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-05 10:24:34" itemprop="dateCreated datePublished" datetime="2021-03-05T10:24:34+08:00">2021-03-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-29 16:58:05" itemprop="dateModified" datetime="2023-05-29T16:58:05+08:00">2023-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/ELK/" itemprop="url" rel="index"><span itemprop="name">ELK</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="tomcat-日志"><a href="#tomcat-日志" class="headerlink" title="tomcat 日志"></a>tomcat 日志</h2><p>tomcat 默认的格式比较简单，包含 ip、date、method、url、status code 等信息，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:09 +0800] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 200 11156</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /tomcat.svg HTTP/1.1&quot;</span> 200 67795</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /tomcat.css HTTP/1.1&quot;</span> 200 5542</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /bg-nav.png HTTP/1.1&quot;</span> 200 1401</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /bg-middle.png HTTP/1.1&quot;</span> 200 1918</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /bg-upper.png HTTP/1.1&quot;</span> 200 3103</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /bg-button.png HTTP/1.1&quot;</span> 200 713</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /asf-logo-wide.svg HTTP/1.1&quot;</span> 200 27235</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:10 +0800] <span class="string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 200 21630</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:12 +0800] <span class="string">&quot;GET /manager/status HTTP/1.1&quot;</span> 403 3446</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:14 +0800] <span class="string">&quot;GET /manager/html HTTP/1.1&quot;</span> 403 3446</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:19 +0800] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 200 11156</span><br><span class="line">10.0.0.1 - - [06/Mar/2021:09:26:19 +0800] <span class="string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 200 21630</span><br></pre></td></tr></table></figure>

<ol>
<li><p>为了 kibana 能单独统计每个字段，需要日志记录成 json 格式，当然也可以是其他格式，只要有对应的 codec 插件可以解析就行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@elk2-ljk conf]<span class="variable">$pwd</span></span><br><span class="line">/usr/local/tomcat/conf</span><br><span class="line">[root@elk2-ljk conf]<span class="variable">$vim</span> server.xml		<span class="comment"># 自定义日志格式 为json格式</span></span><br><span class="line">...</span><br><span class="line">        &lt;Valve className=<span class="string">&quot;org.apache.catalina.valves.AccessLogValve&quot;</span> directory=<span class="string">&quot;logs&quot;</span></span><br><span class="line">               prefix=<span class="string">&quot;tomcat_access_log&quot;</span> suffix=<span class="string">&quot;.log&quot;</span></span><br><span class="line">               pattern=<span class="string">&quot;&#123;&amp;quot;clientip&amp;quot;:&amp;quot;%h&amp;quot;,&amp;quot;ClientUser&amp;quot;:&amp;quot;%l&amp;quot;,&amp;quot;authenticated&amp;quot;:&amp;quot;%u&amp;quot;,&amp;quot;AccessTime&amp;quot;: &amp;quot;%t&amp;quot;,&amp;quot;method&amp;quot;:&amp;quot;%r&amp;quot;,&amp;quot;status&amp;quot;:&amp;quot;%s&amp;quot;,&amp;quot;SendBytes&amp;quot;:&amp;quot;%b&amp;quot;,&amp;quot;Query?string&amp;quot;:&amp;quot;%q&amp;quot;,    &amp;quot;partner&amp;quot;:&amp;quot;%&#123;Referer&#125;i&amp;quot;,&amp;quot;AgentVersion&amp;quot;:&amp;quot;%&#123;User-Agent&#125;i&amp;quot;&#125;&quot;</span> /&gt;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># &amp;quot; 表示双引号</span></span><br><span class="line"></span><br><span class="line">[root@elk2-ljk conf]<span class="variable">$systemctl</span> restart tomcat.service	<span class="comment"># 重启tomcat</span></span><br><span class="line"><span class="comment"># 查看日志，已经成功修改为json格式</span></span><br><span class="line">[root@elk2-ljk logs]<span class="variable">$cat</span> ../logs/tomcat_access_log.2021-03-06.<span class="built_in">log</span></span><br><span class="line">&#123;<span class="string">&quot;clientip&quot;</span>:<span class="string">&quot;10.0.0.1&quot;</span>,<span class="string">&quot;ClientUser&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;authenticated&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;AccessTime&quot;</span>:<span class="string">&quot;[06/Mar/2021:12:50:56 +0800]&quot;</span>,<span class="string">&quot;method&quot;</span>:<span class="string">&quot;GET / HTTP/1.1&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;200&quot;</span>,<span class="string">&quot;SendBytes&quot;</span>:       <span class="string">&quot;11156&quot;</span>,<span class="string">&quot;Query?string&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;partner&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;AgentVersion&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36&quot;</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;clientip&quot;</span>:<span class="string">&quot;10.0.0.1&quot;</span>,<span class="string">&quot;ClientUser&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;authenticated&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;AccessTime&quot;</span>:<span class="string">&quot;[06/Mar/2021:12:50:56 +0800]&quot;</span>,<span class="string">&quot;method&quot;</span>:<span class="string">&quot;GET /favicon.ico HTTP/1.1&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;200&quot;</span>,        <span class="string">&quot;SendBytes&quot;</span>:<span class="string">&quot;21630&quot;</span>,<span class="string">&quot;Query?string&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;partner&quot;</span>:<span class="string">&quot;http://10.0.1.122:8080/&quot;</span>,<span class="string">&quot;AgentVersion&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like  Gecko) Chrome/88.0.4324.190 Safari/537.36&quot;</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;clientip&quot;</span>:<span class="string">&quot;10.0.0.1&quot;</span>,<span class="string">&quot;ClientUser&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;authenticated&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;AccessTime&quot;</span>:<span class="string">&quot;[06/Mar/2021:12:51:00 +0800]&quot;</span>,<span class="string">&quot;method&quot;</span>:<span class="string">&quot;GET / HTTP/1.1&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;200&quot;</span>,<span class="string">&quot;SendBytes&quot;</span>:       <span class="string">&quot;11156&quot;</span>,<span class="string">&quot;Query?string&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;partner&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;AgentVersion&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>百度搜索 “tomcat 日志格式” 或 “apache 日志格式”，下面是部分格式说明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">％a - 远程IP地址</span><br><span class="line">％A - 本地IP地址</span><br><span class="line">％b - 发送的字节数，不包括HTTP头，或“ - ”如果没有发送字节</span><br><span class="line">％B - 发送的字节数，不包括HTTP头</span><br><span class="line">％h - 远程主机名</span><br><span class="line">％H - 请求协议</span><br><span class="line">％l (小写的L)- 远程逻辑从identd的用户名（总是返回&#x27; - &#x27;）</span><br><span class="line">％m - 请求方法</span><br><span class="line">％p - 本地端口</span><br><span class="line">％q - 查询字符串（在前面加上一个“？”如果它存在，否则是一个空字符串</span><br><span class="line">％r - 第一行的要求</span><br><span class="line">％s - 响应的HTTP状态代码</span><br><span class="line">％S - 用户会话ID</span><br><span class="line">％t - 日期和时间，在通用日志格式</span><br><span class="line">％u - 远程用户身份验证</span><br><span class="line">％U - 请求的URL路径</span><br><span class="line">％v - 本地服务器名</span><br><span class="line">％D - 处理请求的时间（以毫秒为单位）</span><br><span class="line">％T - 处理请求的时间（以秒为单位）</span><br><span class="line">％I （大写的i） - 当前请求的线程名称</span><br><span class="line"></span><br><span class="line">％&#123;XXX&#125;i xxx代表传入的头(HTTP Request)</span><br><span class="line">％&#123;XXX&#125;o xxx代表传出​​的响应头(Http Resonse)</span><br><span class="line">％&#123;XXX&#125;c  xxx代表特定的Cookie名</span><br><span class="line">％&#123;XXX&#125;r  xxx代表ServletRequest属性名</span><br><span class="line">％&#123;XXX&#125;s xxx代表HttpSession中的属性名</span><br></pre></td></tr></table></figure>
</li>
<li><p>logstash 配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        <span class="built_in">type</span> =&gt; <span class="string">&quot;tomcat-access-log&quot;</span></span><br><span class="line">        path =&gt; <span class="string">&quot;/usr/local/tomcat/logs/tomcat_access_log.*.log&quot;</span></span><br><span class="line">        start_position =&gt; <span class="string">&quot;end&quot;</span></span><br><span class="line">        stat_interval =&gt; 3</span><br><span class="line">        codec =&gt; <span class="string">&quot;json&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">    <span class="keyword">if</span> [<span class="built_in">type</span>] == <span class="string">&quot;tomcat-access-log&quot;</span> &#123;</span><br><span class="line">        elasticsearch &#123;</span><br><span class="line">            hosts =&gt; [<span class="string">&quot;10.0.1.121:9200&quot;</span>]</span><br><span class="line">            index =&gt; <span class="string">&quot;mytest-%&#123;type&#125;-%&#123;+xxxx.ww&#125;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启 logstash，注意要以 root 用户身份启动，否则无法采集数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@elk2-ljk conf.d]<span class="variable">$systemctl</span> restart logstash.service</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="java-日志"><a href="#java-日志" class="headerlink" title="java 日志"></a>java 日志</h2><p>基于 java 开发的应用，都会有 java 日志，java 日志会记录 java 的报错信息，但是一个报错会产生多行日志，例如：</p>
<p><img data-src="//img.to2b.cn/blog/ljk/1615022486227.png"></p>
<p>为了方便观察，需要将一个报错的多行日志合并为一行，以 elasticsearch 为例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        <span class="built_in">type</span> =&gt; <span class="string">&quot;elasticsearch-java-log&quot;</span></span><br><span class="line">        path =&gt; <span class="string">&quot;/data/elasticsearch/logs/es-cluster.log&quot;</span></span><br><span class="line">        start_position =&gt; <span class="string">&quot;beginning&quot;</span></span><br><span class="line">        stat_interval =&gt; 3</span><br><span class="line">        codec =&gt; multiline &#123;</span><br><span class="line">            pattern =&gt; <span class="string">&quot;^\[&quot;</span></span><br><span class="line">            negate =&gt; <span class="literal">true</span></span><br><span class="line">            what =&gt; <span class="string">&quot;previous&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        hosts =&gt; [<span class="string">&quot;10.0.1.121:9200&quot;</span>]</span><br><span class="line">        index =&gt; <span class="string">&quot;mytest-%&#123;type&#125;-%&#123;+yyyy.MM&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查看 kibana：</p>
<p><img data-src="//img.to2b.cn/blog/ljk/1615023193996.png"></p>
<h2 id="nginx-访问日志"><a href="#nginx-访问日志" class="headerlink" title="nginx 访问日志"></a>nginx 访问日志</h2><p>和采集 tomcat 日志类似，重点是把 nginx 日志修改为 json 格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意：log_format要写在server外面</span></span><br><span class="line">[root@47105171233 vhost]<span class="variable">$cat</span> lujinkai.cn.conf</span><br><span class="line">log_format access_json <span class="string">&#x27;&#123;&quot;@timestamp&quot;:&quot;$time_iso8601&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;host&quot;:&quot;$server_addr&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;clientip&quot;:&quot;$remote_addr&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;size&quot;:$body_bytes_sent,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;responsetime&quot;:$request_time,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;upstreamtime&quot;:&quot;$upstream_response_time&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;upstreamhost&quot;:&quot;$upstream_addr&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;http_host&quot;:&quot;$host&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;url&quot;:&quot;$uri&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;domain&quot;:&quot;$host&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;xff&quot;:&quot;$http_x_forwarded_for&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;referer&quot;:&quot;$http_referer&quot;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;status&quot;:&quot;$status&quot;&#125;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name lujinkai.cn;</span><br><span class="line">  access_log /data/wwwlogs/lujinkai.cn_nginx.log access_json;</span><br><span class="line">  rewrite / http://blog.lujinkai.cn permanent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志成功转为json格式</span></span><br><span class="line">[root@47105171233 wwwlogs]<span class="variable">$tail</span> -f lujinkai.cn_nginx.log</span><br><span class="line">&#123;<span class="string">&quot;@timestamp&quot;</span>:<span class="string">&quot;2021-03-06T18:20:13+08:00&quot;</span>,<span class="string">&quot;host&quot;</span>:<span class="string">&quot;10.0.0.1&quot;</span>,<span class="string">&quot;clientip&quot;</span>:<span class="string">&quot;113.120.245.191&quot;</span>,<span class="string">&quot;size&quot;</span>:162,<span class="string">&quot;responsetime&quot;</span>:0.000,<span class="string">&quot;upstreamtime&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;upstreamhost&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;http_host&quot;</span>:<span class="string">&quot;lujinkai.cn&quot;</span>,<span class="string">&quot;url&quot;</span>:<span class="string">&quot;/&quot;</span>,<span class="string">&quot;domain&quot;</span>:<span class="string">&quot;lujinkai.cn&quot;</span>,<span class="string">&quot;xff&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;referer&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;301&quot;</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;@timestamp&quot;</span>:<span class="string">&quot;2021-03-06T18:20:13+08:00&quot;</span>,<span class="string">&quot;host&quot;</span>:<span class="string">&quot;10.0.0.1&quot;</span>,<span class="string">&quot;clientip&quot;</span>:<span class="string">&quot;113.120.245.191&quot;</span>,<span class="string">&quot;size&quot;</span>:162,<span class="string">&quot;responsetime&quot;</span>:0.000,<span class="string">&quot;upstreamtime&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;upstreamhost&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;http_host&quot;</span>:<span class="string">&quot;lujinkai.cn&quot;</span>,<span class="string">&quot;url&quot;</span>:<span class="string">&quot;/robots.txt&quot;</span>,<span class="string">&quot;domain&quot;</span>:<span class="string">&quot;lujinkai.cn&quot;</span>,<span class="string">&quot;xff&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;referer&quot;</span>:<span class="string">&quot;-&quot;</span>,<span class="string">&quot;status&quot;</span>:<span class="string">&quot;301&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="TCP-x2F-UDP-日志"><a href="#TCP-x2F-UDP-日志" class="headerlink" title="TCP&#x2F;UDP 日志"></a>TCP&#x2F;UDP 日志</h2><p>场景：没有安装 logstash 的服务器（A），向安装了 logstash 的服务器（B）发送日志信息，这个场景不多</p>
<p>实现：A 通过 nc 命令给 B 发送日志信息，B 监听本地的对应端口，接收数据</p>
<p>A：客户端</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@elk2-ljk ~]<span class="variable">$nc</span> 10.0.1.121 9889</span><br></pre></td></tr></table></figure>

<p>B：服务端</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    tcp &#123;</span><br><span class="line">        port =&gt; 9889</span><br><span class="line">        <span class="built_in">type</span> =&gt; <span class="string">&quot;tcplog&quot;</span></span><br><span class="line">        mode =&gt; <span class="string">&quot;server&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">    stdout &#123;</span><br><span class="line">    	codec =&gt; rubydebug</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="通过-rsyslog-收集-haproxy-日志"><a href="#通过-rsyslog-收集-haproxy-日志" class="headerlink" title="通过 rsyslog 收集 haproxy 日志"></a>通过 rsyslog 收集 haproxy 日志</h2><p>有些设备无法安装 logstash，例如 路由器、交换机，但是厂家内置了 rsyslog 功能，这里以 haproxy 为例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. haproxy.cfg 定义haproxy的日志设备为local6</span></span><br><span class="line"><span class="built_in">log</span> 127.0.0.1 local6 info</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. rsyslog.conf</span></span><br><span class="line">module(load=<span class="string">&quot;imudp&quot;</span>)</span><br><span class="line">input(<span class="built_in">type</span>=<span class="string">&quot;imudp&quot;</span> port=<span class="string">&quot;514&quot;</span>)</span><br><span class="line">module(load=<span class="string">&quot;imtcp&quot;</span>)</span><br><span class="line">input(<span class="built_in">type</span>=<span class="string">&quot;imtcp&quot;</span> port=<span class="string">&quot;514&quot;</span>)</span><br><span class="line">local6.* @@10.0.1.122</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 10.0.1.122主机监听本机的udp514端口，接收日志数据</span></span><br><span class="line">input&#123;</span><br><span class="line">    syslog &#123;</span><br><span class="line">    	<span class="built_in">type</span> =&gt; <span class="string">&quot;ststem-rsyslog&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">output&#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        hosts =&gt; [<span class="string">&quot;10.0.1.123:9200&quot;</span>]</span><br><span class="line">        index =&gt; <span class="string">&quot;logstash-rsyslog-%&#123;+YYYY.MM.dd&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="filebeat-收集日志并写入-redis-x2F-kafka"><a href="#filebeat-收集日志并写入-redis-x2F-kafka" class="headerlink" title="filebeat 收集日志并写入 redis&#x2F;kafka"></a>filebeat 收集日志并写入 redis&#x2F;kafka</h2><p>考虑到 elasticsearch 的性能问题，通常不会直接往 elasticsearch 写日志，会加 redis 或 kafka 缓冲一下</p>
<p><img data-src="//img.to2b.cn/blog/ljk/1615130970319.png"></p>
<ul>
<li>有少数场景，需要收集多个不同格式的日志，例如有的是 syslog 格式，有的是 json 格式，所有的日志都 output 到 redis 的一个 list 中，因为 logstash 的 input 没有条件判断，只能配置一个 codec，所以 logstash 可以将不同的日志发送到 elasticsearch 的不同 index，却无法对不同的日志格式配置不同的 codec，这样的数据最后展示在 kibana 也没有意义，解决方法是在日志收集和日志缓存中间在加一个 logstash（可以共用日志提取及过滤的 logstash），将不同的日志转发到 redis 的不同 list</li>
<li>日志缓存如果用 redis，需要大内存，推荐 32G；如果用 kafka，16G 就够，因为 kafka 存储数据到磁盘</li>
</ul>
<h2 id="日志收集实战"><a href="#日志收集实战" class="headerlink" title="日志收集实战"></a>日志收集实战</h2><p><img data-src="//img.to2b.cn/blog/ljk/1615135063740.png"></p>
<p>从左向右看，当要访问 ELK 日志统计平台的时候，首先访问的是两台 nginx+keepalived 做的负载高可用，访问的地址是 keepalived 的 IP，当一台 nginx 代理服务器挂掉之后也不影响访问，然后 nginx 将请求转发到 kibana，kibana 再去 elasticsearch 获取数据，elasticsearch 是两台做的集群，数据会随机保存在任意一台 elasticsearch 服务器，redis 服务器做数据的临时保存，避免 web 服务器日志量过大的时候造成的数据收集与保存不一致导致的日志丢失，可以临时保存到 redis，redis 可以是集群，然后再由 logstash 服务器在非高峰时期从 redis 持续的取出即可，另外有一台 mysql 数据库服务器，用于持久化保存特定的数据，web 服务器的日志由 filebeat 收集之后发送给另外的一台 logstash，再有其写入到 redis 即可完成日志的收集，从图中可以看出，redis 服务器处于前端结合的最中间，其左右都要依赖于 redis 的正常运行，web 服务删个日志经过 filebeat 收集之后通过日志转发层的 logstash 写入到 redis 不同的 key 当中，然后提取层 logstash 再从 redis 将数据提取并安按照不同的类型写入到 elasticsearch 的不同 index 当中，用户最终通过 nginx 代理的 kibana 查看到收集到的日志的具体内容</p>
<h2 id="通过坐标地图统计客户-IP-所在城市"><a href="#通过坐标地图统计客户-IP-所在城市" class="headerlink" title="通过坐标地图统计客户 IP 所在城市"></a>通过坐标地图统计客户 IP 所在城市</h2><p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-geoip.html">https://www.elastic.co/guide/en/logstash/current/plugins-filters-geoip.html</a></p>
<h2 id="日志写入数据库"><a href="#日志写入数据库" class="headerlink" title="日志写入数据库"></a>日志写入数据库</h2><p>写入数据库的目的是用于持久化保存重要数据，比如状态码、客户端 IP、客户端浏览器版本等等，用于后期按月做数据统计等</p>
<p>写个脚本从，定期从 elasticsearch 中获取数据，写入到 PostgreSQL</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160536339.png" alt="像方便面一样的男子 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160019009.png" alt="像方便面一样的男子 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/logstash/" rel="tag"><i class="fa fa-tag"></i> logstash</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/MySQL/MGR/" rel="prev" title="MGR">
                  <i class="fa fa-chevron-left"></i> MGR
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/Kubernetes/%E5%9F%BA%E7%A1%80/" rel="next" title="基础">
                  基础 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18016600号-3 </a>
  </div>

<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">像方便面一样的男子</span>
</div>

    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="//s1.lujinkai.cn/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="//s1.lujinkai.cn/libs/lozad.js/1.16.0/lozad.min.js"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="//s1.lujinkai.cn/libs/algoliasearch/4.11.0/algoliasearch-lite.umd.min.js"></script>
<script src="//s1.lujinkai.cn/libs/instantsearch.js/4.36.0/instantsearch.production.min.js"></script><script src="/js/third-party/search/algolia-search.js"></script>






  





</body>
</html>
