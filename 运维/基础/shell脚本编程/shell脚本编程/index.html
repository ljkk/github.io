<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="32x32" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="16x16" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="mask-icon" href="//img.lujinkai.cn/blog/ljk/1607154764582.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//s1.lujinkai.cn/libs/fontawesome-free/5.15.4/css/all.min.css">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.lujinkai.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":10},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"KN3H1V8A6V","apiKey":"c5d73d0dde2dd770ce49b505f938553d","indexName":"hexo","hits":{"per_page":20,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We did not find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}}}}</script><script src="/js/config.js"></script>

    <meta name="description" content="基本用法脚本调试脚本错误分为三种：  语法错误，导致后续命令不继续执行，使用 bash -n 检查错误 命令错误，默认后续命令继续执行，使用 bash -x 检查错误 逻辑错误，只能使用 bash -x 检查  变量shell 脚本中的所有变量值都是字符串，其中的数字也是字符串 shell 中变量命名规则123- 只能使用数字、字母及下划线，且不能以数字开头- 区分大小写- 变量、等号、值中间不能">
<meta property="og:type" content="article">
<meta property="og:title" content="shell脚本编程">
<meta property="og:url" content="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/index.html">
<meta property="og:site_name" content="LJKのBlog">
<meta property="og:description" content="基本用法脚本调试脚本错误分为三种：  语法错误，导致后续命令不继续执行，使用 bash -n 检查错误 命令错误，默认后续命令继续执行，使用 bash -x 检查错误 逻辑错误，只能使用 bash -x 检查  变量shell 脚本中的所有变量值都是字符串，其中的数字也是字符串 shell 中变量命名规则123- 只能使用数字、字母及下划线，且不能以数字开头- 区分大小写- 变量、等号、值中间不能">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1596809556035.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1599050885616.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1599052693808.png">
<meta property="article:published_time" content="2020-12-09T14:23:41.000Z">
<meta property="article:modified_time" content="2023-05-29T08:58:05.506Z">
<meta property="article:author" content="像方便面一样的男子">
<meta property="article:tag" content="shell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.to2b.cn/blog/ljk/1596809556035.png">


<link rel="canonical" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/","path":"运维/基础/shell脚本编程/shell脚本编程/","title":"shell脚本编程"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>shell脚本编程 | LJKのBlog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LJKのBlog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学无止境</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-number">1.</span> <span class="nav-text">基本用法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E8%B0%83%E8%AF%95"><span class="nav-number">1.1.</span> <span class="nav-text">脚本调试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#shell-%E4%B8%AD%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="nav-number">1.2.1.</span> <span class="nav-text">shell 中变量命名规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.2.</span> <span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E7%94%A8%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.3.</span> <span class="nav-text">引用变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.4.</span> <span class="nav-text">删除变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#declare-%E2%98%85%E2%98%85%E2%98%85"><span class="nav-number">1.2.5.</span> <span class="nav-text">declare ★★★</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#eval-%E2%98%85%E2%98%85%E2%98%85"><span class="nav-number">1.2.6.</span> <span class="nav-text">eval ★★★</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0"><span class="nav-number">1.2.7.</span> <span class="nav-text">练习</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.8.</span> <span class="nav-text">环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%8D%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.9.</span> <span class="nav-text">位置变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81"><span class="nav-number">1.2.10.</span> <span class="nav-text">退出状态码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%80%98%E2%80%99-%E2%80%9C%E2%80%9D"><span class="nav-number">1.2.11.</span> <span class="nav-text">‘’ “” &#96;&#96; $()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E5%AE%89%E5%85%A8%E5%92%8C-set"><span class="nav-number">1.2.12.</span> <span class="nav-text">脚本安全和 set</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA-printf"><span class="nav-number">1.3.</span> <span class="nav-text">格式化输出 printf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97"><span class="nav-number">1.4.</span> <span class="nav-text">算术运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97-amp-amp-%E3%80%81-%E3%80%81%EF%BC%81"><span class="nav-number">1.5.</span> <span class="nav-text">逻辑运算 &amp;&amp;、||、！</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-read-%E5%91%BD%E4%BB%A4%E6%9D%A5%E6%8E%A5%E5%8F%97%E8%BE%93%E5%85%A5"><span class="nav-number">1.6.</span> <span class="nav-text">使用 read 命令来接受输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%91%BD%E4%BB%A4"><span class="nav-number">1.7.</span> <span class="nav-text">条件测试命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bash-shell-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">bash shell 的配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%95%88%E8%8C%83%E5%9B%B4"><span class="nav-number">2.1.</span> <span class="nav-text">生效范围</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%96%B9%E5%BC%8F"><span class="nav-number">2.2.</span> <span class="nav-text">登录方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%A4%E4%BA%92%E5%BC%8F"><span class="nav-number">2.2.1.</span> <span class="nav-text">交互式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E4%BA%A4%E4%BA%92%E5%BC%8F"><span class="nav-number">2.2.2.</span> <span class="nav-text">非交互式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bash-%E9%80%80%E5%87%BA%E4%BB%BB%E5%8A%A1"><span class="nav-number">2.3.</span> <span class="nav-text">bash 退出任务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-%E6%9D%A1%E4%BB%B6%E9%80%89%E6%8B%A9"><span class="nav-number">3.</span> <span class="nav-text">流程控制 - 条件选择</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if"><span class="nav-number">3.1.</span> <span class="nav-text">if</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case"><span class="nav-number">3.2.</span> <span class="nav-text">case</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-%E5%BE%AA%E7%8E%AF"><span class="nav-number">4.</span> <span class="nav-text">流程控制 - 循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#for-in"><span class="nav-number">4.1.</span> <span class="nav-text">for in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while"><span class="nav-number">4.2.</span> <span class="nav-text">while</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#while-read"><span class="nav-number">4.2.1.</span> <span class="nav-text">while read</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#until"><span class="nav-number">4.3.</span> <span class="nav-text">until</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6-continue-%E5%92%8C-break"><span class="nav-number">4.4.</span> <span class="nav-text">循环控制 continue 和 break</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6-shift"><span class="nav-number">4.5.</span> <span class="nav-text">循环控制 shift</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#select"><span class="nav-number">4.6.</span> <span class="nav-text">select</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">5.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-number">5.1.</span> <span class="nav-text">定义函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-number">5.2.</span> <span class="nav-text">调用函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%87%BD%E6%95%B0"><span class="nav-number">5.3.</span> <span class="nav-text">删除函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">5.4.</span> <span class="nav-text">函数返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%8F%98%E9%87%8F"><span class="nav-number">5.5.</span> <span class="nav-text">函数变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7"><span class="nav-number">6.</span> <span class="nav-text">脚本相关工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#trap"><span class="nav-number">6.1.</span> <span class="nav-text">trap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mktemp"><span class="nav-number">6.2.</span> <span class="nav-text">mktemp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#expect"><span class="nav-number">6.3.</span> <span class="nav-text">expect</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">7.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89"><span class="nav-number">7.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8"><span class="nav-number">7.2.</span> <span class="nav-text">调用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">8.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E7%89%87"><span class="nav-number">8.1.</span> <span class="nav-text">切片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2"><span class="nav-number">8.2.</span> <span class="nav-text">查找替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2"><span class="nav-number">8.3.</span> <span class="nav-text">大小写转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E6%B5%8B%E8%AF%95"><span class="nav-number">8.4.</span> <span class="nav-text">变量测试</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="像方便面一样的男子"
      src="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <p class="site-author-name" itemprop="name">像方便面一样的男子</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">340</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">73</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ljkk" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ljkk" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="//img.lujinkai.cn/blog/ljk/1607154764582.png">
      <meta itemprop="name" content="像方便面一样的男子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LJKのBlog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="shell脚本编程 | LJKのBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          shell脚本编程
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-09 22:23:41" itemprop="dateCreated datePublished" datetime="2020-12-09T22:23:41+08:00">2020-12-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-29 16:58:05" itemprop="dateModified" datetime="2023-05-29T16:58:05+08:00">2023-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">基础</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">shell脚本编程</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><h3 id="脚本调试"><a href="#脚本调试" class="headerlink" title="脚本调试"></a>脚本调试</h3><p>脚本错误分为三种：</p>
<ul>
<li>语法错误，导致后续命令不继续执行，使用 <code>bash -n</code> 检查错误</li>
<li>命令错误，默认后续命令继续执行，使用 <code>bash -x</code> 检查错误</li>
<li>逻辑错误，只能使用 <code>bash -x</code> 检查</li>
</ul>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>shell 脚本中的所有变量值都是字符串，其中的数字也是字符串</p>
<h4 id="shell-中变量命名规则"><a href="#shell-中变量命名规则" class="headerlink" title="shell 中变量命名规则"></a>shell 中变量命名规则</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 只能使用数字、字母及下划线，且不能以数字开头</span><br><span class="line">- 区分大小写</span><br><span class="line">- 变量、等号、值中间不能出现任何空格</span><br></pre></td></tr></table></figure>

<p>注意： 不支持短横线 “-”，这点和主机名相反</p>
<h4 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="string">&#x27;value&#x27;</span></span><br><span class="line"></span><br><span class="line">name=<span class="string">&#x27;root&#x27;</span>  <span class="comment"># 直接字符串赋值</span></span><br><span class="line">name=<span class="string">&quot;<span class="variable">$user</span>&quot;</span>    <span class="comment"># 变量引用，注意一定要用双引号</span></span><br><span class="line">name=`COMMAND`  或者 name=$(COMMAND)  <span class="comment"># 命令引用</span></span><br></pre></td></tr></table></figure>

<h4 id="引用变量"><a href="#引用变量" class="headerlink" title="引用变量"></a>引用变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$name</span></span><br><span class="line"><span class="variable">$&#123;name&#125;</span></span><br></pre></td></tr></table></figure>

<p>关于$：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- js中变量名前不加$，只有在上引号包裹的字符串中才使用$&#123;&#125;引用变量</span><br><span class="line">- php变量名前加$，无论什么情况，$和变量名不可分离</span><br><span class="line">- shell变量名前不加$，只有在引用的时候加$，在容易起因歧义的时候，使用$&#123;&#125;引用变量</span><br></pre></td></tr></table></figure>

<p>拼接字符串：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- php使用点 .</span><br><span class="line">- js使用加号 +</span><br><span class="line">- shell中什么也不需要，直接写在一起就可以了，也可以用+=拼接自身</span><br></pre></td></tr></table></figure>

<h4 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> name</span><br></pre></td></tr></table></figure>

<h4 id="declare-★★★"><a href="#declare-★★★" class="headerlink" title="declare ★★★"></a>declare ★★★</h4><p>declare 是 bash 内置命令，用来声明变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> [-aAfFgilnrtux] [-p] [name[=value] ...]</span><br><span class="line"></span><br><span class="line">f    <span class="comment"># 显示已定义的函数</span></span><br><span class="line">F    <span class="comment"># 显示已定义的函数名</span></span><br><span class="line">g    <span class="comment"># 声明一个全局变量，name=&quot;value&quot; 这种方式就是省略参数g，完整的写法是declare -g name=&quot;value&quot;，所以在函数中请使用 declare name=&quot;value&quot;，不要使用 name=&quot;value&quot;，除非你想声明一个全局变量</span></span><br><span class="line">-p   <span class="comment"># 显示所有变量及其属性和值，不包括函数</span></span><br><span class="line"></span><br><span class="line">为变量设置属性，如果没有声明变量，则显示设置此属性的变量：</span><br><span class="line">a    <span class="comment"># 声明索引数组</span></span><br><span class="line">A    <span class="comment"># 声明关联数组</span></span><br><span class="line">i    <span class="comment"># 声明整数，可以进行算数运算</span></span><br><span class="line">l    <span class="comment"># 声明变量为小写字母</span></span><br><span class="line">n    <span class="comment"># 为value设置引用属性</span></span><br><span class="line">r    <span class="comment"># 声明只读变量，相当于 readonly，当前进程内，只能定义，不能修改，不能删除</span></span><br><span class="line">t    <span class="comment"># 为变量设置trace属性，跟踪函数从调用shell继承DEBUG和RETURN类型的。trace属性对变量没有特殊意义</span></span><br><span class="line">u    <span class="comment"># 声明变量为大写字母</span></span><br><span class="line">x    <span class="comment"># 声明环境变量，相当于 export</span></span><br></pre></td></tr></table></figure>

<p>Shell 内建命令之 trap：<a target="_blank" rel="noopener" href="https://blog.csdn.net/asty9000/article/details/88393166">https://blog.csdn.net/asty9000/article/details/88393166</a></p>
<ul>
<li><p>i 示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> var=算术表达式</span><br><span class="line">((var=算术表达式))</span><br><span class="line">var=$[算术表达式]</span><br><span class="line">var=$((算术表达式))</span><br><span class="line"><span class="built_in">declare</span> -i var=算术表达式</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;算术表达式&#x27;</span> | bc</span><br></pre></td></tr></table></figure>
</li>
<li><p>n 示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> a=123</span><br><span class="line"><span class="built_in">declare</span> -n b=a  <span class="comment"># b=123		等同于 declare b=$a</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="eval-★★★"><a href="#eval-★★★" class="headerlink" title="eval ★★★"></a>eval ★★★</h4><p>先扫描一遍，进行置换，再执行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 范例一</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> &#123;a..z&#125;</span><br><span class="line">a b c d e f g h i j k l m n o p q r s t u v w x y z</span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> &#123;a..z&#125; | <span class="built_in">tr</span> -d <span class="string">&#x27; &#x27;</span></span><br><span class="line">abcdefghijklmnopqrstuvwxyz</span><br><span class="line">lujinkai@Z510:~$ words=<span class="string">&quot;echo &#123;a..z&#125; | tr -d &#x27; &#x27;&quot;</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$words</span></span><br><span class="line"><span class="built_in">echo</span> &#123;a..z&#125; | <span class="built_in">tr</span> -d <span class="string">&#x27; &#x27;</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> `<span class="built_in">echo</span> <span class="variable">$words</span>`</span><br><span class="line"><span class="built_in">echo</span> &#123;a..z&#125; | <span class="built_in">tr</span> -d <span class="string">&#x27; &#x27;</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">eval</span> <span class="variable">$words</span></span><br><span class="line">abcdefghijklmnopqrstuvwxyz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 范例二</span></span><br><span class="line">[root@centos8 ~]<span class="comment"># CMD=whoami</span></span><br><span class="line">[root@centos8 ~]<span class="comment"># echo</span></span><br><span class="line"><span class="variable">$CMD</span></span><br><span class="line"><span class="built_in">whoami</span></span><br><span class="line">[root@centos8 ~]<span class="comment"># eval $CMD</span></span><br><span class="line">root</span><br><span class="line"></span><br><span class="line"><span class="comment"># 范例三</span></span><br><span class="line">[root@centos8 ~]<span class="comment"># n=10</span></span><br><span class="line">[root@centos8 ~]<span class="comment"># echo &#123;0..$n&#125;</span></span><br><span class="line">&#123;0..10&#125;</span><br><span class="line">[root@centos8 ~]<span class="comment"># eval echo &#123;0..$n&#125;</span></span><br><span class="line">0 1 2 3 4 5 6 7 8 9 10</span><br></pre></td></tr></table></figure>

<h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><p>1、编写脚本 systeminfo.sh,显示当前主机系统信息,包括:主机名,IPv4 地址,操作系统版本,内核版本,CPU 型号,内存大小,硬盘大小</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">主机名：hostname</span><br><span class="line">ipv4地址：hostname -I</span><br><span class="line">操作系统版本：os-release NAME VERSION</span><br><span class="line">内核版本：echo `uname -s;uname -r`</span><br><span class="line">内存大小：`free -m | awk &#x27;/Mem:/&#123;print $2&#125;&#x27;`</span><br><span class="line">硬盘大小：lsblk -m | awk &#x27;/sda/&#123;print $2&#125;&#x27;| head -n1</span><br></pre></td></tr></table></figure>

<p>2、编写脚本 backup.sh,可实现每日将 &#x2F;etc&#x2F; 目录备份到 &#x2F;backup&#x2F;etcYYYY-mm-dd 中</p>
<p>3、编写脚本 disk.sh,显示当前硬盘分区中空间利用率最大的值</p>
<p>4、编写脚本 links.sh,显示正连接本主机的每个远程主机的 IPv4 地址和连接数,并按连接数从大到小排序</p>
<h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><p>对所有用户生效的环境变量：<code>/etc/profile</code><br>对特定用户生效的环境变量：<code>~/.bashrc</code> 或者 <code>~/.bash_profile</code><br>临时有效的环境变量：脚本或命令行使用 export 定义</p>
<p>常用环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH、HOME、LOGNAME、PWD、HISTFILE、HISTSIZE、HOSTNAME、SHELL、PS1、TMOUT、IFS、OFS</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明环境变量，除了使用 declare -x 还可以使用export</span></span><br><span class="line"><span class="built_in">export</span> name=VALUE</span><br></pre></td></tr></table></figure>

<p>显示所有环境变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span></span><br><span class="line"><span class="built_in">printenv</span></span><br><span class="line"><span class="built_in">export</span></span><br><span class="line"><span class="built_in">declare</span> -x</span><br></pre></td></tr></table></figure>

<h4 id="位置变量"><a href="#位置变量" class="headerlink" title="位置变量"></a>位置变量</h4><p>位置变量，在 bash shell 中内置的变量，在脚本代码中调用通过命令行传递给脚本的参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1,2...   对应第一个，第二个等参数，当参数小于10个的时候，<span class="variable">$n</span>可以表示，当参数大于10个的时候，使用<span class="variable">$&#123;n&#125;</span>表示</span><br><span class="line">0        命令本身，包括路径在内</span><br><span class="line">*        传递给脚本所有的参数，全部参数合为一个字符串，每个参数区别对待</span><br><span class="line">@        传递给脚本的所有参数，每个参数为独立字符串，所有参数视为一个整体</span><br><span class="line"><span class="comment">#        传递给脚本的参数个数</span></span><br></pre></td></tr></table></figure>

<p>注意：<code>$@</code> 和 <code>$*</code> 只有在被双引号包起来的时候才会有差异，在 <code>for in</code> 循环中，不加引号的时候，<code>$*</code> 和 <code>$@</code> 都可以正常遍历，加双引号的时候，<code>$*</code> 只有一个字符串变量</p>
<p>清空所有位置变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> --</span><br></pre></td></tr></table></figure>

<p>范例：利用软链接实现同一个脚本不同功能</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="退出状态码"><a href="#退出状态码" class="headerlink" title="退出状态码"></a>退出状态码</h4><p>用于无条件终止当前脚本的执行 <code>exit n</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">n == 0         <span class="comment">#脚本执行成功</span></span><br><span class="line">n == 1-125     <span class="comment">#出错，这些对应的错误值由用户在脚本中定义</span></span><br><span class="line">  n == 1        <span class="comment">#一般未知错误</span></span><br><span class="line">  n == 2        <span class="comment">#不合适的shell命令</span></span><br><span class="line">n == 126       <span class="comment">#文件不可执行</span></span><br><span class="line">n == 127       <span class="comment">#不存在该命令</span></span><br><span class="line">n == 128       <span class="comment">#无效的退出参数</span></span><br><span class="line">n == 128+x     <span class="comment">#与linux信号x相关的严重错误</span></span><br><span class="line">n == 130       <span class="comment">#通过ctrl+c终止的命令</span></span><br><span class="line">n &gt;  255       <span class="comment">#正常范围之外的退出状态码</span></span><br></pre></td></tr></table></figure>

<p>1-125 这些错误值可以由用户自定义<br>如果不给定 n 的值，而直接使用 exit，那么返回 exit 之前最后一条语句的状态，等于 <code>exit $?</code></p>
<h4 id="‘’-“”"><a href="#‘’-“”" class="headerlink" title="‘’ “” `` $()"></a>‘’ “” `` $()</h4><p>单引号不解析变量，双引号解析变量，反引号中必须是有输出的命令，$() 和 ``是等价的, 但是 $() 可以嵌套</p>
<h4 id="脚本安全和-set"><a href="#脚本安全和-set" class="headerlink" title="脚本安全和 set"></a>脚本安全和 set</h4><p>set 命令：可以用来定制 shell 环境，set + 关闭设置，set - 打开设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">echo</span> $-</span><br><span class="line">himBHs</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">h <span class="comment">#hashall，外部命令使用过一次后就会被hash下来，后面再使用这个命令就优先从hash中获取，通过`set +h`将h选项关闭</span></span><br><span class="line">i <span class="comment">#interactive-comments，说明当前shell是交互式shell，在脚本中，i选项是被关闭的</span></span><br><span class="line">m <span class="comment">#monitor，打开监控</span></span><br><span class="line">B <span class="comment">#braceexpand，大括号扩展</span></span><br><span class="line">H <span class="comment">#history，H选项打开，可以展开历史列表中的命令，可以通过!来完成，例如!!返回上一个历史命令，!n返回第n个历史命令</span></span><br></pre></td></tr></table></figure>

<p><strong>set 命令实现脚本安全：</strong></p>
<p>参考：<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2017/11/bash-set.html?utm_source=tool.lu">http://www.ruanyifeng.com/blog/2017/11/bash-set.html?utm_source=tool.lu</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-u 变量未定义就报错， 等同 `<span class="built_in">set</span> -o nounset`</span><br><span class="line">-e 遇到错误（<span class="built_in">exit</span>不等于0）就退出，等同 `<span class="built_in">set</span> -o errexit`</span><br><span class="line">-o option 显示，打开或关闭选项</span><br><span class="line">  显示选项 `<span class="built_in">set</span> -o`</span><br><span class="line">  打开选项 `<span class="built_in">set</span> -o 选项`</span><br><span class="line">  关闭选项 `<span class="built_in">set</span> -o 选项`</span><br><span class="line">-x 当执行命令的时候，打印命令及其参数，类似 `bash -x`</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">set</span> -o</span><br><span class="line">allexport       off</span><br><span class="line">braceexpand     on</span><br><span class="line">emacs           on</span><br><span class="line">errexit         off</span><br><span class="line">errtrace        off</span><br><span class="line">functrace       off</span><br><span class="line">hashall         on</span><br><span class="line">histexpand      on</span><br><span class="line"><span class="built_in">history</span>         on</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="格式化输出-printf"><a href="#格式化输出-printf" class="headerlink" title="格式化输出 printf"></a>格式化输出 printf</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span> <span class="string">&quot;指定的格式&quot;</span> <span class="string">&quot;文本1&quot;</span> <span class="string">&quot;文本2&quot;</span>...</span><br></pre></td></tr></table></figure>

<p><img data-src="//img.to2b.cn/blog/ljk/1596809556035.png"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">%s       <span class="comment">#字符串</span></span><br><span class="line">%f       <span class="comment">#浮点数</span></span><br><span class="line">%b       <span class="comment">#解析转义符</span></span><br><span class="line">%c       <span class="comment">#ASCI字符串，即显示对应参数的第一个字符</span></span><br><span class="line">%d,%i    <span class="comment">#十进制整数</span></span><br><span class="line">%o       <span class="comment">#八进制值</span></span><br><span class="line">%u       <span class="comment">#不带正负号的十进制值</span></span><br><span class="line">%x       <span class="comment">#十六进制值（a-f）</span></span><br><span class="line">%X       <span class="comment">#十六进制值（A-Z)</span></span><br><span class="line">%%       <span class="comment">#表示%本身</span></span><br><span class="line">%n       <span class="comment">#指定输出宽度为n，不足补空格，默认右对齐，例如：%-10s 表示10个字符宽，- 表示左对齐</span></span><br></pre></td></tr></table></figure>

<p>常用转义字符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">\a    <span class="comment">#警告字符</span></span><br><span class="line">\b    <span class="comment">#后退</span></span><br><span class="line">\f    <span class="comment">#换页</span></span><br><span class="line">\n    <span class="comment">#换行</span></span><br><span class="line">\r    <span class="comment">#回车</span></span><br><span class="line">\t    <span class="comment">#水平制表符，就是tab键</span></span><br><span class="line">\v    <span class="comment">#水平制表符</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">printf</span> <span class="string">&quot;%.2f\n&quot;</span> 1 2 3</span><br><span class="line">1.00</span><br><span class="line">2.00</span><br><span class="line">3.00</span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">printf</span> <span class="string">&quot;hello: %s\n&quot;</span> daming xiaohong tom</span><br><span class="line">hello: daming</span><br><span class="line">hello: xiaohong</span><br><span class="line">hello: tom</span><br></pre></td></tr></table></figure>

<h3 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h3><p>bash 只支持整数运算，不支持小数运算。复杂的运算请使用 bc</p>
<p>加减乘除、自加自减，取余，异或取反，三元运算等都和 php 一样。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> var=算术表达式</span><br><span class="line">((var=算术表达式))</span><br><span class="line">var=$[算术表达式]</span><br><span class="line">var=$((算术表达式))</span><br><span class="line"><span class="built_in">declare</span> -i var=算术表达式</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;算术表达式&#x27;</span> | bc</span><br></pre></td></tr></table></figure>

<p>$RANDOM：内建的随机数生成器变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$RANDOM</span> 取值范围: 0-32767 (2^15=32768)</span><br></pre></td></tr></table></figure>

<p>示例：生成 0-49 随机数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $[<span class="variable">$RANDOM</span>%50] <span class="comment"># 除以50取余</span></span><br></pre></td></tr></table></figure>

<p>示例：鸡兔同笼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">head</span>=<span class="variable">$1</span></span><br><span class="line">foot=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> tu=(<span class="variable">$foot</span>-2*<span class="variable">$head</span>)/2</span><br><span class="line"><span class="built_in">let</span> ji=<span class="variable">$head</span>-<span class="variable">$tu</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 兔子：<span class="variable">$tu</span></span><br><span class="line"><span class="built_in">echo</span> 鸡：<span class="variable">$ji</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算-amp-amp-、-、！"><a href="#逻辑运算-amp-amp-、-、！" class="headerlink" title="逻辑运算 &amp;&amp;、||、！"></a>逻辑运算 &amp;&amp;、||、！</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">与  &amp;&amp;</span><br><span class="line">或  ||</span><br><span class="line">非  !</span><br></pre></td></tr></table></figure>

<p>短路运算</p>
<h3 id="使用-read-命令来接受输入"><a href="#使用-read-命令来接受输入" class="headerlink" title="使用 read 命令来接受输入"></a>使用 read 命令来接受输入</h3><p>read 是 shell 内置命令，从标准输入中读取数据并赋值给变量。如果没有重定向，默认是从键盘读取用户输入的数据，如果进行了重定向，那么可以从文件中都去数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># read [options] [name ...]</span></span><br><span class="line"><span class="built_in">read</span>: <span class="built_in">read</span> [-ers] [-a array] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt] [-t <span class="built_in">timeout</span>] [-u fd] [name ...]</span><br></pre></td></tr></table></figure>

<p>如果没有提供变量名，那么读取的数据默认存放到环境变量 REPLY 中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-a array     <span class="comment">#读取的数据赋值给数组</span></span><br><span class="line">-d delimiter <span class="comment">#用字符串delimiter指定读取结束的位置，而不是一个换行符（读取到的数据不包括delimiter）</span></span><br><span class="line">-n num       <span class="comment">#指定输入字符串的长度，到达指定长度自动退出</span></span><br><span class="line">-t seconds   <span class="comment">#设置超时时间，用户超过时间没有输入，自动退出，exit非零</span></span><br><span class="line">-s           <span class="comment">#静默输入，一般用于密码</span></span><br><span class="line">-p prompt    <span class="comment">#显示提示内容，提示内容不能换行</span></span><br><span class="line">-e           <span class="comment">#在用户输入的时候，对功能键进行编码转换，更人性化</span></span><br><span class="line">-r           <span class="comment">#不允许反斜杠转义，选项一般都要加上，pycharm中如果不加会警告提示</span></span><br><span class="line">-u           <span class="comment">#从文件描述符fd中读取内容</span></span><br></pre></td></tr></table></figure>

<p>read 就像表单提交，所有用户提交的信息都是不可信的，一定要做好校验</p>
<h3 id="条件测试命令"><a href="#条件测试命令" class="headerlink" title="条件测试命令"></a><a href="./test/">条件测试命令</a></h3><h2 id="bash-shell-的配置文件"><a href="#bash-shell-的配置文件" class="headerlink" title="bash shell 的配置文件"></a>bash shell 的配置文件</h2><p>bash shell 配置文件有： <code>/etc/profile</code>、<code>~/.bash_profile</code>、<code>~/.bash_login</code>、<code>~/.profile</code>、<code>~/.bashrc</code>、<code>/etc/bashrc</code>、<code>/etc/profile.d/\*.sh</code>，不同的启动方式会加载不同的配置文件</p>
<h3 id="生效范围"><a href="#生效范围" class="headerlink" title="生效范围"></a>生效范围</h3><p>&#x2F;etc 目录下的配置文件是全局生效，家目录下的配置文件是对当前用户生效</p>
<p>配置文件太多，为了避免混乱，默认：对所有用户添加配置，添加到 &#x2F;etc&#x2F;profile.d&#x2F; 目录下，当前用户添加配置，添加到 ~&#x2F;.bashrc 中</p>
<h3 id="登录方式"><a href="#登录方式" class="headerlink" title="登录方式"></a>登录方式</h3><p>shell 登录有两种方式：交互式登录和非交互式登录</p>
<h4 id="交互式"><a href="#交互式" class="headerlink" title="交互式"></a>交互式</h4><ol>
<li>帐号密码登录；</li>
<li><ol start="2">
<li><code>su - userName</code></li>
</ol>
</li>
</ol>
<p>配置文件生效和执行顺序：</p>
<p>Ubuntu18.4</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. /etc/profile</span><br><span class="line">2. /etc/profile/*.sh</span><br><span class="line">3. /etc/bash.bashrc</span><br><span class="line">4. ~/.profile</span><br><span class="line">5. ~/.etc/bashrc</span><br></pre></td></tr></table></figure>

<p>CentOS7</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. /etc/profile</span><br><span class="line">2. /etc/profile.d/\*.sh</span><br><span class="line">3. ~/.bash_profile</span><br><span class="line">4. ~/.bashrc</span><br><span class="line">5. /etc/bashrc</span><br></pre></td></tr></table></figure>

<h4 id="非交互式"><a href="#非交互式" class="headerlink" title="非交互式"></a>非交互式</h4><ol>
<li><code>su userName</code>；</li>
<li>图形化界面下打开的终端；</li>
<li>执行脚本；</li>
<li>任何其他的 bash 实例</li>
</ol>
<p>非交互式登录，只加载 <code>~/.bashrc</code>（centos 的~&#x2F;.bashrc 中会加载&#x2F;etc&#x2F;bashrc 文件）</p>
<p>所以按照功能划分：profile 类只在交互式登录中加载，而 bashrc 类在交互式和非交互式登录中都有加载</p>
<h3 id="bash-退出任务"><a href="#bash-退出任务" class="headerlink" title="bash 退出任务"></a>bash 退出任务</h3><p>退出 shell 时自动运行 <code>~/.bash_logout</code> 文件，可以用来创建自动备份文件、清除临时文件</p>
<h2 id="流程控制-条件选择"><a href="#流程控制-条件选择" class="headerlink" title="流程控制 - 条件选择"></a>流程控制 - 条件选择</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>if&#x2F;then&#x2F;elif&#x2F;else&#x2F;fi</p>
<p>单分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">    . ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>双分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> []; <span class="keyword">then</span></span><br><span class="line"> code...</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"> code...</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>多分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> []; <span class="keyword">then</span></span><br><span class="line"> code...</span><br><span class="line"><span class="keyword">elif</span> []; <span class="keyword">then</span></span><br><span class="line"> code...</span><br><span class="line"><span class="keyword">elif</span> []; <span class="keyword">then</span></span><br><span class="line"> code...</span><br><span class="line"> ...</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"> code...</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="case"><a href="#case" class="headerlink" title="case"></a>case</h3><p>类似 php 中的 switch</p>
<p>case&#x2F;esac</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/sh</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Is it morning? Please answer yes or no.&quot;</span></span><br><span class="line"><span class="built_in">read</span> YES_OR_NO</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$YES_OR_NO</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line"><span class="built_in">yes</span>|y|Yes|YES)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Good Morning!&quot;</span>;;</span><br><span class="line">[nN]*)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Good Afternoon!&quot;</span>;;</span><br><span class="line">*)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Sorry, <span class="variable">$YES_OR_NO</span> not recognized. Enter yes or no.&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 1;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>

<p>case 支持 glob 风格的通配符：*、?、[]、|</p>
<h2 id="流程控制-循环"><a href="#流程控制-循环" class="headerlink" title="流程控制 - 循环"></a>流程控制 - 循环</h2><h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><p>for in&#x2F;do&#x2F;done</p>
<p>递归遍历当前目录下的所有文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">dir</span>=$(<span class="built_in">dirname</span> <span class="string">&quot;`readlink -f <span class="variable">$0</span>`&quot;</span>)</span><br><span class="line"><span class="function"><span class="title">fn</span></span>() &#123;</span><br><span class="line"> <span class="keyword">for</span> filename <span class="keyword">in</span> `<span class="built_in">ls</span> <span class="variable">$1</span>`; <span class="keyword">do</span></span><br><span class="line">  file=<span class="variable">$&#123;1&#125;</span>/<span class="variable">$&#123;filename&#125;</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$file</span>\n&quot;</span></span><br><span class="line">  <span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$file</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">   fn <span class="variable">$file</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line">fn <span class="variable">$dir</span></span><br></pre></td></tr></table></figure>

<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><p>while&#x2F;do&#x2F;done</p>
<p>无限循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line"> 循环体</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>验证密码，限制尝试输入不超过 5 次</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;enter password:&#x27;</span></span><br><span class="line"><span class="built_in">read</span> -s try</span><br><span class="line">num=1</span><br><span class="line"><span class="keyword">while</span> [[ <span class="variable">$try</span> != <span class="string">&#x27;123456&#x27;</span> ]]; <span class="keyword">do</span></span><br><span class="line"> num=$((<span class="variable">$num</span>+<span class="number">1</span>))</span><br><span class="line"> <span class="keyword">if</span> [[ <span class="variable">$num</span> &gt; 5 ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&#x27;no change&#x27;</span></span><br><span class="line">  <span class="built_in">break</span></span><br><span class="line"> <span class="keyword">fi</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&#x27;try again&#x27;</span></span><br><span class="line"> <span class="built_in">read</span> -s try</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$try</span> == <span class="string">&#x27;123456&#x27;</span> ]]; <span class="keyword">then</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&#x27;yes&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="while-read"><a href="#while-read" class="headerlink" title="while read"></a>while read</h4><p>while 循环的特殊用法,遍历文件或文本的每一行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 依次读取file文件中的每一行,且将行赋值给变量X</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> X; <span class="keyword">do</span></span><br><span class="line">循环体</span><br><span class="line"><span class="keyword">done</span> &lt; file</span><br></pre></td></tr></table></figure>

<p>练习，使用 while 实现：</p>
<ol>
<li>编写脚本，求 100 以内所有正奇数之和</li>
<li>编写脚本，提示请输入网络地址，如 192.168.0.0，判断输入的网段中主机在线状态，并统计在线和离线主机各多少</li>
<li>编写脚本，打印九九乘法表</li>
<li>编写脚本，利用变量 RANDOM 生成 10 个随机数字，输出这个 10 数字，并显示其中的最大值和最小值</li>
<li>编写脚本，实现打印国际象棋棋盘</li>
<li>后续六个字符串: efbaf275cd、4be9c40b8b、44b2395c46、f8c8873ce0、b902c16c8b、ad865d2f63 是通过对随机数变量 RANDOM 随机执行命令: <code>echo $RANDOM | md5sum | cut -c1-10</code> 后的结果，请破解这些字符串对应的 RANDOM 值</li>
</ol>
<h3 id="until"><a href="#until" class="headerlink" title="until"></a>until</h3><p>while 判断条件为真则循环，until 判断条件为假则循环</p>
<p>无限循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">until</span> <span class="literal">false</span>; <span class="keyword">do</span></span><br><span class="line"> 循环体</span><br><span class="line">Done</span><br></pre></td></tr></table></figure>

<h3 id="循环控制-continue-和-break"><a href="#循环控制-continue-和-break" class="headerlink" title="循环控制 continue 和 break"></a>循环控制 continue 和 break</h3><p>continue 跳过本次循环，break 跳出所有循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -u</span><br><span class="line"></span><br><span class="line">i=10</span><br><span class="line"><span class="keyword">while</span> ((i--)); <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$i</span> == 5 ]; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&#x27;i is 5&#x27;</span></span><br><span class="line">   <span class="comment"># continue</span></span><br><span class="line">      <span class="built_in">break</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">unset</span> i</span><br></pre></td></tr></table></figure>

<h3 id="循环控制-shift"><a href="#循环控制-shift" class="headerlink" title="循环控制 shift"></a>循环控制 shift</h3><p>将参数列表最左边的参数删除，while 循环遍历位置参量列表时,常用到 shift</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> ((<span class="variable">$#</span> &gt; <span class="number">0</span>)); <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">    <span class="built_in">shift</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>select 用于生成菜单，并显示 PS3 提示符，然后等待用户输入，无论输入什么都执行一遍循环，常搭配 case 来处理用户输入，select 通过 break 退出循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> variable <span class="keyword">in</span> list ;<span class="keyword">do</span></span><br><span class="line"> 循环体命令</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">sum</span>=0</span><br><span class="line">PS3=<span class="string">&quot;请点菜(1-6): &quot;</span></span><br><span class="line"><span class="keyword">select</span> MENU <span class="keyword">in</span> 北京烤鸭 佛跳墙 小龙虾 羊蝎子 火锅 点菜结束; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$REPLY</span> <span class="keyword">in</span></span><br><span class="line">    1)</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$MENU</span> 价格是 100</span><br><span class="line">        ((sum += <span class="number">100</span>))</span><br><span class="line">        ;;</span><br><span class="line">    2)</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$MENU</span> 价格是 88</span><br><span class="line">        ((sum += <span class="number">88</span>))</span><br><span class="line">        ;;</span><br><span class="line">    3)</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$MENU</span>价格是 66</span><br><span class="line">        ((sum += <span class="number">66</span>))</span><br><span class="line">        ;;</span><br><span class="line">    4)</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$MENU</span> 价格是 166</span><br><span class="line">        ((sum += <span class="number">166</span>))</span><br><span class="line">        ;;</span><br><span class="line">    5)</span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$MENU</span> 价格是 200</span><br><span class="line">        ((sum += <span class="number">200</span>))</span><br><span class="line">        ;;</span><br><span class="line">    6)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;点菜结束,退出&quot;</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;点菜错误,重新选择&quot;</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;总价格是: <span class="variable">$sum</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>函数运行在当前 shell 进程</p>
<h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#语法一:</span></span><br><span class="line"><span class="function"><span class="title">func_name</span></span> ()&#123;</span><br><span class="line">...函数体...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#语法二:</span></span><br><span class="line"><span class="keyword">function</span> func_name &#123;</span><br><span class="line">...函数体...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#语法三:</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">func_name</span></span> () &#123;</span><br><span class="line">...函数体...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明环境函数</span></span><br><span class="line"><span class="built_in">declare</span> -xf function_name</span><br><span class="line"><span class="built_in">export</span> -f function_name</span><br></pre></td></tr></table></figure>

<h3 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func_name  <span class="comment"># 注意不要加（）</span></span><br><span class="line"><span class="comment"># 参数用空格分割，在函数内部使用位置变量接收传入的参数</span></span><br><span class="line">func_name arg1 arg2 arg3 ...</span><br></pre></td></tr></table></figure>

<h3 id="删除函数"><a href="#删除函数" class="headerlink" title="删除函数"></a>删除函数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> func_name</span><br></pre></td></tr></table></figure>

<h3 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h3><p>函数返回值：</p>
<ul>
<li>使用 echo 等命令进行输出</li>
<li>函数体中调用命令的输出结果</li>
</ul>
<p>函数的退出状态码：</p>
<ul>
<li>默认取决于函数中执行的最后一条命令的退出状态码</li>
<li>自定义退出状态码,其格式为:<br>return 从函数中返回,用最后状态命令决定返回值<br>return 0 无错误返回<br>return 1-255 有错误返回</li>
</ul>
<h3 id="函数变量"><a href="#函数变量" class="headerlink" title="函数变量"></a>函数变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">local</span> NAME=VALUE</span><br><span class="line"><span class="comment"># 等于</span></span><br><span class="line"><span class="built_in">declare</span> NAME=VALUE</span><br></pre></td></tr></table></figure>

<h2 id="脚本相关工具"><a href="#脚本相关工具" class="headerlink" title="脚本相关工具"></a>脚本相关工具</h2><h3 id="trap"><a href="#trap" class="headerlink" title="trap"></a>trap</h3><p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/3482.html">信号</a>捕捉，捕捉一个或多个信号，替换为自定义操作</p>
<p>trap 捕捉的信号包括系统信号和 shell 信号，系统信号通过<code>trap -l</code>或<code>kill -l</code>查看，shell 信号有四个：EXIT(或信号代码 0)、ERR、DEBUG 和 RETURN。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">trap</span> <span class="built_in">command</span> signal_list <span class="comment"># 捕捉信号列表，替换为自定义command</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">&#x27;&#x27;</span> signal_list      <span class="comment"># 捕捉信号列表，不做任何操作</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">&#x27;-&#x27;</span> signal_list     <span class="comment"># 捕捉信号列表，恢复这些信号</span></span><br><span class="line"><span class="built_in">trap</span> -p                  <span class="comment"># 列出自定义捕捉信号操作</span></span><br><span class="line"><span class="built_in">trap</span> -l                  <span class="comment"># 列出所有系统信</span></span><br></pre></td></tr></table></figure>

<p>信号名是 SIG 后面的部分，捕捉的时候可以写信号的编号，也可以写信号名称，不区分大小写</p>
<p>由于不少信号在不同架构的计算机上数值不同，所以在不确定编号是否唯一的时候，最好写信号名称</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">trap</span> <span class="string">&quot;echo &#x27;Press ctrl+c or ctrl+\ &#x27;&quot;</span> int quit</span><br></pre></td></tr></table></figure>

<p>DEBUG 和 RETURN 这两种信号陷阱无需关注，EXIT 是退出状态码为 0 时发出的信号，退出状态码非 0 时则发出 ERR 信号</p>
<p>系统信号的编号从 1 到 64，EXIT 的编号是 0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">finish</span></span>()&#123;</span><br><span class="line"> <span class="built_in">echo</span> finish| <span class="built_in">tee</span> -a /root/finish.log</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">trap</span> finish <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<h3 id="mktemp"><a href="#mktemp" class="headerlink" title="mktemp"></a>mktemp</h3><p>创建临时文件，可以避免文件名冲突</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># X至少3个，大写X</span></span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">mktemp</span> fileXXXXX</span><br><span class="line">fileS9vLK</span><br><span class="line"><span class="comment"># -d 创建临时目录</span></span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">mktemp</span> -d dirXXX</span><br><span class="line">diresA</span><br></pre></td></tr></table></figure>

<h3 id="expect"><a href="#expect" class="headerlink" title="expect"></a>expect</h3><p>expect 基于 Tcl( Tool Command Language )语言开发，主要应用于自动化交互式操作的场景,借助 expect 处理交互的命令,可以将交互过程如:ssh 登录,ftp 登录等写在一个脚本上,使之自动化完成。尤其适用于需要对多台服务器执行相同操作的环境中,可以大大提高系统管理人员的工作效率</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expect [ -dDinN ] [ -c cmds ] [ [ -[f|b] ] cmdfile ] [ args ]</span><br></pre></td></tr></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>shell 和 php 一样，支持索引数组和关联数组。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 索引数组</span></span><br><span class="line">arr=(val1 val2 val3 val4 ...)</span><br><span class="line"><span class="comment"># 关联数组</span></span><br><span class="line"><span class="built_in">declare</span> -A brr=([name]=<span class="string">&#x27;lujinkai&#x27;</span> [age]=<span class="string">&#x27;18&#x27;</span> [gender]=<span class="string">&#x27;男&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注意：声明索引数组可以省略 declare，声明关联数组不能省略 declare，如果省略不报错，但是数据会乱。</p>
<h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~/data/test$ array=(<span class="string">&quot;Allen&quot;</span> <span class="string">&quot;Mike&quot;</span> <span class="string">&quot;Messi&quot;</span> <span class="string">&quot;Jerry&quot;</span> <span class="string">&quot;Hanmeimei&quot;</span> <span class="string">&quot;Wang&quot;</span>)</span><br><span class="line"><span class="comment"># 打印数组长度</span></span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">echo</span> <span class="variable">$&#123;#array[@]&#125;</span></span><br><span class="line">6</span><br><span class="line"><span class="comment"># 打印元素长度</span></span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">echo</span> <span class="variable">$&#123;#array[1]&#125;</span> <span class="comment"># 打印第1个元素 Mike的长度</span></span><br><span class="line">4</span><br><span class="line"><span class="comment"># 分片访问</span></span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">echo</span> <span class="variable">$&#123;array[@]:1:2&#125;</span></span><br><span class="line">Mike Messi</span><br><span class="line"><span class="comment"># 元素内容替换</span></span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">echo</span> <span class="variable">$&#123;array[@]/e/E&#125;</span></span><br><span class="line">AllEn MikE MEssi JErry HanmEimei Wang</span><br><span class="line">lujinkai@Z510:~/data/test$ <span class="built_in">echo</span> <span class="variable">$&#123;array[@]//e/E&#125;</span></span><br><span class="line">AllEn MikE MEssi JErry HanmEimEi Wang</span><br><span class="line"><span class="comment"># 数组的遍历</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">in</span> <span class="variable">$&#123;array[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="variable">$val</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~$ str=<span class="string">&#x27;abcdefghijklmnopqrstuvwxyz&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>假设有一个指针 pointer，始终指向字符串的“间隙”，从前往后，“间隙”号依次为 0、1、2、3…，而且显然“间隙”数量比字符数量多 1 个，如果字符串有 2 个字符，那就有 3 个“间隙”。指针默认指向 0，指针的位置就是切片位置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串长度</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;#str&#125;</span></span><br><span class="line">26</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从切片位置往后截取length个字符：$&#123;str:offset:length&#125;</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str:0:6&#125;</span></span><br><span class="line">abcdef</span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str:4:2&#125;</span></span><br><span class="line">ef</span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取后length个字符：$&#123;str:0-length&#125; 0可以用空格代替</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str: -3&#125;</span></span><br><span class="line">xyz</span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str:0-3&#125;</span></span><br><span class="line">xyz</span><br><span class="line"></span><br><span class="line"><span class="comment">#  截取后length个字符，然后再处理：$&#123;str:0-length:offset&#125;、$&#123;str:0-length:-offset&#125;</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str:0-3:1&#125;</span></span><br><span class="line">x</span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str:0-3:-1&#125;</span></span><br><span class="line">xy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 掐头去尾：$&#123;str:offset:-length&#125;</span></span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str:1:-1&#125;</span></span><br><span class="line">bcdefghijklmnopqrstuvwxy</span><br></pre></td></tr></table></figure>

<h3 id="查找替换"><a href="#查找替换" class="headerlink" title="查找替换"></a>查找替换</h3><p><img data-src="//img.to2b.cn/blog/ljk/1599050885616.png"></p>
<p><code>$&#123;str#*word&#125;</code> 查找 word 第一次出现的位置，删除其以及之前的部分</p>
<p><code>$&#123;str##*word&#125;</code> 贪婪模式，查找 word 最后一次出现的位置，删除其及其之前的部分</p>
<p><code>$&#123;str%word*&#125;</code> 查找 word 最后出现的位置，删除其及其之后的部分</p>
<p><code>$&#123;str%%word*&#125;</code> 查找 word 第一次出现的位置，删除其及其之后的部分</p>
<p><code>$&#123;str/pattern&#125;</code> 删除第一个匹配</p>
<p><code>$&#123;str//pattern&#125;</code> 删除所有匹配</p>
<h3 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h3><p><code>$&#123;str^^&#125;</code> 转大写</p>
<p><code>$&#123;str,,&#125;</code> 转小写</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str^^&#125;</span></span><br><span class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZ</span><br><span class="line">lujinkai@Z510:~$ <span class="built_in">echo</span> <span class="variable">$&#123;str,,&#125;</span></span><br><span class="line">abcdefghijklmnopqrstuvwxyz</span><br></pre></td></tr></table></figure>

<h3 id="变量测试"><a href="#变量测试" class="headerlink" title="变量测试"></a>变量测试</h3><p><img data-src="//img.to2b.cn/blog/ljk/1599052693808.png"></p>
<p>变量测试点比较多，而且不怎么用，主要用 if 来判断测试，所以不用深究</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160536339.png" alt="像方便面一样的男子 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160019009.png" alt="像方便面一样的男子 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/shell/" rel="tag"><i class="fa fa-tag"></i> shell</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/expect/" rel="prev" title="expect">
                  <i class="fa fa-chevron-left"></i> expect
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/pushd%E5%92%8Cpopd/" rel="next" title="pushd和popd">
                  pushd和popd <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18016600号-3 </a>
  </div>

<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">像方便面一样的男子</span>
</div>

    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="//s1.lujinkai.cn/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="//s1.lujinkai.cn/libs/lozad.js/1.16.0/lozad.min.js"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="//s1.lujinkai.cn/libs/algoliasearch/4.11.0/algoliasearch-lite.umd.min.js"></script>
<script src="//s1.lujinkai.cn/libs/instantsearch.js/4.36.0/instantsearch.production.min.js"></script><script src="/js/third-party/search/algolia-search.js"></script>






  





</body>
</html>
