<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="32x32" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="16x16" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="mask-icon" href="//img.lujinkai.cn/blog/ljk/1607154764582.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//s1.lujinkai.cn/libs/fontawesome-free/5.15.4/css/all.min.css">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.lujinkai.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":10},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"KN3H1V8A6V","apiKey":"c5d73d0dde2dd770ce49b505f938553d","indexName":"hexo","hits":{"per_page":20,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We did not find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}}}}</script><script src="/js/config.js"></script>

    <meta name="description" content="软件运行环境POSIXPOSIX:Portable Operating System Interface 可移植操作系统接口,定义了操作系统应该为应用程序提供的接口标准,是 IEEE 为要在各种 UNIX 操作系统上运行的软件而定义的一系列 API 标准的总称。Linux 和 windows 都要实现基本的 posix 标准,程序就在源代码级别可移植了 C 语言程序的实现过程源代码-&gt;预处理">
<meta property="og:type" content="article">
<meta property="og:title" content="软件管理">
<meta property="og:url" content="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="LJKのBlog">
<meta property="og:description" content="软件运行环境POSIXPOSIX:Portable Operating System Interface 可移植操作系统接口,定义了操作系统应该为应用程序提供的接口标准,是 IEEE 为要在各种 UNIX 操作系统上运行的软件而定义的一系列 API 标准的总称。Linux 和 windows 都要实现基本的 posix 标准,程序就在源代码级别可移植了 C 语言程序的实现过程源代码-&gt;预处理">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597365779221.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597460963538.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597543416977.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597673044262.png">
<meta property="article:published_time" content="2020-12-09T14:30:02.000Z">
<meta property="article:modified_time" content="2023-05-29T08:58:05.510Z">
<meta property="article:author" content="像方便面一样的男子">
<meta property="article:tag" content="软件管理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.to2b.cn/blog/ljk/1597365779221.png">


<link rel="canonical" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/","path":"运维/基础/软件/软件管理/","title":"软件管理"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>软件管理 | LJKのBlog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LJKのBlog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学无止境</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="nav-number">1.</span> <span class="nav-text">软件运行环境</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#POSIX"><span class="nav-number">1.1.</span> <span class="nav-text">POSIX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="nav-number">1.2.</span> <span class="nav-text">C 语言程序的实现过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%92%8C%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5"><span class="nav-number">1.3.</span> <span class="nav-text">静态链接和动态链接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ldd"><span class="nav-number">1.3.1.</span> <span class="nav-text">ldd</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="nav-number">2.</span> <span class="nav-text">软件包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">2.1.</span> <span class="nav-text">包管理器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#x2F-var-x2F-lib-x2F-rpm"><span class="nav-number">2.2.</span> <span class="nav-text">&#x2F;var&#x2F;lib&#x2F;rpm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%8C%85%E7%9A%84%E9%80%94%E5%BE%84"><span class="nav-number">2.3.</span> <span class="nav-text">获取包的途径</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8-rpm"><span class="nav-number">3.</span> <span class="nav-text">包管理器 rpm</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD"><span class="nav-number">3.2.</span> <span class="nav-text">卸载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7"><span class="nav-number">3.3.</span> <span class="nav-text">升级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%8D%E7%BA%A7"><span class="nav-number">3.4.</span> <span class="nav-text">降级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2"><span class="nav-number">3.5.</span> <span class="nav-text">查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8C"><span class="nav-number">3.6.</span> <span class="nav-text">校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%B4%E6%8A%A4"><span class="nav-number">3.7.</span> <span class="nav-text">数据库维护</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yum-%E5%92%8C-dnf"><span class="nav-number">4.</span> <span class="nav-text">yum 和 dnf</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yum-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="nav-number">4.1.</span> <span class="nav-text">yum 客户端配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81-baseurl"><span class="nav-number">4.1.1.</span> <span class="nav-text">常见 baseurl</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yum-%E5%91%BD%E4%BB%A4"><span class="nav-number">5.</span> <span class="nav-text">yum 命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#options"><span class="nav-number">5.1.</span> <span class="nav-text">options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#command"><span class="nav-number">5.2.</span> <span class="nav-text">command</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#repolist"><span class="nav-number">5.2.1.</span> <span class="nav-text">repolist</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list"><span class="nav-number">5.2.2.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#install-and-reinstall"><span class="nav-number">5.2.3.</span> <span class="nav-text">install and reinstall</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#remove-or-erase"><span class="nav-number">5.2.4.</span> <span class="nav-text">remove or erase</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#update-and-downgrade"><span class="nav-number">5.2.5.</span> <span class="nav-text">update and downgrade</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8C%85%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="nav-number">5.2.6.</span> <span class="nav-text">查看包的详细信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#clean-and-makecache"><span class="nav-number">5.2.7.</span> <span class="nav-text">clean and makecache</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#history"><span class="nav-number">5.2.8.</span> <span class="nav-text">history</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#localinstall-or-install"><span class="nav-number">5.2.9.</span> <span class="nav-text">localinstall or install</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8C%85%E7%9A%84%E5%AE%89%E5%85%A8%E8%AD%A6%E5%91%8A"><span class="nav-number">5.2.10.</span> <span class="nav-text">查看包的安全警告</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%85%E7%BB%84%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3"><span class="nav-number">5.2.11.</span> <span class="nav-text">包组管理相关</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E7%A7%81%E6%9C%89-yum-%E4%BB%93%E5%BA%93"><span class="nav-number">5.3.</span> <span class="nav-text">实现私有 yum 仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="nav-number">5.3.1.</span> <span class="nav-text">服务端</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">5.3.2.</span> <span class="nav-text">客户端</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ubuntu-%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">Ubuntu 软件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#dpkg-%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95"><span class="nav-number">6.1.</span> <span class="nav-text">dpkg 常见用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#apt"><span class="nav-number">6.2.</span> <span class="nav-text">apt</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6%E5%8C%85%EF%BC%9A"><span class="nav-number">6.2.1.</span> <span class="nav-text">卸载软件包：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%BC%93%E5%AD%98"><span class="nav-number">6.2.2.</span> <span class="nav-text">删除缓存</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="像方便面一样的男子"
      src="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <p class="site-author-name" itemprop="name">像方便面一样的男子</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">340</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">73</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ljkk" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ljkk" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="//img.lujinkai.cn/blog/ljk/1607154764582.png">
      <meta itemprop="name" content="像方便面一样的男子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LJKのBlog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="软件管理 | LJKのBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          软件管理
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-09 22:30:02" itemprop="dateCreated datePublished" datetime="2020-12-09T22:30:02+08:00">2020-12-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-29 16:58:05" itemprop="dateModified" datetime="2023-05-29T16:58:05+08:00">2023-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">基础</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="软件运行环境"><a href="#软件运行环境" class="headerlink" title="软件运行环境"></a>软件运行环境</h2><h3 id="POSIX"><a href="#POSIX" class="headerlink" title="POSIX"></a>POSIX</h3><p>POSIX:Portable Operating System Interface 可移植操作系统接口,定义了操作系统应该为应用程序<br>提供的接口标准,是 IEEE 为要在各种 UNIX 操作系统上运行的软件而定义的一系列 API 标准的总称。<br>Linux 和 windows 都要实现基本的 posix 标准,程序就在源代码级别可移植了</p>
<h3 id="C-语言程序的实现过程"><a href="#C-语言程序的实现过程" class="headerlink" title="C 语言程序的实现过程"></a>C 语言程序的实现过程</h3><p>源代码-&gt;预处理-&gt;编译-&gt;汇编-&gt;链接</p>
<p>预处理：略<br>编译：将 C 转译成汇编<br>汇编：将汇编转译成机器指令<br>链接：调用链接器 ld 来链接程序运行需要的一大堆目标文件,以及所依赖的其它库文件,最后生成可执行文件</p>
<h3 id="静态链接和动态链接"><a href="#静态链接和动态链接" class="headerlink" title="静态链接和动态链接"></a>静态链接和动态链接</h3><img data-src="//img.to2b.cn/blog/ljk/1597365779221.png" style="zoom: 67%;" />

<h4 id="ldd"><a href="#ldd" class="headerlink" title="ldd"></a>ldd</h4><p>查看二进制程序所依赖的库文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~$ ldd /bin/ls</span><br><span class="line"> linux-vdso.so.1 (0x00007fff7ccf9000)</span><br><span class="line"> libselinux.so.1 =&gt; /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007ffadd6d3000)</span><br><span class="line"> libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007ffadd2e2000)</span><br><span class="line"> libpcre.so.3 =&gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007ffadd070000)</span><br><span class="line"> libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007ffadce6c000)</span><br><span class="line"> /lib64/ld-linux-x86-64.so.2 (0x00007ffaddb1d000)</span><br><span class="line"> libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007ffadcc4d000)</span><br></pre></td></tr></table></figure>

<p>动态库路径的配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/ld.so.conf</span><br><span class="line">/etc/ld.so.conf.d/*.conf</span><br></pre></td></tr></table></figure>

<p>将配置文件规定的路径下的库文件加载到缓存文件（字典）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldconfig</span><br></pre></td></tr></table></figure>

<p>缓存文件（字典）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lujinkai@Z510:~$ ll /etc/ld.so.cache</span><br><span class="line">-rw-r--r-- 1 root root 81473 Aug 14 08:47 /etc/ld.so.cache</span><br><span class="line">lujinkai@Z510:~$ file !$</span><br><span class="line">file /etc/ld.so.cache</span><br><span class="line">/etc/ld.so.cache: data</span><br></pre></td></tr></table></figure>

<p>查看缓存文件（字典）<br>显示所有可用库文件名及文件路径映射关系</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldconfig -p</span><br></pre></td></tr></table></figure>

<p>程序执行时会去 ld.so.cache 文件查找动态库的信息，所以如果有新的库文件，需要先执行 ldconfig 将新的库文件加载到 ld.so.cache</p>
<h2 id="软件包"><a href="#软件包" class="headerlink" title="软件包"></a>软件包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># yum install -y autofs</span></span><br><span class="line">[root@centos7 /]<span class="comment"># systemctl start autofs</span></span><br><span class="line">[root@centos7 /]<span class="comment"># cd /misc/cd</span></span><br><span class="line">[root@centos7 <span class="built_in">cd</span>]<span class="comment"># ls</span></span><br><span class="line">CentOS_BuildTag  GPL       LiveOS    RPM-GPG-KEY-CentOS-7</span><br><span class="line">EFI              images    Packages  RPM-GPG-KEY-CentOS-Testing-7</span><br><span class="line">EULA             isolinux  repodata  TRANS.TBL</span><br><span class="line">[root@centos7 <span class="built_in">cd</span>]<span class="comment"># cd Packages/</span></span><br><span class="line">[root@centos7 Packages]<span class="comment"># ls</span></span><br><span class="line">acl-2.2.51-15.el7.x86_64.rpm</span><br><span class="line">aic94xx-firmware-30-6.el7.noarch.rpm</span><br><span class="line">aide-0.15.1-13.el7.x86_64.rpm</span><br><span class="line">alsa-firmware-1.0.28-2.el7.noarch.rpm</span><br><span class="line">alsa-lib-1.1.8-1.el7.x86_64.rpm</span><br><span class="line">alsa-tools-firmware-1.1.0-1.el7.x86_64.rpm</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 预览包内文件</span></span><br><span class="line">[root@centos7 Packages]<span class="comment"># rpm2cpio zip-3.0-11.el7.x86_64.rpm | cpio -itv</span></span><br><span class="line">-rwxr-xr-x   1 root     root       215840 Nov  6  2016 ./usr/bin/zip</span><br><span class="line">-rwxr-xr-x   1 root     root       100456 Nov  6  2016 ./usr/bin/zipcloak</span><br><span class="line">-rwxr-xr-x   1 root     root        95984 Nov  6  2016 ./usr/bin/zipnote</span><br><span class="line">-rwxr-xr-x   1 root     root       100096 Nov  6  2016 ./usr/bin/zipsplit</span><br><span class="line">drwxr-xr-x   2 root     root            0 Nov  6  2016 ./usr/share/doc/zip-3.0</span><br><span class="line">-rw-r--r--   1 root     root       210354 Jul  6  2008 ./usr/share/doc/zip-3.0/CHANGES</span><br><span class="line">-rw-r--r--   1 root     root         3412 Mar  4  2007 ./usr/share/doc/zip-3.0/LICENSE</span><br><span class="line">-rw-r--r--   1 root     root        12748 Jun 26  2008 ./usr/share/doc/zip-3.0/README</span><br><span class="line">-rw-r--r--   1 root     root         6430 Mar 26  2008 ./usr/share/doc/zip-3.0/README.CR</span><br><span class="line">-rw-r--r--   1 root     root         6675 Jun 13  2008 ./usr/share/doc/zip-3.0/TODO</span><br><span class="line">-rw-r--r--   1 root     root        15731 Jul  2  2008 ./usr/share/doc/zip-3.0/WHATSNEW</span><br><span class="line">-rw-r--r--   1 root     root        13167 Jun 13  2008 ./usr/share/doc/zip-3.0/WHERE</span><br><span class="line">-rw-r--r--   1 root     root         3395 Dec 14  1996 ./usr/share/doc/zip-3.0/algorith.txt</span><br><span class="line">-rw-r--r--   1 root     root        28496 Jun 17  2008 ./usr/share/man/man1/zip.1.gz</span><br><span class="line">-rw-r--r--   1 root     root          951 May  8  2008 ./usr/share/man/man1/zipcloak.1.gz</span><br><span class="line">-rw-r--r--   1 root     root          819 Nov  6  2016 ./usr/share/man/man1/zipnote.1.gz</span><br><span class="line">-rw-r--r--   1 root     root          619 Nov  6  2016 ./usr/share/man/man1/zipsplit.1.gz</span><br><span class="line">1598 blocks</span><br></pre></td></tr></table></figure>

<p>范例：统计 rpm 的架构类型及相应的包管理器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 Packages]<span class="comment"># ls *.rpm | sed -En &quot;s/.*\.(.*)\.rpm/\1/p&quot; | sort | uniq -c | sort -nr</span></span><br><span class="line">    381 x86_64</span><br><span class="line">     65 noarch</span><br><span class="line">[root@centos7 Packages]<span class="comment"># ls *.rpm | rev | cut -d. -f2 | rev | sort | uniq -c | sort -nr</span></span><br><span class="line">    381 x86_64</span><br><span class="line">     65 noarch</span><br><span class="line">[root@centos7 Packages]<span class="comment"># ls *.rpm | grep -Eo &quot;[^.]+\.rpm$&quot; | grep -Eo &quot;^[^.]+&quot; | sort | uniq -c | sort -nr</span></span><br><span class="line">    381 x86_64</span><br><span class="line">     65 noarch</span><br></pre></td></tr></table></figure>

<h3 id="包管理器"><a href="#包管理器" class="headerlink" title="包管理器"></a>包管理器</h3><ul>
<li>redhat：rpm 文件，rpm 包管理器</li>
<li>debian：deb 文件，dpkg 包管理器</li>
</ul>
<h3 id="x2F-var-x2F-lib-x2F-rpm"><a href="#x2F-var-x2F-lib-x2F-rpm" class="headerlink" title="&#x2F;var&#x2F;lib&#x2F;rpm"></a>&#x2F;var&#x2F;lib&#x2F;rpm</h3><p>当安装完一个包后，包的信息会存储到一个数据库中，这数据库中信息是所有包共享的，所以叫共享数据库：&#x2F;var&#x2F;lib&#x2F;rpm，这里面记录了当前主机上安装好的各种 rpm 包，包括它们的名称、版本、依赖关系、功能说明、包安装后生成的各文件路径及校验码信息。</p>
<p>这个数据库很重要，一旦破坏，就无法安装卸载软件，当使用 rpm 安装软件的时候，会查询这个数据库，如果已经安装，就提示已安装。</p>
<h3 id="获取包的途径"><a href="#获取包的途径" class="headerlink" title="获取包的途径"></a>获取包的途径</h3><p>光盘：<br><a target="_blank" rel="noopener" href="http://mirrors.163.com/centos/">http://mirrors.163.com/centos/</a><br><a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos/">https://mirrors.aliyun.com/centos/</a><br><a target="_blank" rel="noopener" href="http://mirrors.163.com/ubuntu-releases/">http://mirrors.163.com/ubuntu-releases/</a><br><a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/ubuntu-releases/">https://mirrors.aliyun.com/ubuntu-releases/</a></p>
<h2 id="包管理器-rpm"><a href="#包管理器-rpm" class="headerlink" title="包管理器 rpm"></a>包管理器 rpm</h2><p>安装、卸载、升级、查询、校验、数据库维护</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh PACKAGE_FILE...</span><br><span class="line"></span><br><span class="line">-i    <span class="comment"># install</span></span><br><span class="line">-v    <span class="comment"># 显示详细的信息</span></span><br><span class="line">-h    <span class="comment"># 显示进度</span></span><br></pre></td></tr></table></figure>

<h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -e PACKAGE_FILE... [--nodeps]</span><br><span class="line"></span><br><span class="line">-e        <span class="comment"># 卸载</span></span><br><span class="line">--nodeps  <span class="comment"># 忽略依赖关系</span></span><br></pre></td></tr></table></figure>

<h3 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh PACKAGE_FILE...</span><br><span class="line">rpm -Fvh PACKAGE_FILE...</span><br><span class="line"></span><br><span class="line">-U      <span class="comment"># upgrade 例如要升级php，如果本机已安装php，则升级，如果本机没有php，则安装</span></span><br><span class="line">-F      <span class="comment"># freshen 例如要升级php，如果本机已安装php，则升级，如果本机没有php，则不执行任何操作</span></span><br><span class="line">--force <span class="comment"># 强制安装</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>不要对内核做升级操作；Linux 支持多内核并存，因此直接安装新版本内核</li>
<li>如果原程序的配置文件被修改，升级时，新版本提供的同以配置文件不会直接覆盖，而是把新版本的配置文件重命名（filename.rpmnew）后保留</li>
</ol>
<h3 id="降级"><a href="#降级" class="headerlink" title="降级"></a>降级</h3><p>在升级的命令上添加 –oldpackage 即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh --oldpackage PACKAGE_FILE...</span><br><span class="line">rpm -Fvh --oldpackage PACKAGE_FILE...</span><br></pre></td></tr></table></figure>

<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm &#123;-q|--query&#125; [select-options] [query-options]</span><br></pre></td></tr></table></figure>

<p>常用查询语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-q PACKAGE</span><br><span class="line">-qa | grep <span class="string">&#x27;pattern&#x27;</span></span><br><span class="line">-qi PACKAGE</span><br><span class="line">-qc PACKAGE</span><br><span class="line">-ql PACKAGE</span><br><span class="line">-qd PACKAGE</span><br><span class="line">-q --scripts PACKAGE</span><br><span class="line">-qf file</span><br><span class="line">-qpi PACKAGE_FILE</span><br><span class="line">-qpl PACKAGE_FILE, ...</span><br><span class="line"></span><br><span class="line">-a         <span class="comment"># 所有已安装的包</span></span><br><span class="line">-f         <span class="comment"># 文件是由哪个包安装生成的</span></span><br><span class="line">-p rpmfile <span class="comment"># 尚未安装的包文件，以下-c、-d、-i、-l、--script默认只查询已安装的包，如果要查询未安装的包的相关信息，需要配合-p选项</span></span><br><span class="line">-c         <span class="comment"># 程序的配置文件</span></span><br><span class="line">-d         <span class="comment"># 程序的文档</span></span><br><span class="line">-i         <span class="comment"># information</span></span><br><span class="line">-l         <span class="comment"># 安装后生成的所有文件</span></span><br><span class="line">--scripts  <span class="comment"># 包自带的脚本文件</span></span><br></pre></td></tr></table></figure>

<h3 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h3><p>占位。。。</p>
<h3 id="数据库维护"><a href="#数据库维护" class="headerlink" title="数据库维护"></a>数据库维护</h3><p>&#x2F;var&#x2F;lib&#x2F;rpm</p>
<h2 id="yum-和-dnf"><a href="#yum-和-dnf" class="headerlink" title="yum 和 dnf"></a>yum 和 dnf</h2><p>rpm 不能解决包的依赖关系，yum 和 dnf 可以，yum 适用 centos7，dnf 适用 centos8，以下只介绍 yum，dnf 也都一样</p>
<p>yum：服务器存放 rpm 包和包相关的元数据库</p>
<p>yum 实现过程：</p>
<p>先在 yum 服务器上创建 yum repository(仓库),在仓库中事先存储了众多 rpm 包,以及包的相关的元数据文件(放置于特定目录 repodata 下),当 yum 客户端利用 yum&#x2F;dnf 工具进行安装时包时,会自动下载 repodata 中的元数据,查询远数据是否存在相关的包及依赖关系,自动从仓库中找到相关包下载并安装</p>
<h3 id="yum-客户端配置"><a href="#yum-客户端配置" class="headerlink" title="yum 客户端配置"></a>yum 客户端配置</h3><p>配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/yum.conf</span><br><span class="line">/etc/yum.repos.d/*.repo</span><br></pre></td></tr></table></figure>

<p>&#x2F;etc&#x2F;yum.conf 这个文件不用动，如果要改，就改 &#x2F;etc&#x2F;yum.repos.d&#x2F;</p>
<p>&#x2F;etc&#x2F;yum.repos.d&#x2F;*.repo，每个 repo 文件都记录了不同的仓库</p>
<p>CentOS-Base.repo</p>
<p>访问 mirrorlist，返回的是多个 baseurl，所以可以不设置 mirrorlist，只设置 baseurl，可以设置多个 baseurl<br><img data-src="//img.to2b.cn/blog/ljk/1597460963538.png"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">failovermethod    <span class="comment"># 随机访问baseurl还是顺序访问</span></span><br><span class="line"> roundrobin    <span class="comment"># 意为随机挑选，默认值</span></span><br><span class="line"> priority      <span class="comment"># 按顺序访问</span></span><br><span class="line"><span class="built_in">enable</span>            <span class="comment"># 开启或禁用，不写默认就是开启</span></span><br><span class="line">gpgcheck          <span class="comment"># 是否需要校验，校验的key就是gpgkey</span></span><br><span class="line">gpgkey            <span class="comment"># 校验的key</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$releasever</span>    <span class="comment"># 当前OS的发行版的主版本号,如:8,7,6</span></span><br><span class="line"><span class="variable">$arch</span>          <span class="comment"># CPU架构,如:aarch64, i586, i686,x86_64等</span></span><br><span class="line"><span class="variable">$basearch</span>      <span class="comment"># 系统基础平台;i386, x86_64</span></span><br><span class="line"><span class="variable">$contentdir</span>    <span class="comment"># 表示目录,比如:centos-8,centos-7</span></span><br><span class="line"><span class="variable">$YUM0</span>-<span class="variable">$YUM9</span>    <span class="comment"># 自定义变量</span></span><br></pre></td></tr></table></figure>

<p>什么是 epel？<br>extra packages for enterprise linux，是基于 Fedora 的一个项目，为“红帽系”的操作系统提供额外的软件包，适用于 RHEL、CentOS 和 Scientific Linux，可以理解为是一个第三方源</p>
<h4 id="常见-baseurl"><a href="#常见-baseurl" class="headerlink" title="常见 baseurl"></a>常见 baseurl</h4><p>centos</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">http://mirrors.163.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">http://mirrors.huaweicloud.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br></pre></td></tr></table></figure>

<p>epel centos7</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://mirrors.aliyun.com/epel/7/<span class="variable">$basearch</span></span><br><span class="line">http://mirrors.huaweicloud.com/epel/7/<span class="variable">$basearch</span></span><br><span class="line">http://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="variable">$basearch</span></span><br></pre></td></tr></table></figure>

<p>epel centos8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://mirrors.aliyun.com/epel/8/Everything/<span class="variable">$basearch</span></span><br><span class="line">http://mirrors.huaweicloud.com/epel/8/Everything/<span class="variable">$basearch</span></span><br><span class="line">http://mirrors.tuna.tsinghua.edu.cn/epel/8/Everything/<span class="variable">$basearch</span></span><br></pre></td></tr></table></figure>

<p>注意：yum 仓库指向的路径一定必须是 repodata 目录所在目录</p>
<h2 id="yum-命令"><a href="#yum-命令" class="headerlink" title="yum 命令"></a>yum 命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum [options] [<span class="built_in">command</span>] [package ...]</span><br></pre></td></tr></table></figure>

<h3 id="options"><a href="#options" class="headerlink" title="options"></a>options</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-y                     <span class="comment">#自动回答为“yes”</span></span><br><span class="line">-q                     <span class="comment">#静默模式</span></span><br><span class="line">--nogpgcheck           <span class="comment">#跳过gpg check</span></span><br><span class="line">--enablerepo=&lt;repoid&gt;  <span class="comment">#临时启用指定repo,支持通配符,如:&quot;*&quot;</span></span><br><span class="line">--disablerepo=&lt;repoid&gt; <span class="comment">#临时禁用指定repo,支持通配符,如:&quot;*&quot;,和--repo互斥</span></span><br><span class="line">--noplugins            <span class="comment">#禁用所有插件</span></span><br><span class="line">--showduplicates       <span class="comment">#显示仓库中所有的包，主要与list和search等子命令搭配使用</span></span><br></pre></td></tr></table></figure>

<h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><p>在 centos8 中(centos7&#x2F;6 不行)，yum 然后 tab 可以列出 yum 部分常用的子命令，注意不是全部</p>
<p><img data-src="//img.to2b.cn/blog/ljk/1597543416977.png"></p>
<p>详细的命令解析参考<code>man dnf</code>或<code>man yum</code>，但是 man 手册的内容太多了，我们只记 yum 的常用用法就可以了，毕竟 yum 只是用来解决编译安装的依赖问题。</p>
<p>以下是常用的子命令：</p>
<h4 id="repolist"><a href="#repolist" class="headerlink" title="repolist"></a>repolist</h4><p>显示仓库列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist [all|enabled|disabled]</span><br></pre></td></tr></table></figure>

<h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>显示程序包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum list</span><br><span class="line">yum list [all | glob_exp1] [glob_exp2] [...]</span><br><span class="line">yum list &#123;available|installed|updates&#125; [glob_exp1] [...]</span><br></pre></td></tr></table></figure>

<h4 id="install-and-reinstall"><a href="#install-and-reinstall" class="headerlink" title="install and reinstall"></a>install and reinstall</h4><p>安装和重新安装程序包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install package1 [package2] [...] <span class="comment"># 安装</span></span><br><span class="line">yum reinstall package1 [package2] [...] <span class="comment"># 重新安装</span></span><br></pre></td></tr></table></figure>

<p>–downloadonly：只下载相关的 rpm 包，默认下载到 var&#x2F;cache&#x2F;yum&#x2F;x86_64&#x2F;7 目录下，不执行安装动作<br>–downloaddir&#x3D;<path>，–destdir&#x3D;<path>：配合–downloadonly，指定下载的路径，如果不存在则自动创建</p>
<h4 id="remove-or-erase"><a href="#remove-or-erase" class="headerlink" title="remove or erase"></a>remove or erase</h4><p>卸载程序包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove | erase package1 [package2] [...]</span><br></pre></td></tr></table></figure>

<h4 id="update-and-downgrade"><a href="#update-and-downgrade" class="headerlink" title="update and downgrade"></a>update and downgrade</h4><p>检查可用升级</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum check-update</span><br></pre></td></tr></table></figure>

<p>升级和降级</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum upgrade|update [package1] [package2] [...]</span><br><span class="line">yum upgrade-minimal <span class="comment"># 最小化升级</span></span><br><span class="line">yum downgrade package1 [package2] [...] <span class="comment"># 降级</span></span><br></pre></td></tr></table></figure>

<h4 id="查看包的详细信息"><a href="#查看包的详细信息" class="headerlink" title="查看包的详细信息"></a>查看包的详细信息</h4><p>info、provides|whatprovides、search、deplist、repoquery</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum info [...]</span><br></pre></td></tr></table></figure>

<p>查看指定的特性（可以是某文件）是由哪个程序包提供的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum provides | whatprovides feature1 [feature2] [...]</span><br></pre></td></tr></table></figure>

<p>主义文件要写全路径，而不是只是文件名，可以使用通配符，例如：<code>yum provides */vsftpd.conf</code></p>
<p>以指定的关键字搜索程序包及 summary 信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum search string1 [string2] [...]</span><br></pre></td></tr></table></figure>

<p>查看指定包所依赖的 capabilities：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum deplist package1 [package2] [...]</span><br></pre></td></tr></table></figure>

<p>扩展： centos8 查看未安装包的文件列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dnf repoquery package</span><br><span class="line">dnf repoquery -l package</span><br></pre></td></tr></table></figure>

<p>扩展： centos7 查看未安装包的文件列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install yum-utils</span><br><span class="line">repoquery -q package</span><br><span class="line">repoquery -ql package</span><br></pre></td></tr></table></figure>

<h4 id="clean-and-makecache"><a href="#clean-and-makecache" class="headerlink" title="clean and makecache"></a>clean and makecache</h4><p>清除&#x2F;var&#x2F;cache&#x2F;yum 缓存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum clean [ packages | metadata | expire-cache | rpmdb | plugins | all ]</span><br></pre></td></tr></table></figure>

<p>构建缓存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># yum clean all; yum makecache</span></span><br></pre></td></tr></table></figure>

<h4 id="history"><a href="#history" class="headerlink" title="history"></a>history</h4><p>事务历史</p>
<p>centos7 及以前的版本日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/log/yum.log</span><br></pre></td></tr></table></figure>

<p>centos8 版本日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/var/log/dnf.rpm.log</span><br><span class="line">/var/log/dnf.log</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="built_in">history</span> [info|list|packages-list|packages-info|summary|addon-info|redo|undo|rollback|new|<span class="built_in">sync</span>|stats]</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]<span class="comment"># dnf history</span></span><br><span class="line">ID     | Command line             | Date and time    | Action(s)      | Altered</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">     4 | install lrzsz            | 2020-08-15 09:58 | Install        |    1</span><br><span class="line">     3 | install -y autofs        | 2020-08-15 09:05 | Install        |    1</span><br><span class="line">     2 | install vim wget -y      | 2020-08-15 08:03 | Install        |    5</span><br><span class="line">     1 |                          | 2020-07-29 05:12 | Install        |  455 EE</span><br><span class="line">[root@centos8 ~]<span class="comment"># dnf history info 4</span></span><br><span class="line">Transaction ID : 4</span><br><span class="line">Begin time     : Sat 15 Aug 2020 09:58:11 AM EDT</span><br><span class="line">Begin rpmdb    : 455:2fec96053059825d1e35cd07ef7f27130b90a171</span><br><span class="line">End time       : Sat 15 Aug 2020 09:58:11 AM EDT (0 seconds)</span><br><span class="line">End rpmdb      : 456:d9d289d9345ad932d7563415cf622772184a6e92</span><br><span class="line">User           : root &lt;root&gt;</span><br><span class="line">Return-Code    : Success</span><br><span class="line">Releasever     : 8</span><br><span class="line">Command Line   : install lrzsz</span><br><span class="line">Packages Altered:</span><br><span class="line">    Install lrzsz-0.12.20-43.el8.x86_64 @BaseOS</span><br></pre></td></tr></table></figure>

<h4 id="localinstall-or-install"><a href="#localinstall-or-install" class="headerlink" title="localinstall or install"></a>localinstall or install</h4><p>安装及升级本地程序包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall|install rpmfile1 [rpmfile2] [...]</span><br><span class="line">yum localupdate|update rpmfile1 [rpmfile2] [...]</span><br></pre></td></tr></table></figure>

<h4 id="查看包的安全警告"><a href="#查看包的安全警告" class="headerlink" title="查看包的安全警告"></a>查看包的安全警告</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum updateinfo --summary|--list|--info</span><br></pre></td></tr></table></figure>

<h4 id="包组管理相关"><a href="#包组管理相关" class="headerlink" title="包组管理相关"></a>包组管理相关</h4><p>groupinstall、groupupdate、grouplist、groupremove、groupinfo</p>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/826.html">什么是软件包组？</a><br>简单说就是功能相对集中的软件包集合，例如，在初始安装 Linux 时没有安装图形界面，但后来发现需要图形界面的支持，这时可以手工安装图形界面软件组（Server with GUI、GNOME），这样就可以支持图形界面了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum grouplist [hidden] [groupwildcard] [...]</span><br><span class="line">yum groupinstall group1 [group2] [...]</span><br><span class="line">yum groupupdate group1 [group2] [...]</span><br><span class="line">yum groupremove group1 [group2] [...]</span><br><span class="line">yum groupinfo group1 [...]</span><br></pre></td></tr></table></figure>

<h3 id="实现私有-yum-仓库"><a href="#实现私有-yum-仓库" class="headerlink" title="实现私有 yum 仓库"></a>实现私有 yum 仓库</h3><p>服务端：</p>
<ol>
<li>将远程仓库的 rpm 包和 meta 同步到本地</li>
<li>安装 http 或 https 或 ftp 或 file 服务，使客户端可以访问</li>
</ol>
<p>客户端：</p>
<ol>
<li>修改配置文件，将远程仓库地址修改为私有的仓库地址</li>
</ol>
<p>具体实现：</p>
<h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h4><p>服务端环境为 CentOS7，配置 yum 和 apt 私有仓库</p>
<ol>
<li>创建目录</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 mirrors]<span class="comment"># pwd</span></span><br><span class="line">/data/mirrors</span><br><span class="line">[root@centos7 mirrors]<span class="comment"># tree</span></span><br><span class="line">.</span><br><span class="line">├── centos</span><br><span class="line">│   ├── 6</span><br><span class="line">│   │   └── x86_64</span><br><span class="line">│   ├── 7</span><br><span class="line">│   │   └── x86_64</span><br><span class="line">│   └── 8</span><br><span class="line">│       └── x86_64</span><br><span class="line">├── epel</span><br><span class="line">│   ├── 6</span><br><span class="line">│   │   └── x86_64</span><br><span class="line">│   ├── 7</span><br><span class="line">│   │   └── x86_64</span><br><span class="line">│   └── 8</span><br><span class="line">│       └── x86_64</span><br><span class="line">└── ubuntu</span><br><span class="line">    ├── 18.04</span><br><span class="line">    │   └── x86_64</span><br><span class="line">    └── 20.04</span><br><span class="line">        └── x86_64</span><br><span class="line"></span><br><span class="line">19 directories, 0 files</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>安装 ngnix，配置路径</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location /mirrors &#123;</span><br><span class="line">    root /data;</span><br><span class="line">    autoindex on;</span><br><span class="line">    autoindex_exact_size on;</span><br><span class="line">    autoindex_localtime on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="//img.to2b.cn/blog/ljk/1597673044262.png"></p>
<ol start="3">
<li>配置服务端的 yum 远程仓库国内的镜像源<br>centos7</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/yum.repos.d/tmp.repo</span></span><br><span class="line">[base]</span><br><span class="line">name=base repo</span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.163.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.huaweicloud.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">        http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0 <span class="comment"># 方便下载，先禁止校验</span></span><br><span class="line"><span class="comment"># gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span></span><br></pre></td></tr></table></figure>

<p>ubuntu18.04</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>将远程仓库的 rpm 包和 meta 同步到本地<br>centos 使用 reposync，centos8 的 dnf 集成，centos7 来自 yum-utils；ubuntu 使用 apt-mirror，yum 无法安装这个命令，所以可以在 ubuntu 的机器上同步完后，拷贝到 centos 的机器上。如果服务端的环境是 ubuntu，apt 则可以直接安装 apt-mirror 和 reposync 命令。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf reposync --repoid=epel --download-metadata -p /data/mirrors/epel/7/x86_64</span><br></pre></td></tr></table></figure>

<p>以上命令是把整个 epel 仓库同步过来，大约有一万多个包。<br>如果想自定义仓库，控制仓库中有哪些包，以及每个包的版本，可以使用<code>yum install --downloadonly</code>下载<br>指定的 rpm 包，或者去官网等渠道下载想要的版本的包，将这些包放到指定目录下：<code>/data/mirror/centos&#123;6,7,8&#125;/x86_64</code>，<br>然后执行<code>createrepo /data/mirror/centos&#123;6,7,8&#125;/x86_64</code>即可生产元数据 repodata，当仓库的包有变动，重新执行<code>createrepo</code>命令即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 x86_64]<span class="comment">#yum install --downloadonly --downloaddir=./ php mysql nginx httpd</span></span><br><span class="line">[root@centos7 x86_64]<span class="comment">#ll</span></span><br><span class="line">total 17724</span><br><span class="line">-rw-r--r--. 1 root root  105968 Aug 23  2019 apr-1.4.8-5.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   94132 Jul  4  2014 apr-util-1.5.2-6.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root 2843664 Apr  4 04:53 httpd-2.4.6-93.el7.centos.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   94308 Apr  4 04:53 httpd-tools-2.4.6-93.el7.centos.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   49644 Jul  4  2014 libzip-0.10.1-8.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   31264 Jul  4  2014 mailcap-2.1.41-2.el7.noarch.rpm</span><br><span class="line">-rw-r--r--. 1 root root 9169616 Apr  4 05:01 mariadb-5.5.65-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root  575413 Oct  4  2019 nginx-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   19857 Oct  4  2019 nginx-all-modules-1.16.1-1.el7.noarch.rpm</span><br><span class="line">-rw-r--r--. 1 root root   30445 Oct  4  2019 nginx-mod-http-image-filter-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   39849 Oct  4  2019 nginx-mod-http-perl-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   29613 Oct  4  2019 nginx-mod-http-xslt-filter-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   58301 Oct  4  2019 nginx-mod-mail-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   86465 Oct  4  2019 nginx-mod-stream-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root 1421660 Apr  4 05:04 php-5.4.16-48.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root 2880032 Apr  4 05:04 php-cli-5.4.16-48.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root  578968 Apr  4 05:04 php-common-5.4.16-48.el7.x86_64.rpm</span><br><span class="line">[root@centos7 x86_64]<span class="comment">#createrepo ./</span></span><br><span class="line">Spawning worker 0 with 17 pkgs</span><br><span class="line">Workers Finished</span><br><span class="line">Saving Primary metadata</span><br><span class="line">Saving file lists metadata</span><br><span class="line">Saving other metadata</span><br><span class="line">Generating sqlite DBs</span><br><span class="line">Sqlite DBs complete</span><br><span class="line">[root@centos7 x86_64]<span class="comment">#ll</span></span><br><span class="line">total 17728</span><br><span class="line">-rw-r--r--. 1 root root  105968 Aug 23  2019 apr-1.4.8-5.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   94132 Jul  4  2014 apr-util-1.5.2-6.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root 2843664 Apr  4 04:53 httpd-2.4.6-93.el7.centos.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   94308 Apr  4 04:53 httpd-tools-2.4.6-93.el7.centos.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   49644 Jul  4  2014 libzip-0.10.1-8.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   31264 Jul  4  2014 mailcap-2.1.41-2.el7.noarch.rpm</span><br><span class="line">-rw-r--r--. 1 root root 9169616 Apr  4 05:01 mariadb-5.5.65-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root  575413 Oct  4  2019 nginx-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   19857 Oct  4  2019 nginx-all-modules-1.16.1-1.el7.noarch.rpm</span><br><span class="line">-rw-r--r--. 1 root root   30445 Oct  4  2019 nginx-mod-http-image-filter-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   39849 Oct  4  2019 nginx-mod-http-perl-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   29613 Oct  4  2019 nginx-mod-http-xslt-filter-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   58301 Oct  4  2019 nginx-mod-mail-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root   86465 Oct  4  2019 nginx-mod-stream-1.16.1-1.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root 1421660 Apr  4 05:04 php-5.4.16-48.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root 2880032 Apr  4 05:04 php-cli-5.4.16-48.el7.x86_64.rpm</span><br><span class="line">-rw-r--r--. 1 root root  578968 Apr  4 05:04 php-common-5.4.16-48.el7.x86_64.rpm</span><br><span class="line">drwxr-xr-x. 2 root root    4096 Aug 18 15:33 repodata</span><br></pre></td></tr></table></figure>

<h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><ol>
<li>修改配置文件 <code>/etc/yum.repos.d/base.repo</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[base]</span><br><span class="line">name=base repo</span><br><span class="line">baseurl=http://10.0.0.100/mirrors/centos/7/x86_64</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>重新生产缓存</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum clean all; yum makecache</span><br></pre></td></tr></table></figure>

<h2 id="Ubuntu-软件管理"><a href="#Ubuntu-软件管理" class="headerlink" title="Ubuntu 软件管理"></a>Ubuntu 软件管理</h2><p>Ubuntu 下，dpkg 类似 rpm，apt 类似 yum</p>
<h3 id="dpkg-常见用法"><a href="#dpkg-常见用法" class="headerlink" title="dpkg 常见用法"></a>dpkg 常见用法</h3><p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i package.deb</span><br></pre></td></tr></table></figure>

<p>卸载，不建议，不自动卸载依赖于它的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dpkg -r package</span><br><span class="line">dpkg -P package  <span class="comment"># 同时删除配置文件</span></span><br></pre></td></tr></table></figure>

<p>列出当前已安装的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l</span><br></pre></td></tr></table></figure>

<p>显示该包的简要说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l package</span><br></pre></td></tr></table></figure>

<p>列出该包的状态，包括详细信息，类似 rpm -qi</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -s package</span><br></pre></td></tr></table></figure>

<p>列出该包中所包含的文件，类似 rpm -ql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -L package</span><br></pre></td></tr></table></figure>

<p>搜索包含 pattern 的包，类似 rpm –qf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -S &lt;pattern&gt;</span><br></pre></td></tr></table></figure>

<p>列出 deb 包的内容，类似 rpm –qpl</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -c package.deb</span><br></pre></td></tr></table></figure>

<p>解开 deb 包的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg --unpack package.deb</span><br></pre></td></tr></table></figure>

<h3 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h3><p>apt 与 apt-get 有一些类似的命令选项，但它并不能完全向下兼容 apt-get 命令,也即可用 apt 替换部分 apt-get 系列命令，但不是全部</p>
<table>
<thead>
<tr>
<th>apt 命令</th>
<th>被取代的命令</th>
<th>命令的功能</th>
</tr>
</thead>
<tbody><tr>
<td>apt install</td>
<td>apt-get install</td>
<td>安装软件包</td>
</tr>
<tr>
<td>apt remove</td>
<td>apt-get remove</td>
<td>移除软件包</td>
</tr>
<tr>
<td>apt purge</td>
<td>apt-get purge</td>
<td>移除软件包及配置文件</td>
</tr>
<tr>
<td>apt update</td>
<td>apt-get update</td>
<td>刷新存储库索引</td>
</tr>
<tr>
<td>apt upgrade</td>
<td>apt-get upgrade</td>
<td>升级所有可升级的软件包</td>
</tr>
<tr>
<td>apt autoremove</td>
<td>apt-get autoremove</td>
<td>自动删除不需要的包</td>
</tr>
<tr>
<td>apt full-upgrade</td>
<td>apt-get dist-upgrade</td>
<td>在升级软件包时自动处理依赖关系</td>
</tr>
<tr>
<td>apt search</td>
<td>apt-cache search</td>
<td>搜索应用程序</td>
</tr>
<tr>
<td>apt show</td>
<td>apt-cache show</td>
<td>显示安装细节</td>
</tr>
</tbody></table>
<h4 id="卸载软件包："><a href="#卸载软件包：" class="headerlink" title="卸载软件包："></a>卸载软件包：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt purge package</span><br><span class="line">sudo apt autoremove</span><br><span class="line">sudo apt autoclean</span><br><span class="line"><span class="comment"># dpkg -l |grep ^rc|awk &#x27;&#123;print $2&#125;&#x27; |sudo xargs dpkg -P</span></span><br></pre></td></tr></table></figure>

<h4 id="删除缓存"><a href="#删除缓存" class="headerlink" title="删除缓存"></a>删除缓存</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoclean</span><br><span class="line">sudo apt-get autoremove</span><br><span class="line">sudo apt-get clean</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160536339.png" alt="像方便面一样的男子 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160019009.png" alt="像方便面一样的男子 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 软件管理</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/tar%E5%92%8Cfind/%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BElocate%E5%92%8Cfind/" rel="prev" title="文件查找locate和find">
                  <i class="fa fa-chevron-left"></i> 文件查找locate和find
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E7%A3%81%E7%9B%98/%E7%A3%81%E7%9B%98%E5%AD%98%E5%82%A8%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" rel="next" title="磁盘存储和文件系统">
                  磁盘存储和文件系统 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18016600号-3 </a>
  </div>

<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">像方便面一样的男子</span>
</div>

    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="//s1.lujinkai.cn/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="//s1.lujinkai.cn/libs/lozad.js/1.16.0/lozad.min.js"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="//s1.lujinkai.cn/libs/algoliasearch/4.11.0/algoliasearch-lite.umd.min.js"></script>
<script src="//s1.lujinkai.cn/libs/instantsearch.js/4.36.0/instantsearch.production.min.js"></script><script src="/js/third-party/search/algolia-search.js"></script>






  





</body>
</html>
