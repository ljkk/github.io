<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="32x32" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="icon" type="image/png" sizes="16x16" href="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <link rel="mask-icon" href="//img.lujinkai.cn/blog/ljk/1607154764582.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//s1.lujinkai.cn/libs/fontawesome-free/5.15.4/css/all.min.css">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.lujinkai.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":10},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"KN3H1V8A6V","apiKey":"c5d73d0dde2dd770ce49b505f938553d","indexName":"hexo","hits":{"per_page":20,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We did not find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}}}}</script><script src="/js/config.js"></script>

    <meta name="description" content="软件运行环境POSIXPOSIX:Portable Operating System Interface 可移植操作系统接口,定义了操作系统应该为应用程序提供的接口标准,是 IEEE 为要在各种 UNIX 操作系统上运行的软件而定义的一系列 API 标准的总称。Linux 和 windows 都要实现基本的 posix 标准,程序就在源代码级别可移植了 C 语言程序的实现过程源代码-&gt;预处理">
<meta property="og:type" content="article">
<meta property="og:title" content="软件管理">
<meta property="og:url" content="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="LJKのBlog">
<meta property="og:description" content="软件运行环境POSIXPOSIX:Portable Operating System Interface 可移植操作系统接口,定义了操作系统应该为应用程序提供的接口标准,是 IEEE 为要在各种 UNIX 操作系统上运行的软件而定义的一系列 API 标准的总称。Linux 和 windows 都要实现基本的 posix 标准,程序就在源代码级别可移植了 C 语言程序的实现过程源代码-&gt;预处理">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597365779221.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597460963538.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597543416977.png">
<meta property="og:image" content="http://img.to2b.cn/blog/ljk/1597673044262.png">
<meta property="article:published_time" content="2020-12-09T14:30:02.000Z">
<meta property="article:modified_time" content="2023-05-29T08:58:05.510Z">
<meta property="article:author" content="像方便面一样的男子">
<meta property="article:tag" content="软件管理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.to2b.cn/blog/ljk/1597365779221.png">


<link rel="canonical" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/","path":"运维/基础/软件/软件管理/","title":"软件管理"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>软件管理 | LJKのBlog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">LJKのBlog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学无止境</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="nav-number">1.</span> <span class="nav-text">软件运行环境</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#POSIX"><span class="nav-number">1.1.</span> <span class="nav-text">POSIX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="nav-number">1.2.</span> <span class="nav-text">C 语言程序的实现过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%92%8C%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5"><span class="nav-number">1.3.</span> <span class="nav-text">静态链接和动态链接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ldd"><span class="nav-number">1.3.1.</span> <span class="nav-text">ldd</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="nav-number">2.</span> <span class="nav-text">软件包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">2.1.</span> <span class="nav-text">包管理器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#x2F-var-x2F-lib-x2F-rpm"><span class="nav-number">2.2.</span> <span class="nav-text">&#x2F;var&#x2F;lib&#x2F;rpm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%8C%85%E7%9A%84%E9%80%94%E5%BE%84"><span class="nav-number">2.3.</span> <span class="nav-text">获取包的途径</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8-rpm"><span class="nav-number">3.</span> <span class="nav-text">包管理器 rpm</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD"><span class="nav-number">3.2.</span> <span class="nav-text">卸载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7"><span class="nav-number">3.3.</span> <span class="nav-text">升级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%8D%E7%BA%A7"><span class="nav-number">3.4.</span> <span class="nav-text">降级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2"><span class="nav-number">3.5.</span> <span class="nav-text">查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8C"><span class="nav-number">3.6.</span> <span class="nav-text">校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%B4%E6%8A%A4"><span class="nav-number">3.7.</span> <span class="nav-text">数据库维护</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yum-%E5%92%8C-dnf"><span class="nav-number">4.</span> <span class="nav-text">yum 和 dnf</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yum-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="nav-number">4.1.</span> <span class="nav-text">yum 客户端配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81-baseurl"><span class="nav-number">4.1.1.</span> <span class="nav-text">常见 baseurl</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yum-%E5%91%BD%E4%BB%A4"><span class="nav-number">5.</span> <span class="nav-text">yum 命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#options"><span class="nav-number">5.1.</span> <span class="nav-text">options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#command"><span class="nav-number">5.2.</span> <span class="nav-text">command</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#repolist"><span class="nav-number">5.2.1.</span> <span class="nav-text">repolist</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list"><span class="nav-number">5.2.2.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#install-and-reinstall"><span class="nav-number">5.2.3.</span> <span class="nav-text">install and reinstall</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#remove-or-erase"><span class="nav-number">5.2.4.</span> <span class="nav-text">remove or erase</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#update-and-downgrade"><span class="nav-number">5.2.5.</span> <span class="nav-text">update and downgrade</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8C%85%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="nav-number">5.2.6.</span> <span class="nav-text">查看包的详细信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#clean-and-makecache"><span class="nav-number">5.2.7.</span> <span class="nav-text">clean and makecache</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#history"><span class="nav-number">5.2.8.</span> <span class="nav-text">history</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#localinstall-or-install"><span class="nav-number">5.2.9.</span> <span class="nav-text">localinstall or install</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8C%85%E7%9A%84%E5%AE%89%E5%85%A8%E8%AD%A6%E5%91%8A"><span class="nav-number">5.2.10.</span> <span class="nav-text">查看包的安全警告</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%85%E7%BB%84%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3"><span class="nav-number">5.2.11.</span> <span class="nav-text">包组管理相关</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E7%A7%81%E6%9C%89-yum-%E4%BB%93%E5%BA%93"><span class="nav-number">5.3.</span> <span class="nav-text">实现私有 yum 仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="nav-number">5.3.1.</span> <span class="nav-text">服务端</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">5.3.2.</span> <span class="nav-text">客户端</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ubuntu-%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">Ubuntu 软件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#dpkg-%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95"><span class="nav-number">6.1.</span> <span class="nav-text">dpkg 常见用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#apt"><span class="nav-number">6.2.</span> <span class="nav-text">apt</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6%E5%8C%85%EF%BC%9A"><span class="nav-number">6.2.1.</span> <span class="nav-text">卸载软件包：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%BC%93%E5%AD%98"><span class="nav-number">6.2.2.</span> <span class="nav-text">删除缓存</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="像方便面一样的男子"
      src="//img.lujinkai.cn/blog/ljk/1607154764582.png">
  <p class="site-author-name" itemprop="name">像方便面一样的男子</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">340</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">73</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ljkk" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ljkk" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.lujinkai.cn/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="//img.lujinkai.cn/blog/ljk/1607154764582.png">
      <meta itemprop="name" content="像方便面一样的男子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LJKのBlog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="软件管理 | LJKのBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          软件管理
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-09 22:30:02" itemprop="dateCreated datePublished" datetime="2020-12-09T22:30:02+08:00">2020-12-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-29 16:58:05" itemprop="dateModified" datetime="2023-05-29T16:58:05+08:00">2023-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">基础</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="软件运行环境"><a href="#软件运行环境" class="headerlink" title="软件运行环境"></a>软件运行环境</h2><h3 id="POSIX"><a href="#POSIX" class="headerlink" title="POSIX"></a>POSIX</h3><p>POSIX:Portable Operating System Interface 可移植操作系统接口,定义了操作系统应该为应用程序<br>提供的接口标准,是 IEEE 为要在各种 UNIX 操作系统上运行的软件而定义的一系列 API 标准的总称。<br>Linux 和 windows 都要实现基本的 posix 标准,程序就在源代码级别可移植了</p>
<h3 id="C-语言程序的实现过程"><a href="#C-语言程序的实现过程" class="headerlink" title="C 语言程序的实现过程"></a>C 语言程序的实现过程</h3><p>源代码-&gt;预处理-&gt;编译-&gt;汇编-&gt;链接</p>
<p>预处理：略<br>编译：将 C 转译成汇编<br>汇编：将汇编转译成机器指令<br>链接：调用链接器 ld 来链接程序运行需要的一大堆目标文件,以及所依赖的其它库文件,最后生成可执行文件</p>
<h3 id="静态链接和动态链接"><a href="#静态链接和动态链接" class="headerlink" title="静态链接和动态链接"></a>静态链接和动态链接</h3><img data-src="//img.to2b.cn/blog/ljk/1597365779221.png" style="zoom: 67%;" />

<h4 id="ldd"><a href="#ldd" class="headerlink" title="ldd"></a>ldd</h4><p>查看二进制程序所依赖的库文件</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">lujinkai@Z510:~$ ldd /bin/ls
	linux-vdso.so.1 <span class="token punctuation">(</span>0x00007fff7ccf9000<span class="token punctuation">)</span>
	libselinux.so.1 <span class="token operator">=</span><span class="token operator">></span> /lib/x86_64-linux-gnu/libselinux.so.1 <span class="token punctuation">(</span>0x00007ffadd6d3000<span class="token punctuation">)</span>
	libc.so.6 <span class="token operator">=</span><span class="token operator">></span> /lib/x86_64-linux-gnu/libc.so.6 <span class="token punctuation">(</span>0x00007ffadd2e2000<span class="token punctuation">)</span>
	libpcre.so.3 <span class="token operator">=</span><span class="token operator">></span> /lib/x86_64-linux-gnu/libpcre.so.3 <span class="token punctuation">(</span>0x00007ffadd070000<span class="token punctuation">)</span>
	libdl.so.2 <span class="token operator">=</span><span class="token operator">></span> /lib/x86_64-linux-gnu/libdl.so.2 <span class="token punctuation">(</span>0x00007ffadce6c000<span class="token punctuation">)</span>
	/lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007ffaddb1d000<span class="token punctuation">)</span>
	libpthread.so.0 <span class="token operator">=</span><span class="token operator">></span> /lib/x86_64-linux-gnu/libpthread.so.0 <span class="token punctuation">(</span>0x00007ffadcc4d000<span class="token punctuation">)</span></code></pre>

<p>动态库路径的配置文件：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">/etc/ld.so.conf
/etc/ld.so.conf.d/*.conf</code></pre>

<p>将配置文件规定的路径下的库文件加载到缓存文件（字典）</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ldconfig</code></pre>

<p>缓存文件（字典）</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">lujinkai@Z510:~$ ll /etc/ld.so.cache
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">81473</span> Aug <span class="token number">14</span> 08:47 /etc/ld.so.cache
lujinkai@Z510:~$ <span class="token function">file</span> <span class="token operator">!</span>$
<span class="token function">file</span> /etc/ld.so.cache
/etc/ld.so.cache: data</code></pre>

<p>查看缓存文件（字典）<br>显示所有可用库文件名及文件路径映射关系</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ldconfig <span class="token parameter variable">-p</span></code></pre>

<p>程序执行时会去 ld.so.cache 文件查找动态库的信息，所以如果有新的库文件，需要先执行 ldconfig 将新的库文件加载到 ld.so.cache</p>
<h2 id="软件包"><a href="#软件包" class="headerlink" title="软件包"></a>软件包</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@centos7 /<span class="token punctuation">]</span><span class="token comment"># yum install -y autofs</span>
<span class="token punctuation">[</span>root@centos7 /<span class="token punctuation">]</span><span class="token comment"># systemctl start autofs</span>
<span class="token punctuation">[</span>root@centos7 /<span class="token punctuation">]</span><span class="token comment"># cd /misc/cd</span>
<span class="token punctuation">[</span>root@centos7 cd<span class="token punctuation">]</span><span class="token comment"># ls</span>
CentOS_BuildTag  GPL       LiveOS    RPM-GPG-KEY-CentOS-7
EFI              images    Packages  RPM-GPG-KEY-CentOS-Testing-7
EULA             isolinux  repodata  TRANS.TBL
<span class="token punctuation">[</span>root@centos7 cd<span class="token punctuation">]</span><span class="token comment"># cd Packages/</span>
<span class="token punctuation">[</span>root@centos7 Packages<span class="token punctuation">]</span><span class="token comment"># ls</span>
acl-2.2.51-15.el7.x86_64.rpm
aic94xx-firmware-30-6.el7.noarch.rpm
aide-0.15.1-13.el7.x86_64.rpm
alsa-firmware-1.0.28-2.el7.noarch.rpm
alsa-lib-1.1.8-1.el7.x86_64.rpm
alsa-tools-firmware-1.1.0-1.el7.x86_64.rpm
<span class="token punctuation">..</span>.
<span class="token punctuation">..</span>.

<span class="token comment"># 预览包内文件</span>
<span class="token punctuation">[</span>root@centos7 Packages<span class="token punctuation">]</span><span class="token comment"># rpm2cpio zip-3.0-11.el7.x86_64.rpm | cpio -itv</span>
-rwxr-xr-x   <span class="token number">1</span> root     root       <span class="token number">215840</span> Nov  <span class="token number">6</span>  <span class="token number">2016</span> ./usr/bin/zip
-rwxr-xr-x   <span class="token number">1</span> root     root       <span class="token number">100456</span> Nov  <span class="token number">6</span>  <span class="token number">2016</span> ./usr/bin/zipcloak
-rwxr-xr-x   <span class="token number">1</span> root     root        <span class="token number">95984</span> Nov  <span class="token number">6</span>  <span class="token number">2016</span> ./usr/bin/zipnote
-rwxr-xr-x   <span class="token number">1</span> root     root       <span class="token number">100096</span> Nov  <span class="token number">6</span>  <span class="token number">2016</span> ./usr/bin/zipsplit
drwxr-xr-x   <span class="token number">2</span> root     root            <span class="token number">0</span> Nov  <span class="token number">6</span>  <span class="token number">2016</span> ./usr/share/doc/zip-3.0
-rw-r--r--   <span class="token number">1</span> root     root       <span class="token number">210354</span> Jul  <span class="token number">6</span>  <span class="token number">2008</span> ./usr/share/doc/zip-3.0/CHANGES
-rw-r--r--   <span class="token number">1</span> root     root         <span class="token number">3412</span> Mar  <span class="token number">4</span>  <span class="token number">2007</span> ./usr/share/doc/zip-3.0/LICENSE
-rw-r--r--   <span class="token number">1</span> root     root        <span class="token number">12748</span> Jun <span class="token number">26</span>  <span class="token number">2008</span> ./usr/share/doc/zip-3.0/README
-rw-r--r--   <span class="token number">1</span> root     root         <span class="token number">6430</span> Mar <span class="token number">26</span>  <span class="token number">2008</span> ./usr/share/doc/zip-3.0/README.CR
-rw-r--r--   <span class="token number">1</span> root     root         <span class="token number">6675</span> Jun <span class="token number">13</span>  <span class="token number">2008</span> ./usr/share/doc/zip-3.0/TODO
-rw-r--r--   <span class="token number">1</span> root     root        <span class="token number">15731</span> Jul  <span class="token number">2</span>  <span class="token number">2008</span> ./usr/share/doc/zip-3.0/WHATSNEW
-rw-r--r--   <span class="token number">1</span> root     root        <span class="token number">13167</span> Jun <span class="token number">13</span>  <span class="token number">2008</span> ./usr/share/doc/zip-3.0/WHERE
-rw-r--r--   <span class="token number">1</span> root     root         <span class="token number">3395</span> Dec <span class="token number">14</span>  <span class="token number">1996</span> ./usr/share/doc/zip-3.0/algorith.txt
-rw-r--r--   <span class="token number">1</span> root     root        <span class="token number">28496</span> Jun <span class="token number">17</span>  <span class="token number">2008</span> ./usr/share/man/man1/zip.1.gz
-rw-r--r--   <span class="token number">1</span> root     root          <span class="token number">951</span> May  <span class="token number">8</span>  <span class="token number">2008</span> ./usr/share/man/man1/zipcloak.1.gz
-rw-r--r--   <span class="token number">1</span> root     root          <span class="token number">819</span> Nov  <span class="token number">6</span>  <span class="token number">2016</span> ./usr/share/man/man1/zipnote.1.gz
-rw-r--r--   <span class="token number">1</span> root     root          <span class="token number">619</span> Nov  <span class="token number">6</span>  <span class="token number">2016</span> ./usr/share/man/man1/zipsplit.1.gz
<span class="token number">1598</span> blocks</code></pre>

<p>范例：统计 rpm 的架构类型及相应的包管理器</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@centos7 Packages<span class="token punctuation">]</span><span class="token comment"># ls *.rpm | sed -En "s/.*\.(.*)\.rpm/\1/p" | sort | uniq -c | sort -nr</span>
    <span class="token number">381</span> x86_64
     <span class="token number">65</span> noarch
<span class="token punctuation">[</span>root@centos7 Packages<span class="token punctuation">]</span><span class="token comment"># ls *.rpm | rev | cut -d. -f2 | rev | sort | uniq -c | sort -nr</span>
    <span class="token number">381</span> x86_64
     <span class="token number">65</span> noarch
<span class="token punctuation">[</span>root@centos7 Packages<span class="token punctuation">]</span><span class="token comment"># ls *.rpm | grep -Eo "[^.]+\.rpm$" | grep -Eo "^[^.]+" | sort | uniq -c | sort -nr</span>
    <span class="token number">381</span> x86_64
     <span class="token number">65</span> noarch</code></pre>

<h3 id="包管理器"><a href="#包管理器" class="headerlink" title="包管理器"></a>包管理器</h3><ul>
<li>redhat：rpm 文件，rpm 包管理器</li>
<li>debian：deb 文件，dpkg 包管理器</li>
</ul>
<h3 id="x2F-var-x2F-lib-x2F-rpm"><a href="#x2F-var-x2F-lib-x2F-rpm" class="headerlink" title="&#x2F;var&#x2F;lib&#x2F;rpm"></a>&#x2F;var&#x2F;lib&#x2F;rpm</h3><p>当安装完一个包后，包的信息会存储到一个数据库中，这数据库中信息是所有包共享的，所以叫共享数据库：&#x2F;var&#x2F;lib&#x2F;rpm，这里面记录了当前主机上安装好的各种 rpm 包，包括它们的名称、版本、依赖关系、功能说明、包安装后生成的各文件路径及校验码信息。</p>
<p>这个数据库很重要，一旦破坏，就无法安装卸载软件，当使用 rpm 安装软件的时候，会查询这个数据库，如果已经安装，就提示已安装。</p>
<h3 id="获取包的途径"><a href="#获取包的途径" class="headerlink" title="获取包的途径"></a>获取包的途径</h3><p>光盘：<br><a target="_blank" rel="noopener" href="http://mirrors.163.com/centos/">http://mirrors.163.com/centos/</a><br><a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos/">https://mirrors.aliyun.com/centos/</a><br><a target="_blank" rel="noopener" href="http://mirrors.163.com/ubuntu-releases/">http://mirrors.163.com/ubuntu-releases/</a><br><a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/ubuntu-releases/">https://mirrors.aliyun.com/ubuntu-releases/</a></p>
<h2 id="包管理器-rpm"><a href="#包管理器-rpm" class="headerlink" title="包管理器 rpm"></a>包管理器 rpm</h2><p>安装、卸载、升级、查询、校验、数据库维护</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> PACKAGE_FILE<span class="token punctuation">..</span>.

<span class="token parameter variable">-i</span>    <span class="token comment"># install</span>
<span class="token parameter variable">-v</span>    <span class="token comment"># 显示详细的信息</span>
<span class="token parameter variable">-h</span>    <span class="token comment"># 显示进度</span></code></pre>

<h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">-e</span> PACKAGE_FILE<span class="token punctuation">..</span>. <span class="token punctuation">[</span>--nodeps<span class="token punctuation">]</span>

<span class="token parameter variable">-e</span>        <span class="token comment"># 卸载</span>
<span class="token parameter variable">--nodeps</span>  <span class="token comment"># 忽略依赖关系</span></code></pre>

<h3 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> PACKAGE_FILE<span class="token punctuation">..</span>.
<span class="token function">rpm</span> <span class="token parameter variable">-Fvh</span> PACKAGE_FILE<span class="token punctuation">..</span>.

<span class="token parameter variable">-U</span>      <span class="token comment"># upgrade 例如要升级php，如果本机已安装php，则升级，如果本机没有php，则安装</span>
<span class="token parameter variable">-F</span>      <span class="token comment"># freshen 例如要升级php，如果本机已安装php，则升级，如果本机没有php，则不执行任何操作</span>
<span class="token parameter variable">--force</span> <span class="token comment"># 强制安装</span></code></pre>

<p>注意：</p>
<ol>
<li>不要对内核做升级操作；Linux 支持多内核并存，因此直接安装新版本内核</li>
<li>如果原程序的配置文件被修改，升级时，新版本提供的同以配置文件不会直接覆盖，而是把新版本的配置文件重命名（filename.rpmnew）后保留</li>
</ol>
<h3 id="降级"><a href="#降级" class="headerlink" title="降级"></a>降级</h3><p>在升级的命令上添加 –oldpackage 即可</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> <span class="token parameter variable">--oldpackage</span> PACKAGE_FILE<span class="token punctuation">..</span>.
<span class="token function">rpm</span> <span class="token parameter variable">-Fvh</span> <span class="token parameter variable">--oldpackage</span> PACKAGE_FILE<span class="token punctuation">..</span>.</code></pre>

<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token punctuation">&#123;</span>-q<span class="token operator">|</span>--query<span class="token punctuation">&#125;</span> <span class="token punctuation">[</span>select-options<span class="token punctuation">]</span> <span class="token punctuation">[</span>query-options<span class="token punctuation">]</span></code></pre>

<p>常用查询语法</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token parameter variable">-q</span> PACKAGE
<span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'pattern'</span>
<span class="token parameter variable">-qi</span> PACKAGE
<span class="token parameter variable">-qc</span> PACKAGE
<span class="token parameter variable">-ql</span> PACKAGE
<span class="token parameter variable">-qd</span> PACKAGE
<span class="token parameter variable">-q</span> <span class="token parameter variable">--scripts</span> PACKAGE
<span class="token parameter variable">-qf</span> <span class="token function">file</span>
<span class="token parameter variable">-qpi</span> PACKAGE_FILE
<span class="token parameter variable">-qpl</span> PACKAGE_FILE, <span class="token punctuation">..</span>.

<span class="token parameter variable">-a</span>         <span class="token comment"># 所有已安装的包</span>
<span class="token parameter variable">-f</span>         <span class="token comment"># 文件是由哪个包安装生成的</span>
<span class="token parameter variable">-p</span> rpmfile <span class="token comment"># 尚未安装的包文件，以下-c、-d、-i、-l、--script默认只查询已安装的包，如果要查询未安装的包的相关信息，需要配合-p选项</span>
<span class="token parameter variable">-c</span>         <span class="token comment"># 程序的配置文件</span>
<span class="token parameter variable">-d</span>         <span class="token comment"># 程序的文档</span>
<span class="token parameter variable">-i</span>         <span class="token comment"># information</span>
<span class="token parameter variable">-l</span>         <span class="token comment"># 安装后生成的所有文件</span>
<span class="token parameter variable">--scripts</span>  <span class="token comment"># 包自带的脚本文件</span></code></pre>

<h3 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h3><p>占位。。。</p>
<h3 id="数据库维护"><a href="#数据库维护" class="headerlink" title="数据库维护"></a>数据库维护</h3><p>&#x2F;var&#x2F;lib&#x2F;rpm</p>
<h2 id="yum-和-dnf"><a href="#yum-和-dnf" class="headerlink" title="yum 和 dnf"></a>yum 和 dnf</h2><p>rpm 不能解决包的依赖关系，yum 和 dnf 可以，yum 适用 centos7，dnf 适用 centos8，以下只介绍 yum，dnf 也都一样</p>
<p>yum：服务器存放 rpm 包和包相关的元数据库</p>
<p>yum 实现过程：</p>
<p>先在 yum 服务器上创建 yum repository(仓库),在仓库中事先存储了众多 rpm 包,以及包的相关的元数据文件(放置于特定目录 repodata 下),当 yum 客户端利用 yum&#x2F;dnf 工具进行安装时包时,会自动下载 repodata 中的元数据,查询远数据是否存在相关的包及依赖关系,自动从仓库中找到相关包下载并安装</p>
<h3 id="yum-客户端配置"><a href="#yum-客户端配置" class="headerlink" title="yum 客户端配置"></a>yum 客户端配置</h3><p>配置文件</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">/etc/yum.conf
/etc/yum.repos.d/*.repo</code></pre>

<p>&#x2F;etc&#x2F;yum.conf 这个文件不用动，如果要改，就改 &#x2F;etc&#x2F;yum.repos.d&#x2F;</p>
<p>&#x2F;etc&#x2F;yum.repos.d&#x2F;*.repo，每个 repo 文件都记录了不同的仓库</p>
<p>CentOS-Base.repo</p>
<p>访问 mirrorlist，返回的是多个 baseurl，所以可以不设置 mirrorlist，只设置 baseurl，可以设置多个 baseurl<br><img data-src="//img.to2b.cn/blog/ljk/1597460963538.png"></p>
<pre class="language-bash" data-language="bash"><code class="language-bash">failovermethod    <span class="token comment"># 随机访问baseurl还是顺序访问</span>
	roundrobin    <span class="token comment"># 意为随机挑选，默认值</span>
	priority      <span class="token comment"># 按顺序访问</span>
<span class="token builtin class-name">enable</span>            <span class="token comment"># 开启或禁用，不写默认就是开启</span>
gpgcheck          <span class="token comment"># 是否需要校验，校验的key就是gpgkey</span>
gpgkey            <span class="token comment"># 校验的key</span>

<span class="token variable">$releasever</span>    <span class="token comment"># 当前OS的发行版的主版本号,如:8,7,6</span>
<span class="token variable">$arch</span>          <span class="token comment"># CPU架构,如:aarch64, i586, i686,x86_64等</span>
<span class="token variable">$basearch</span>      <span class="token comment"># 系统基础平台;i386, x86_64</span>
<span class="token variable">$contentdir</span>    <span class="token comment"># 表示目录,比如:centos-8,centos-7</span>
<span class="token variable">$YUM0</span>-<span class="token variable">$YUM9</span>    <span class="token comment"># 自定义变量</span></code></pre>

<p>什么是 epel？<br>extra packages for enterprise linux，是基于 Fedora 的一个项目，为“红帽系”的操作系统提供额外的软件包，适用于 RHEL、CentOS 和 Scientific Linux，可以理解为是一个第三方源</p>
<h4 id="常见-baseurl"><a href="#常见-baseurl" class="headerlink" title="常见 baseurl"></a>常见 baseurl</h4><p>centos</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">http://mirrors.aliyun.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
http://mirrors.163.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
http://mirrors.huaweicloud.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/</code></pre>

<p>epel centos7</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">http://mirrors.aliyun.com/epel/7/<span class="token variable">$basearch</span>
http://mirrors.huaweicloud.com/epel/7/<span class="token variable">$basearch</span>
http://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="token variable">$basearch</span></code></pre>

<p>epel centos8</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">http://mirrors.aliyun.com/epel/8/Everything/<span class="token variable">$basearch</span>
http://mirrors.huaweicloud.com/epel/8/Everything/<span class="token variable">$basearch</span>
http://mirrors.tuna.tsinghua.edu.cn/epel/8/Everything/<span class="token variable">$basearch</span></code></pre>

<p>注意：yum 仓库指向的路径一定必须是 repodata 目录所在目录</p>
<h2 id="yum-命令"><a href="#yum-命令" class="headerlink" title="yum 命令"></a>yum 命令</h2><pre class="language-bash" data-language="bash"><code class="language-bash">yum <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token punctuation">[</span>package <span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<h3 id="options"><a href="#options" class="headerlink" title="options"></a>options</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token parameter variable">-y</span>                     <span class="token comment">#自动回答为“yes”</span>
<span class="token parameter variable">-q</span>                     <span class="token comment">#静默模式</span>
<span class="token parameter variable">--nogpgcheck</span>           <span class="token comment">#跳过gpg check</span>
<span class="token parameter variable">--enablerepo</span><span class="token operator">=</span><span class="token operator">&lt;</span>repoid<span class="token operator">></span>  <span class="token comment">#临时启用指定repo,支持通配符,如:"*"</span>
<span class="token parameter variable">--disablerepo</span><span class="token operator">=</span><span class="token operator">&lt;</span>repoid<span class="token operator">></span> <span class="token comment">#临时禁用指定repo,支持通配符,如:"*",和--repo互斥</span>
<span class="token parameter variable">--noplugins</span>            <span class="token comment">#禁用所有插件</span>
<span class="token parameter variable">--showduplicates</span>       <span class="token comment">#显示仓库中所有的包，主要与list和search等子命令搭配使用</span></code></pre>

<h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><p>在 centos8 中(centos7&#x2F;6 不行)，yum 然后 tab 可以列出 yum 部分常用的子命令，注意不是全部</p>
<p><img data-src="//img.to2b.cn/blog/ljk/1597543416977.png"></p>
<p>详细的命令解析参考<code>man dnf</code>或<code>man yum</code>，但是 man 手册的内容太多了，我们只记 yum 的常用用法就可以了，毕竟 yum 只是用来解决编译安装的依赖问题。</p>
<p>以下是常用的子命令：</p>
<h4 id="repolist"><a href="#repolist" class="headerlink" title="repolist"></a>repolist</h4><p>显示仓库列表</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum repolist <span class="token punctuation">[</span>all<span class="token operator">|</span>enabled<span class="token operator">|</span>disabled<span class="token punctuation">]</span></code></pre>

<h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>显示程序包</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum list
yum list <span class="token punctuation">[</span>all <span class="token operator">|</span> glob_exp1<span class="token punctuation">]</span> <span class="token punctuation">[</span>glob_exp2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
yum list <span class="token punctuation">&#123;</span>available<span class="token operator">|</span>installed<span class="token operator">|</span>updates<span class="token punctuation">&#125;</span> <span class="token punctuation">[</span>glob_exp1<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<h4 id="install-and-reinstall"><a href="#install-and-reinstall" class="headerlink" title="install and reinstall"></a>install and reinstall</h4><p>安装和重新安装程序包</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> package1 <span class="token punctuation">[</span>package2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>	<span class="token comment"># 安装</span>
yum reinstall package1 <span class="token punctuation">[</span>package2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>	<span class="token comment"># 重新安装</span></code></pre>

<p>–downloadonly：只下载相关的 rpm 包，默认下载到 var&#x2F;cache&#x2F;yum&#x2F;x86_64&#x2F;7 目录下，不执行安装动作<br>–downloaddir&#x3D;<path>，–destdir&#x3D;<path>：配合–downloadonly，指定下载的路径，如果不存在则自动创建</p>
<h4 id="remove-or-erase"><a href="#remove-or-erase" class="headerlink" title="remove or erase"></a>remove or erase</h4><p>卸载程序包</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum remove <span class="token operator">|</span> erase package1 <span class="token punctuation">[</span>package2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<h4 id="update-and-downgrade"><a href="#update-and-downgrade" class="headerlink" title="update and downgrade"></a>update and downgrade</h4><p>检查可用升级</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum check-update</code></pre>

<p>升级和降级</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum upgrade<span class="token operator">|</span>update <span class="token punctuation">[</span>package1<span class="token punctuation">]</span> <span class="token punctuation">[</span>package2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
yum upgrade-minimal	<span class="token comment"># 最小化升级</span>
yum downgrade package1 <span class="token punctuation">[</span>package2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token comment"># 降级</span></code></pre>

<h4 id="查看包的详细信息"><a href="#查看包的详细信息" class="headerlink" title="查看包的详细信息"></a>查看包的详细信息</h4><p>info、provides|whatprovides、search、deplist、repoquery</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum info <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<p>查看指定的特性（可以是某文件）是由哪个程序包提供的</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum provides <span class="token operator">|</span> whatprovides feature1 <span class="token punctuation">[</span>feature2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<p>主义文件要写全路径，而不是只是文件名，可以使用通配符，例如：<code>yum provides */vsftpd.conf</code></p>
<p>以指定的关键字搜索程序包及 summary 信息</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum search string1 <span class="token punctuation">[</span>string2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<p>查看指定包所依赖的 capabilities：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum deplist package1 <span class="token punctuation">[</span>package2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<p>扩展： centos8 查看未安装包的文件列表</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dnf repoquery package
dnf repoquery <span class="token parameter variable">-l</span> package</code></pre>

<p>扩展： centos7 查看未安装包的文件列表</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> yum-utils
repoquery <span class="token parameter variable">-q</span> package
repoquery <span class="token parameter variable">-ql</span> package</code></pre>

<h4 id="clean-and-makecache"><a href="#clean-and-makecache" class="headerlink" title="clean and makecache"></a>clean and makecache</h4><p>清除&#x2F;var&#x2F;cache&#x2F;yum 缓存</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum clean <span class="token punctuation">[</span> packages <span class="token operator">|</span> metadata <span class="token operator">|</span> expire-cache <span class="token operator">|</span> rpmdb <span class="token operator">|</span> plugins <span class="token operator">|</span> all <span class="token punctuation">]</span></code></pre>

<p>构建缓存</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum makecache</code></pre>

<p>范例：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@centos7 ~<span class="token punctuation">]</span><span class="token comment"># yum clean all; yum makecache</span></code></pre>

<h4 id="history"><a href="#history" class="headerlink" title="history"></a>history</h4><p>事务历史</p>
<p>centos7 及以前的版本日志</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">/var/log/yum.log</code></pre>

<p>centos8 版本日志</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">/var/log/dnf.rpm.log
/var/log/dnf.log</code></pre>

<pre class="language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">history</span> <span class="token punctuation">[</span>info<span class="token operator">|</span>list<span class="token operator">|</span>packages-list<span class="token operator">|</span>packages-info<span class="token operator">|</span>summary<span class="token operator">|</span>addon-info<span class="token operator">|</span>redo<span class="token operator">|</span>undo<span class="token operator">|</span>rollback<span class="token operator">|</span>new<span class="token operator">|</span><span class="token function">sync</span><span class="token operator">|</span>stats<span class="token punctuation">]</span></code></pre>

<p>范例：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@centos8 ~<span class="token punctuation">]</span><span class="token comment"># dnf history</span>
ID     <span class="token operator">|</span> Command line             <span class="token operator">|</span> Date and <span class="token function">time</span>    <span class="token operator">|</span> Action<span class="token punctuation">(</span>s<span class="token punctuation">)</span>      <span class="token operator">|</span> Altered
-------------------------------------------------------------------------------
     <span class="token number">4</span> <span class="token operator">|</span> <span class="token function">install</span> lrzsz            <span class="token operator">|</span> <span class="token number">2020</span>-08-15 09:58 <span class="token operator">|</span> Install        <span class="token operator">|</span>    <span class="token number">1</span>
     <span class="token number">3</span> <span class="token operator">|</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> autofs        <span class="token operator">|</span> <span class="token number">2020</span>-08-15 09:05 <span class="token operator">|</span> Install        <span class="token operator">|</span>    <span class="token number">1</span>
     <span class="token number">2</span> <span class="token operator">|</span> <span class="token function">install</span> <span class="token function">vim</span> <span class="token function">wget</span> <span class="token parameter variable">-y</span>      <span class="token operator">|</span> <span class="token number">2020</span>-08-15 08:03 <span class="token operator">|</span> Install        <span class="token operator">|</span>    <span class="token number">5</span>
     <span class="token number">1</span> <span class="token operator">|</span>                          <span class="token operator">|</span> <span class="token number">2020</span>-07-29 05:12 <span class="token operator">|</span> Install        <span class="token operator">|</span>  <span class="token number">455</span> EE
<span class="token punctuation">[</span>root@centos8 ~<span class="token punctuation">]</span><span class="token comment"># dnf history info 4</span>
Transaction ID <span class="token builtin class-name">:</span> <span class="token number">4</span>
Begin <span class="token function">time</span>     <span class="token builtin class-name">:</span> Sat <span class="token number">15</span> Aug <span class="token number">2020</span> 09:58:11 AM EDT
Begin rpmdb    <span class="token builtin class-name">:</span> <span class="token number">455</span>:2fec96053059825d1e35cd07ef7f27130b90a171
End <span class="token function">time</span>       <span class="token builtin class-name">:</span> Sat <span class="token number">15</span> Aug <span class="token number">2020</span> 09:58:11 AM EDT <span class="token punctuation">(</span><span class="token number">0</span> seconds<span class="token punctuation">)</span>
End rpmdb      <span class="token builtin class-name">:</span> <span class="token number">456</span>:d9d289d9345ad932d7563415cf622772184a6e92
User           <span class="token builtin class-name">:</span> root <span class="token operator">&lt;</span>root<span class="token operator">></span>
Return-Code    <span class="token builtin class-name">:</span> Success
Releasever     <span class="token builtin class-name">:</span> <span class="token number">8</span>
Command Line   <span class="token builtin class-name">:</span> <span class="token function">install</span> lrzsz
Packages Altered:
    Install lrzsz-0.12.20-43.el8.x86_64 @BaseOS</code></pre>

<h4 id="localinstall-or-install"><a href="#localinstall-or-install" class="headerlink" title="localinstall or install"></a>localinstall or install</h4><p>安装及升级本地程序包</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum localinstall<span class="token operator">|</span><span class="token function">install</span> rpmfile1 <span class="token punctuation">[</span>rpmfile2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
yum localupdate<span class="token operator">|</span>update rpmfile1 <span class="token punctuation">[</span>rpmfile2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<h4 id="查看包的安全警告"><a href="#查看包的安全警告" class="headerlink" title="查看包的安全警告"></a>查看包的安全警告</h4><pre class="language-bash" data-language="bash"><code class="language-bash">yum updateinfo --summary<span class="token operator">|</span>--list<span class="token operator">|</span>--info</code></pre>

<h4 id="包组管理相关"><a href="#包组管理相关" class="headerlink" title="包组管理相关"></a>包组管理相关</h4><p>groupinstall、groupupdate、grouplist、groupremove、groupinfo</p>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/826.html">什么是软件包组？</a><br>简单说就是功能相对集中的软件包集合，例如，在初始安装 Linux 时没有安装图形界面，但后来发现需要图形界面的支持，这时可以手工安装图形界面软件组（Server with GUI、GNOME），这样就可以支持图形界面了。</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum grouplist <span class="token punctuation">[</span>hidden<span class="token punctuation">]</span> <span class="token punctuation">[</span>groupwildcard<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
yum groupinstall group1 <span class="token punctuation">[</span>group2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
yum groupupdate group1 <span class="token punctuation">[</span>group2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
yum groupremove group1 <span class="token punctuation">[</span>group2<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
yum groupinfo group1 <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre>

<h3 id="实现私有-yum-仓库"><a href="#实现私有-yum-仓库" class="headerlink" title="实现私有 yum 仓库"></a>实现私有 yum 仓库</h3><p>服务端：</p>
<ol>
<li>将远程仓库的 rpm 包和 meta 同步到本地</li>
<li>安装 http 或 https 或 ftp 或 file 服务，使客户端可以访问</li>
</ol>
<p>客户端：</p>
<ol>
<li>修改配置文件，将远程仓库地址修改为私有的仓库地址</li>
</ol>
<p>具体实现：</p>
<h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h4><p>服务端环境为 CentOS7，配置 yum 和 apt 私有仓库</p>
<ol>
<li>创建目录</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@centos7 mirrors<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/data/mirrors
<span class="token punctuation">[</span>root@centos7 mirrors<span class="token punctuation">]</span><span class="token comment"># tree</span>
<span class="token builtin class-name">.</span>
├── centos
│   ├── <span class="token number">6</span>
│   │   └── x86_64
│   ├── <span class="token number">7</span>
│   │   └── x86_64
│   └── <span class="token number">8</span>
│       └── x86_64
├── epel
│   ├── <span class="token number">6</span>
│   │   └── x86_64
│   ├── <span class="token number">7</span>
│   │   └── x86_64
│   └── <span class="token number">8</span>
│       └── x86_64
└── ubuntu
    ├── <span class="token number">18.04</span>
    │   └── x86_64
    └── <span class="token number">20.04</span>
        └── x86_64

<span class="token number">19</span> directories, <span class="token number">0</span> files</code></pre>

<ol start="2">
<li>安装 ngnix，配置路径</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash">location /mirrors <span class="token punctuation">&#123;</span>
    root /data<span class="token punctuation">;</span>
    autoindex on<span class="token punctuation">;</span>
    autoindex_exact_size on<span class="token punctuation">;</span>
    autoindex_localtime on<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><img data-src="//img.to2b.cn/blog/ljk/1597673044262.png"></p>
<ol start="3">
<li>配置服务端的 yum 远程仓库国内的镜像源<br>centos7</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># /etc/yum.repos.d/tmp.repo</span>
<span class="token punctuation">[</span>base<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>base repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://mirrors.aliyun.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
        http://mirrors.163.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
        http://mirrors.huaweicloud.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
        http://mirrors.tuna.tsinghua.edu.cn/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>	<span class="token comment"># 方便下载，先禁止校验</span>
<span class="token comment"># gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span></code></pre>

<p>ubuntu18.04</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
</code></pre>

<ol start="4">
<li>将远程仓库的 rpm 包和 meta 同步到本地<br>centos 使用 reposync，centos8 的 dnf 集成，centos7 来自 yum-utils；ubuntu 使用 apt-mirror，yum 无法安装这个命令，所以可以在 ubuntu 的机器上同步完后，拷贝到 centos 的机器上。如果服务端的环境是 ubuntu，apt 则可以直接安装 apt-mirror 和 reposync 命令。</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash">dnf reposync <span class="token parameter variable">--repoid</span><span class="token operator">=</span>epel --download-metadata <span class="token parameter variable">-p</span> /data/mirrors/epel/7/x86_64</code></pre>

<p>以上命令是把整个 epel 仓库同步过来，大约有一万多个包。<br>如果想自定义仓库，控制仓库中有哪些包，以及每个包的版本，可以使用<code>yum install --downloadonly</code>下载<br>指定的 rpm 包，或者去官网等渠道下载想要的版本的包，将这些包放到指定目录下：<code>/data/mirror/centos&#123;6,7,8&#125;/x86_64</code>，<br>然后执行<code>createrepo /data/mirror/centos&#123;6,7,8&#125;/x86_64</code>即可生产元数据 repodata，当仓库的包有变动，重新执行<code>createrepo</code>命令即可</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@centos7 x86_64<span class="token punctuation">]</span><span class="token comment">#yum install --downloadonly --downloaddir=./ php mysql nginx httpd</span>
<span class="token punctuation">[</span>root@centos7 x86_64<span class="token punctuation">]</span><span class="token comment">#ll</span>
total <span class="token number">17724</span>
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">105968</span> Aug <span class="token number">23</span>  <span class="token number">2019</span> apr-1.4.8-5.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">94132</span> Jul  <span class="token number">4</span>  <span class="token number">2014</span> apr-util-1.5.2-6.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">2843664</span> Apr  <span class="token number">4</span> 04:53 httpd-2.4.6-93.el7.centos.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">94308</span> Apr  <span class="token number">4</span> 04:53 httpd-tools-2.4.6-93.el7.centos.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">49644</span> Jul  <span class="token number">4</span>  <span class="token number">2014</span> libzip-0.10.1-8.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">31264</span> Jul  <span class="token number">4</span>  <span class="token number">2014</span> mailcap-2.1.41-2.el7.noarch.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">9169616</span> Apr  <span class="token number">4</span> 05:01 mariadb-5.5.65-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">575413</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">19857</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-all-modules-1.16.1-1.el7.noarch.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">30445</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-http-image-filter-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">39849</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-http-perl-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">29613</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-http-xslt-filter-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">58301</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-mail-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">86465</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-stream-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1421660</span> Apr  <span class="token number">4</span> 05:04 php-5.4.16-48.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">2880032</span> Apr  <span class="token number">4</span> 05:04 php-cli-5.4.16-48.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">578968</span> Apr  <span class="token number">4</span> 05:04 php-common-5.4.16-48.el7.x86_64.rpm
<span class="token punctuation">[</span>root@centos7 x86_64<span class="token punctuation">]</span><span class="token comment">#createrepo ./</span>
Spawning worker <span class="token number">0</span> with <span class="token number">17</span> pkgs
Workers Finished
Saving Primary metadata
Saving <span class="token function">file</span> lists metadata
Saving other metadata
Generating sqlite DBs
Sqlite DBs complete
<span class="token punctuation">[</span>root@centos7 x86_64<span class="token punctuation">]</span><span class="token comment">#ll</span>
total <span class="token number">17728</span>
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">105968</span> Aug <span class="token number">23</span>  <span class="token number">2019</span> apr-1.4.8-5.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">94132</span> Jul  <span class="token number">4</span>  <span class="token number">2014</span> apr-util-1.5.2-6.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">2843664</span> Apr  <span class="token number">4</span> 04:53 httpd-2.4.6-93.el7.centos.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">94308</span> Apr  <span class="token number">4</span> 04:53 httpd-tools-2.4.6-93.el7.centos.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">49644</span> Jul  <span class="token number">4</span>  <span class="token number">2014</span> libzip-0.10.1-8.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">31264</span> Jul  <span class="token number">4</span>  <span class="token number">2014</span> mailcap-2.1.41-2.el7.noarch.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">9169616</span> Apr  <span class="token number">4</span> 05:01 mariadb-5.5.65-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">575413</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">19857</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-all-modules-1.16.1-1.el7.noarch.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">30445</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-http-image-filter-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">39849</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-http-perl-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">29613</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-http-xslt-filter-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">58301</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-mail-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">86465</span> Oct  <span class="token number">4</span>  <span class="token number">2019</span> nginx-mod-stream-1.16.1-1.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1421660</span> Apr  <span class="token number">4</span> 05:04 php-5.4.16-48.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">2880032</span> Apr  <span class="token number">4</span> 05:04 php-cli-5.4.16-48.el7.x86_64.rpm
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">578968</span> Apr  <span class="token number">4</span> 05:04 php-common-5.4.16-48.el7.x86_64.rpm
drwxr-xr-x. <span class="token number">2</span> root root    <span class="token number">4096</span> Aug <span class="token number">18</span> <span class="token number">15</span>:33 repodata</code></pre>

<h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><ol>
<li>修改配置文件 <code>/etc/yum.repos.d/base.repo</code></li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>base<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>base repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://10.0.0.100/mirrors/centos/7/x86_64
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</code></pre>

<ol start="2">
<li>重新生产缓存</li>
</ol>
<pre class="language-bash" data-language="bash"><code class="language-bash">yum clean all<span class="token punctuation">;</span> yum makecache</code></pre>

<h2 id="Ubuntu-软件管理"><a href="#Ubuntu-软件管理" class="headerlink" title="Ubuntu 软件管理"></a>Ubuntu 软件管理</h2><p>Ubuntu 下，dpkg 类似 rpm，apt 类似 yum</p>
<h3 id="dpkg-常见用法"><a href="#dpkg-常见用法" class="headerlink" title="dpkg 常见用法"></a>dpkg 常见用法</h3><p>安装</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-i</span> package.deb</code></pre>

<p>卸载，不建议，不自动卸载依赖于它的包</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-r</span> package
dpkg <span class="token parameter variable">-P</span> package 	<span class="token comment"># 同时删除配置文件</span></code></pre>

<p>列出当前已安装的包</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-l</span></code></pre>

<p>显示该包的简要说明</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-l</span> package</code></pre>

<p>列出该包的状态，包括详细信息，类似 rpm -qi</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-s</span> package</code></pre>

<p>列出该包中所包含的文件，类似 rpm -ql</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-L</span> package</code></pre>

<p>搜索包含 pattern 的包，类似 rpm –qf</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-S</span> <span class="token operator">&lt;</span>pattern<span class="token operator">></span></code></pre>

<p>列出 deb 包的内容，类似 rpm –qpl</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-c</span> package.deb</code></pre>

<p>解开 deb 包的内容</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">--unpack</span> package.deb</code></pre>

<h3 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h3><p>apt 与 apt-get 有一些类似的命令选项，但它并不能完全向下兼容 apt-get 命令,也即可用 apt 替换部分 apt-get 系列命令，但不是全部</p>
<table>
<thead>
<tr>
<th>apt 命令</th>
<th>被取代的命令</th>
<th>命令的功能</th>
</tr>
</thead>
<tbody><tr>
<td>apt install</td>
<td>apt-get install</td>
<td>安装软件包</td>
</tr>
<tr>
<td>apt remove</td>
<td>apt-get remove</td>
<td>移除软件包</td>
</tr>
<tr>
<td>apt purge</td>
<td>apt-get purge</td>
<td>移除软件包及配置文件</td>
</tr>
<tr>
<td>apt update</td>
<td>apt-get update</td>
<td>刷新存储库索引</td>
</tr>
<tr>
<td>apt upgrade</td>
<td>apt-get upgrade</td>
<td>升级所有可升级的软件包</td>
</tr>
<tr>
<td>apt autoremove</td>
<td>apt-get autoremove</td>
<td>自动删除不需要的包</td>
</tr>
<tr>
<td>apt full-upgrade</td>
<td>apt-get dist-upgrade</td>
<td>在升级软件包时自动处理依赖关系</td>
</tr>
<tr>
<td>apt search</td>
<td>apt-cache search</td>
<td>搜索应用程序</td>
</tr>
<tr>
<td>apt show</td>
<td>apt-cache show</td>
<td>显示安装细节</td>
</tr>
</tbody></table>
<h4 id="卸载软件包："><a href="#卸载软件包：" class="headerlink" title="卸载软件包："></a>卸载软件包：</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> purge package
<span class="token function">sudo</span> <span class="token function">apt</span> autoremove
<span class="token function">sudo</span> <span class="token function">apt</span> autoclean
<span class="token comment"># dpkg -l |grep ^rc|awk '&#123;print $2&#125;' |sudo xargs dpkg -P</span></code></pre>

<h4 id="删除缓存"><a href="#删除缓存" class="headerlink" title="删除缓存"></a>删除缓存</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> autoclean
<span class="token function">sudo</span> <span class="token function">apt-get</span> autoremove
<span class="token function">sudo</span> <span class="token function">apt-get</span> clean</code></pre>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160536339.png" alt="像方便面一样的男子 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="//img.lujinkai.cn/blog/ljk/1607160019009.png" alt="像方便面一样的男子 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 软件管理</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/tar%E5%92%8Cfind/%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BElocate%E5%92%8Cfind/" rel="prev" title="文件查找locate和find">
                  <i class="fa fa-chevron-left"></i> 文件查找locate和find
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E8%BF%90%E7%BB%B4/%E5%9F%BA%E7%A1%80/%E7%A3%81%E7%9B%98/%E7%A3%81%E7%9B%98%E5%AD%98%E5%82%A8%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" rel="next" title="磁盘存储和文件系统">
                  磁盘存储和文件系统 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18016600号-3 </a>
  </div>

<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">像方便面一样的男子</span>
</div>

    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="//s1.lujinkai.cn/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="//s1.lujinkai.cn/libs/lozad.js/1.16.0/lozad.min.js"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="//s1.lujinkai.cn/libs/algoliasearch/4.11.0/algoliasearch-lite.umd.min.js"></script>
<script src="//s1.lujinkai.cn/libs/instantsearch.js/4.36.0/instantsearch.production.min.js"></script><script src="/js/third-party/search/algolia-search.js"></script>






  





</body>
</html>
